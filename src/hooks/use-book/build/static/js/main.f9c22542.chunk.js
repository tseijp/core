(this["webpackJsonpuse-amazon"]=this["webpackJsonpuse-amazon"]||[]).push([[0],{38:function(e){e.exports=JSON.parse('{"inputStream":{"type":"LiveStream","constraints":{"width":{"min":450},"height":{"min":300},"facingMode":"environment","aspectRatio":{"min":1,"max":2}}},"locator":{"patchSize":"medium","halfSample":true},"numOfWorkers":2,"frequency":10,"decoder":{"readers":["ean_reader"]},"locate":true}')},43:function(e,t,n){e.exports=n(52)},48:function(e,t,n){},52:function(e,t,n){"use strict";n.r(t);var c=n(17),r=n(4),o=n(1),a=n.n(o),i=n(29),u=n.n(i);n(48),Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var s=n(38),l=n(49);function f(e){var t=e.onStarted,n=e.onDetected,r=Object(o.useRef)((function(e){return t(e)})),i=Object(o.useRef)((function(e){return n(e)}));Object(o.useEffect)((function(){return l.init(s,(function(e){return e?console.log(e,"error msg"):(l.start(),r.current(!0),console.log("\t\t__Scanner Start__"))})),function(){return l.stop(),r.current(!1),console.log("\t\t~~Scanner stop~~")}}),[]);var u=Object(o.useCallback)((function(e,t,n,c){return l.ImageDebug.drawPath(e,n,t,{color:c,lineWidth:2})}),[]),f=Object(o.useCallback)((function(e,t,n){return u(e,t,{x:0,y:1},n?"#0F0":"#00F")}),[u]),b=Object(o.useCallback)((function(e,t){return t.clearRect.apply(t,[0,0].concat(Object(c.a)(["width","height"].map((function(t){return Number(e.getAttribute(t))})))))}),[]);return Object(o.useEffect)((function(){l.onProcessed((function(e){if(e){var t=l.canvas.ctx.overlay,n=l.canvas.dom.overlay;e.boxes&&b(n,t),e.boxes.forEach((function(n){return f(n,t,n===e.box)})),e.codeResult&&u(e.line,t,{x:"x",y:"y"},"#F00")}})),l.onDetected((function(e){return i.current(e.codeResult.code)}))}),[u,f,b]),a.a.createElement("div",{id:"interactive",className:"viewport",style:{width:"100%",height:"100%",top:0,bottom:0}})}var b=n(10),m=n(8),d=n(21);function h(e){var t=e.children,n=e.height,c=void 0===n?100:n,i=e.started,u=void 0!==i&&i,s=e.onOpen,l=void 0===s?null:s,f=e.onClose,h=void 0===f?null:f,O=Object(m.useSpring)((function(){return{y:c}})),v=Object(r.a)(O,2),g=v[0].y,j=v[1],p=Object(o.useCallback)((function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return l&&(l(),j({y:0,config:e?m.config.wobbly:m.config.stiff}))}),[l,j]),y=Object(o.useCallback)((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;return h&&(h(),j({y:c,config:Object(b.a)(Object(b.a)({},m.config.stiff),{},{velocity:e})}))}),[c,h,j]),w=Object(d.a)((function(e){var t=e.last,n=Object(r.a)(e.vxvy,2)[1],o=Object(r.a)(e.movement,2),a=o[0],i=o[1],u=e.cancel;if(i<-c/3&&u&&u(),t)return(i>.5*c||n>2.5)&&-100<a&&a<100?y(n):p(n>0);j({y:i,immediate:!1,config:m.config.stiff})}),{initial:function(){return[0,g.get()]},filterTaps:!0,bounds:{top:0},rubberband:!0}),x=Object(o.useRef)((function(e){return e?p():y()}));Object(o.useEffect)((function(){x.current(u)}),[u]);var k=g.to((function(e){return e<c?"block":"none"})),E=Object(o.useMemo)((function(){return{bottom:"calc(-100vh + ".concat(c-100,"px)"),left:"2vw",width:"96vw",height:"calc(100vh + 100px)",position:"fixed",borderRadius:"4em 4em 0px",zIndex:100,backgroundColor:"rgba(0,0,0,0)",touchAction:"none"}}),[c]);return a.a.createElement(m.animated.div,Object.assign({className:"sheet"},w(),{style:Object(b.a)(Object(b.a)({},E),{},{y:g,display:k})}),t)}function O(e){var t=e.children,n=e.width,c=void 0===n?600:n,i=e.visible,u=void 0===i?4:i,s=e.style,l=void 0===s?{}:s,f=Object(o.useMemo)((function(){return t.length>u?t.length:u}),[t,u]),h=Object(o.useCallback)((function(e){return(e<0?e+f:e)%f}),[t,f]),O=Object(o.useCallback)((function(e,t,n){return h(e-t+n)}),[h]),v=Object(m.useSprings)(f,(function(e){return{x:(e<f-1?e:-1)*c}})),g=Object(r.a)(v,2),j=g[0],p=g[1],y=Object(o.useRef)([0,1]),w=Object(o.useRef)(0),x=Object(o.useRef)(0),k=Object(o.useCallback)((function(e,t){var n=h(Math.floor(e/c)%f),r=t<0?f-u:1;p((function(o){var a=O(o,n,r),i=O(o,y.current[0],y.current[1]),u=t>0?a:f-a-1;return{x:-e%(c*f)+c*(n-(e<0?f:0)+a-r),immediate:t<0?i>a:i<a,config:{tension:100*(1+f-u),friction:30+40*u}}})),y.current=[n,r]}),[h,O,c,u,p,f]),E=Object(d.b)({onDrag:function(e){var t=Object(r.a)(e.offset,1)[0],n=Object(r.a)(e.vxvy,1)[0];return n&&(x.current=-t,k(w.current-t,-n))},onWheel:function(e){var t=Object(r.a)(e.offset,2)[1],n=Object(r.a)(e.vxvy,2)[1];return n&&(w.current=t,k(x.current+t,n))}});return a.a.createElement("div",Object.assign({},E(),{style:{position:"absolute",bottom:0,left:0,width:"100%",height:"100%"}}),j.map((function(e,n){var c=e.x;return a.a.createElement(m.animated.div,{key:n,style:Object(b.a)({position:"absolute",x:c,willChange:"transform"},l)},t[n])})))}function v(e){var t=e.url,n=void 0===t?"":t,c=e.limit,i=void 0===c?400:c,u=e.style,s=void 0===u?{}:u,l=e.onOpen,f=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.size,c=void 0===n?"LZZZZZZZ":n,a=t.isssl,i=void 0!==a&&a,u=t.searches,s=void 0===u?10:u,l=Object(o.useMemo)((function(){return"".concat(i?"images-na.ssl-images-":"images-jp.","amazon.com")}),[i]),f=Object(o.useCallback)((function(e){return"http://".concat(l,"/images/P/").concat(e,".09.").concat(c)}),[l,c]),m=Object(o.useRef)([]),d=Object(o.useState)(null),h=Object(r.a)(d,2),O=h[0],v=h[1],g=Object(o.useRef)(new Image),j=Object(o.useRef)(""),p=Object(o.useMemo)((function(){var t,n=new URL("".concat(e.match("https")?"":"https://").concat(e)).pathname.split("/").filter((function(e){return e})),c=n.map((function(e,t){return"dp"===e&&t})).find((function(e){return e}))||0,r=n.find((function(e,t){return t===c+1}))||"",o=c>0?n[0]:"",a=(null===(t=n.find((function(e){return e.match("ref=")})))||void 0===t?void 0:t.split("ref=")[1])||"";return m.current.push(parseInt(r,10)),{name:o,isbn:r,ref:a}}),[e]),y=Object(o.useCallback)((function(){var e=m.current[0],t=m.current.length,n=e+~~((t+1)/2)*(t%2*2-1);if(!(t>s||j.current))return m.current.push(n),v((function(e){return Object(b.a)(Object(b.a)({},e),{},{src:f(n)})}))}),[f,s]);return Object(o.useEffect)((function(){if(!j.current){var e=m.current.slice(-1)[0]||p.isbn,t=f(e),n=p.name||"";v({src:t,alt:n}),g.current.src=t,g.current.onload=function(){var e=g.current.width,t=g.current.height;if(e<2||t<2)return y();j.current=g.current.src}}}),[f,y,p,null===O||void 0===O?void 0:O.src]),{path:p,image:g,img:O}}(n),h=Object(o.useRef)(!1),O=Object(m.useSpring)((function(){return{scale:1,x:0,y:0}})),v=Object(r.a)(O,2),g=v[0],j=g.scale,p=g.x,y=g.y,w=v[1],x=Object(d.b)({onHover:function(e){return w({scale:e.hovering?1.1:1})},onClick:function(e){return l(),e.stopPropagation()},onDrag:function(e){var t=e.down,n=Object(r.a)(e.vxvy,1)[0],c=Object(r.a)(e.movement,2),o=c[0],a=c[1],u=e.cancel;Math.pow(o,2)+Math.pow(a,2)>Math.pow(i,2)&&u&&u();var s=100<Math.floor(o)||2<Math.floor(n)||t||h.current;if(w({x:t?o:0,y:t?a:0,scale:s&&Math.floor(a)<i/2?1.2:.8}),s)return null;h.current=!0,l()}}),k=Object(o.useMemo)((function(){return{div:Object(b.a)({width:"auto",height:"100%",scale:j,x:p,y:y,zIndex:1},s),img:{width:"auto",height:"100%",borderRadius:"1em",pointerEvents:"none"}}}),[s,j,p,y]);return a.a.createElement(m.animated.div,Object.assign({style:k.div},x()),f.img&&a.a.createElement("img",Object.assign({style:k.img},f.img)))}function g(e){var t=e.height,n=e.limit,c=e.opened,i=e.started,u=e.onOpen,s=e.onClose,l=Object(m.useSpring)((function(){return{scale:1,x:0,y:0}})),f=Object(r.a)(l,2),h=f[0],O=h.scale,v=h.x,g=h.y,j=f[1],p=Object(o.useCallback)((function(){return j({scale:1.2,x:-25,y:-25,config:m.config.stiff})}),[j]),y=Object(o.useCallback)((function(){return j({scale:1,x:0,y:100,config:m.config.molasses})}),[j]),w=Object(o.useCallback)((function(){return j({scale:1,x:0,y:0,config:m.config.stiff})}),[j]),x=Object(d.b)({onClick:function(){return c&&i?(s(),w()):(u(),p())},onDrag:function(e){var t=e.down,c=Object(r.a)(e.movement,2),o=c[0],a=c[1],i=e.cancel;Math.pow(o,2)+Math.pow(a,2)>Math.pow(n,2)&&i&&i(),j({x:t?o:0,y:t?a:0,config:m.config.stiff})}}),k=g.to((function(e){return e<t}))?"flex":"none",E=Object(o.useMemo)((function(){return{fontSize:"2em",bottom:"1em",right:"1em",height:"2em",width:"2em",borderRadius:"4em",zIndex:99,position:"fixed",background:"coral",alignItems:"center",justifyContent:"center"}}),[]);return Object(o.useEffect)((function(){i?y():w()}),[i,y,w]),a.a.createElement(m.animated.div,Object.assign({className:"action-btn"},x(),{style:Object(b.a)(Object(b.a)({},E),{},{display:k,scale:O,x:v,y:g})}),"+")}var j=[4041013380,4041002877,4041315220,4041067944,4041366054,4041245257],p=function(){var e=Object(o.useState)([]),t=Object(r.a)(e,2),n=t[0],i=t[1],u=Object(o.useState)(""),s=Object(r.a)(u,2),l=s[0],b=s[1],m=Object(o.useState)([].concat(j).map((function(e){return"amazon.com/dp/".concat(e,"/")}))),d=Object(r.a)(m,2),p=d[0],y=d[1],w=Object(o.useState)(!1),x=Object(r.a)(w,2),k=x[0],E=x[1],C=Object(o.useState)(!1),S=Object(r.a)(C,2),R=S[0],M=S[1],z=Object(o.useRef)(null),I=Object(o.useCallback)((function(e){if(null===z.current&&(10===e.length||13===e.length)){var t=10===e.length?e:e.slice(3);n.filter((function(e){return e.match(t)})).length||(z.current=t,setTimeout((function(){return z.current=null}),2e3),i((function(e){return[].concat(Object(c.a)(e),["amazon.com/dp/".concat(t)])})))}}),[n]),D=Object(o.useCallback)((function(e){E(!1),setTimeout((function(){return b(e),y((function(t){return[].concat(Object(c.a)(t),[e])}))}),1)}),[]);return console.log("Index Render ".concat(k?"":"no ","opened ").concat(R?"":"no ","started")),a.a.createElement(o.Fragment,null,a.a.createElement(g,{onOpen:function(){return!k&&E(!0)},onClose:function(){return k&&E(!1)},height:.96*window.innerHeight,limit:200,opened:k,started:R}),a.a.createElement(h,{onOpen:function(){return!k&&(E(!0),b(""),i([]))},onClose:function(){return k&&E(!1)},height:.96*window.innerHeight,started:R},k&&a.a.createElement(f,{onStarted:function(e){return M(e)},onDetected:I}),k&&R&&a.a.createElement(O,{width:window.innerWidth/4,visible:6,style:{height:"40%",bottom:"15%",left:0}},n.map((function(e,t){return a.a.createElement(v,{key:t,url:e,onOpen:function(){return D(e)}})})))),a.a.createElement(O,{width:window.innerWidth/3,visible:5,style:{height:"50%",top:0,left:0}},p.map((function(e,t){return a.a.createElement(v,{key:t,url:e,onOpen:function(){return b(e)}})}))),a.a.createElement("div",{style:{position:"fixed",width:"auto",height:"50%",bottom:0,left:0,fontSize:"2em"}},a.a.createElement("span",{style:{color:"white"}},l&&a.a.createElement(v,{url:l,onOpen:function(){return b("")}}))))};u.a.render(a.a.createElement(p,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[43,1,2]]]);
//# sourceMappingURL=main.f9c22542.chunk.js.map