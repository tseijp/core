{"version":3,"sources":["page/serviceWorker.ts","src/meshs/Stage.tsx","src/meshs/Title.tsx","src/components/Icon.tsx","src/containers/Trees.tsx","src/containers/Sides.tsx","src/containers/Trans.tsx","page/Home.tsx","src/components/Card.tsx","page/codes/core/Card.tsx","src/components/Code.tsx","page/codes/core/Code.tsx","src/components/Grow.tsx","page/codes/core/Grow.tsx","src/utils.ts","src/containers/Notes.tsx","page/codes/core/Notes.tsx","src/containers/Split.tsx","page/codes/core/Split.tsx","src/components/Head.tsx","page/codes/core/Trees.tsx","page/codes/home/Grid.tsx","src/meshs/Player.tsx","page/codes/home/Player.tsx","page/codes/home/Stage.tsx","page/codes/home/Title.tsx","src/meshs/Kinect.tsx","page/codes/mesh/Kinect.tsx","src/meshs/Model.tsx","src/meshs/Swarm.tsx","page/codes/mesh/Model.tsx","src/meshs/Motion.tsx","page/codes/mesh/Motion.tsx","page/utils.ts","src/hooks/usePage.ts","page/Hook.tsx","page/None.tsx","src/containers/Modal.tsx","src/containers/Pills.tsx","page/Note.tsx","page/index.tsx","src/hooks/useNote.ts","src/hooks/useUser.ts"],"names":["Boolean","window","location","hostname","match","Points","amp","dist","time","amount","x","y","color","dark","size","props","style","geometry","useRef","material","uniforms","useMemo","value","THREE","delta","useEffect","scales","Float32Array","positions","i","j","ix","iy","current","setAttribute","useFrame","attributes","scale","needsUpdate","position","t","array","Math","sin","ref","attach","args","vertexShader","fragmentShader","Plane","receiveShadow","transparent","opacity","Stage","rotation","PI","Title","anchorX","anchorY","textAlign","href","space","maxWidth","children","reflow","useReflow","onClick","open","onSync","letterSpacing","fontSize","lineHeight","Icon","fa","fab","circ","onOpen","className","useSpring","xys","set","bind","useMove","vxvy","vx","vy","last","padding","top","right","userSelect","borderRadius","background","height","width","div","interpolate","s","filter","join","transform","defaultConfig","restSpeedThreshold","restDisplacementThreshold","styles","overflow","verticalAlign","whiteSpace","textOverflow","cursor","marginRight","fontFamily","textTransform","display","willChange","marginLeft","paths","TreeIcon","CloseSquareO","viewBox","d","MinusSquareO","PlusSquareO","EyeO","TreesContent","content","type","hide","icon","eyeClick","useCallback","p","immediate","iconClick","Trees","visible","depth","root","springConfig","topStyle","useState","state","spring","config","default","from","to","Children","map","child","grand","toArray","length","slice","Array","zIndex","borderLeft","left","overflowX","SidesArea","rate","animation","innerWidth","SidesContainer","backgroundColor","margin","SidesIcon","SidesItem","transition","e","stopPropagation","Sides","opened","setOpened","bool","v","wobbly","slow","close","stiff","velocity","useGesture","onHover","hovering","onDrag","down","movement","mx","my","cancel","React","key","TransArea","r","cos","TransIcon","rotateZ","TransContainer","TransItem","alignItems","Trans","getr","pre","unit","onBind","onPinch","offset","a","scroll","html","justifyContent","Page","onChangePages","vec","group","useThree","aspect","useAspect","onReflow","_","h","lerp","dir","marginBottom","center","Home","page","setPage","useGrid","init","md","lg","setDark","setSize","colorManagement","shadowMap","gl","alpha","camera","zoom","intensity","castShadow","penumbra","fallback","onScroll","target","scrollTop","Card","max","min","xyz","styleCard","minHeight","maxHeight","calc","innerHeight","event","onMove","xy","boxShadow","z","colors","HookCard","use","items","codeCard","require","atomOneLight","atomOneDark","Light","Code","code","language","inline","onDoubleClick","navigator","clipboard","writeText","customStyle","PreTag","useInlineStyles","showLineNumbers","codes","HookCode","useControl","codeCode","Grow","onView","role","fn","useView","isIntersecting","HookGrow","codeGrow","topUp","text","charAt","toUpperCase","toLowerCase","clamp","range","sign","num","samp","l","fill","getWRate","o","w","reduce","b","equalPathname","urls","u","URL","joinURL","pathname","every","self","pageConfig","onChange","defaultPage","id","split","find","isHome","isLocal","protocol","portname","port","search","hash","normPage","Object","entries","sort","forEach","val","arr","getp","geti","n","maxLength","joinPage","defaultUserConfig","keys","user","onSign","onSignin","onSignout","strArray","resultArray","TypeError","shift","replace","str","String","push","parts","is","isArray","obj","prototype","toString","call","fun","und","nul","Set","Map","equ","g","debug","NotesSide","px","NotesItem","Notes","order","grandren","setLength","setHeight","isOpen","setIsOpen","orderRef","heightRef","targetRef","setPosition","childs","c","clientHeight","len","getY","getG","indexOf","useSprings","springs","setTimeout","startTime","timeStamp","row","round","ind","ret","swap","assign","getF","cloneElement","resize","addEventListener","removeEventListener","HookNotes","codeNotes","Split","styleItem","sRef","lRef","hRef","wRef","setH","setW","first","direction","k","m","W","move","HookSplit","number","codeSplit","Head","HookTrees","codeTrees","Helper","HookGrid","concurrent","noEvents","pixelRatio","Player","gRef","pRef","player","setP","domElement","dx","dy","dz","onWheel","domTarget","eventOptions","passive","pos","get","HookPlayer","antialias","logarithmicDepthBuffer","far","devicePixelRatio","onCreated","outputEncoding","toneMapping","codePlayer","HookStage","scrub","codeStage","ANCHORX","ANCHORY","TEXTALIGN","Content","HookTitle","powerPreference","stencil","setClearColor","angle","shadow-mapSize-width","shadow-mapSize-height","codeTitle","cropValue","Kinect","url","nearClipping","depthWrite","pointSize","farClipping","depthTest","zOffset","video","document","createElement","src","loop","load","muted","play","points","floor","bufferGeometry","shaderMaterial","blending","HookKinect","codeKinect","Model","useLoader","GLTFLoader","animations","nodes","actions","mixer","modelPos","update","updateProjectionMatrix","lookAt","actionNum","idle","clipAction","weight","timeScale","console","log","clip","uncacheClip","dispose","object","skeleton","skinning","Swarm","count","mesh","dummy","random","mul","add","particles","xFactor","factor","yFactor","speed","zFactor","particle","updateMatrix","setMatrixAt","matrix","instanceMatrix","HookModel","scl","distance","defaultURL","Motion","gltfURL","textureURL","action","gltf","texture","HookMotion","xz","rxz","ry","codeMotion","getElementById","behavior","customPage","isSign","status","fetcher","headers","axios","then","res","Error","data","signin","cred","post","token","username","authtoken","hookTree","getval","hookPage","Hook","CODES","usePage","pageRef","confRef","defaultConf","newPage","history","pushState","item","card","ctrl","CardHook","Modal","onClose","createPortal","Pills","childPos","childHub","setChildHub","setHub","bottom","App","path","component","exact","xs","side","setSide","title","anchor","collapsed","ids","sm","rel","initGetURL","initGetter","initPoster","initNoteConfig","getURLRef","getterRef","posterRef","configRef","isFetching","note","getNote","updateURL","updateGetter","updateConfig","previousURL","diff","results","postNote","updatePoster","useNote","setNote","initURL","initSign","initConfig","urlRef","signinRef","useCookies","cookies","del","password","email","credit","setCredit","setUser","updateSignin","onError","catch","name","isAuth","input","label","validate","autoComplete","error","success","useUser","lang","setLang","xl","next","onMouseEnter","marginTop","paddingTop","ja_text","en_text","trim","source","borderRadus","charSet","ReactDOM","render","serviceWorker","ready","registration","unregister","message"],"mappings":"orCAYoBA,QACW,cAA7BC,OAAOC,SAASC,UAEe,UAA7BF,OAAOC,SAASC,UAEhBF,OAAOC,SAASC,SAASC,MACvB,2D,uGCGAC,EAAe,SAAC,GAEqC,IAAD,IADtDC,WACsD,MADlD,EACkD,MADhDC,YACgD,MAD3C,EAC2C,MADzCC,YACyC,MADpC,EACoC,MADlCC,cACkC,MAD3B,CAACC,EAAE,GAAGC,EAAE,IACmB,MAAtDC,aAAsD,MAAhD,GAAgD,MAA5CC,YAA4C,aAAhCC,YAAgC,MAA3B,EAA2B,EAAXC,GAAW,EAAxBC,MAAwB,6EAChDC,EAAYC,iBAAY,MACxBC,EAAYD,iBAAY,MACxBE,EAAWC,mBAAQ,iBAAO,CAC5BT,MAAO,CAACU,MAAM,IAAIC,QAAYX,GAAOC,EAAK,SAAS,IACnDC,KAAM,CAACQ,MAAOR,MACd,CAACF,EAAMC,EAAKC,IACVU,EAAQN,iBAAO,GAkCrB,OAjCAO,qBAAU,WAIN,IAHA,IAAMC,EAAY,IAAIC,aAAalB,EAAOC,EAAED,EAAOE,GAC7CiB,EAAY,IAAID,aAAalB,EAAOC,EAAED,EAAOE,EAAE,GACjDkB,EAAI,EAAGC,EAAI,EACLC,EAAK,EAAGA,EAAKtB,EAAOC,EAAGqB,IAC7B,IAAM,IAAIC,EAAK,EAAGA,EAAKvB,EAAOE,EAAGqB,IAC7BJ,EAAWC,GAAME,EAAKxB,EAAWE,EAAOC,EAAIH,EAAS,EACrDqB,EAAWC,EAAI,GAAM,EACrBD,EAAWC,EAAI,GAAMG,EAAKzB,EAAWE,EAAOE,EAAIJ,EAAS,EACzDmB,EAAQI,GAAM,EACdD,GAAK,EACLC,IAGRb,EAASgB,QAAQC,aAAa,QAAW,IAAIX,kBAAsBG,EAAW,IAC9ET,EAASgB,QAAQC,aAAa,WAAW,IAAIX,kBAAsBK,EAAW,MAC/E,CAACrB,EAAME,IACV0B,aAAU,WACN,IAAIN,EAAI,EAAGC,EAAI,EACfb,EAASgB,QAAQG,WAAWC,MAAMC,aAAc,EAChDrB,EAASgB,QAAQG,WAAWG,SAASD,aAAc,EACnD,IAAM,IAAIP,EAAK,EAAGA,EAAKtB,EAAOC,EAAGqB,IAC7B,IAAM,IAAIC,EAAK,EAAGA,EAAKvB,EAAOE,EAAGqB,IAAQ,CACrC,IAAMQ,EAAIhB,EAAMS,QAChBhB,EAASgB,QAAQG,WAAWG,SAASE,MAAMZ,EAAE,GAAMa,KAAKC,IAAY,IAANZ,EAAGS,IAASlC,EAASoC,KAAKC,IAAY,IAANX,EAAGQ,IAASlC,EAC1GW,EAASgB,QAAQG,WAAWC,MAAMI,MAAMX,GAAmC,GAA3BY,KAAKC,IAAY,IAANZ,EAAGS,IAAU,GAAmC,GAA3BE,KAAKC,IAAY,IAANX,EAAGQ,IAAU,GACxGX,GAAK,EAAGC,IACRN,EAAMS,SAAW,KAASzB,EAGlCS,EAASgB,QAAQG,WAAWC,MAAMC,aAAc,EAChDrB,EAASgB,QAAQG,WAAWG,SAASD,aAAc,KAGnD,2BAAYvB,EACR,oCAAgB6B,IAAK3B,EAAU4B,OAAO,aACtC,oCAAgBD,IAAKzB,EAAU0B,OAAO,WAAWC,KAAM,CAAC,CAAC1B,WAAS2B,aA9D5D,yPA8DyEC,eArDvE,gKA0DdC,EAAQ,SAAC,GAAgB,IAAZlC,EAAW,oBAC1B,OACI,0CAAUA,EAAV,CAAiBmC,eAAa,IAC1B,mCAAeL,OAAO,WAAWC,KAAM,CAAC,IAAM,IAAM,EAAG,KACvD,yCAAqBD,OAAO,WAAWjC,MAAM,UAAUuC,aAAW,EAACC,QAAS,OAU3EC,EAAe,SAAC,GAAD,QACxBd,gBADwB,MACf,CAAC,GAAI,GAAI,GADM,MAExBe,gBAFwB,MAEf,CAAC,EAAG,EAAG,GAFQ,MAGxBjB,aAHwB,MAGlB,CAAC,GAAI,GAAI,IAHS,EAIrBtB,EAJqB,sDAMxB,oCACI,kBAAC,EAAD,iBAAYA,EAAW,CAACwB,WAASe,WAASjB,WAC1C,kBAAC,EAAD,CAAQiB,SAAU,EAAE,GAAIZ,KAAKa,GAAI,EAAG,GAAIhB,SAAU,CAAC,GAAI,GAAI,OCjFtDiB,EAAc,SAAC,GAGrB,IAAD,QAFFC,eAEE,MAFM,SAEN,MAFgBC,eAEhB,MAFwB,SAExB,MAFkCC,iBAElC,MAF4C,SAE5C,MAFsDC,YAEtD,MAF2D,GAE3D,MADF/C,YACE,aADUC,YACV,MADe,EACf,MADkB+C,aAClB,MADwB,EACxB,MAD2BC,gBAC3B,OADqC,EACrC,EADwCC,EACxC,EADwCA,SAAahD,EACrD,oGACIiD,EAASC,cACTrD,EAAQG,EAAMH,OAASC,EAAM,OAAQ,OACrCqD,EAAUN,EAAM,KAAM,kBAAM3D,OAAOkE,KAAKP,IAC9C,OACI,kBAAC,IAAD,iBAAU7C,EAAkB,CAACH,QAAO6C,UAASC,UAASC,YAAWG,WAAUI,WAA3E,CACIE,OAAQJ,EAAQK,cAAeR,EAAOS,SAAUxD,EAAK,EAAGyD,WAAYzD,EAAK,IACtD,kBAAXiD,EAAqBA,GAAU,UAACA,SAAD,mBAAmBhD,aAAnB,eAA0BgD,WAAU,GAC3E,iD,gBCnBCS,EAAY,SAAC,GAGnB,IAAD,IAFFC,UAEE,MAFC,GAED,MAFIC,WAEJ,MAFQ,GAER,MAFW7D,YAEX,aAFsB8D,YAEtB,aAFgC7D,YAEhC,MAFqC,EAErC,EADFiD,GACE,EAFuCa,OAEvC,EADFb,UACE,IADOc,iBACP,MADiB,GACjB,EADuB9D,EACvB,mFACmB+D,qBAAU,iBAAO,CAACC,IAAI,CAAC,EAAE,EAAE,OAD9C,mBACMA,EADN,KACMA,IAAMC,EADZ,KAEIC,EAAOC,aAAQ,gCAAEC,KAAF,GAAQC,EAAR,KAAWC,EAAX,KAAeC,EAAf,EAAeA,KAAf,OAAyBN,EAAI,CAACD,IAAI,CAACK,EAAGC,EAAGC,EAAK,EAAE,QAC/D1E,EAAQS,mBAAQ,kBAAIN,EAAMH,OAAO+D,EACjC9D,EAAK,UAAU,OACf,YAAU,CAACE,EAAMH,MAAM+D,EAAK9D,IAC5BG,EAAQK,mBAAa,8BAAC,yBACxBkE,QAAQ,MAAMC,IAAI,EAAEC,MAAM,EAAE9B,UAAU,SAAS+B,WAAW,QACtDf,EAAK,CAACgB,aAAkB,GAAL7E,EAAQ8E,WAAW,WAAW,IAClD7E,EAAMC,OAHc,IAGRJ,QAAMiF,OAAY,GAAL/E,EAAQgF,MAAW,GAALhF,EAAQwD,SAAc,GAALxD,MAC3D,CAACA,EAAK6D,EAAK/D,EAAMG,EAAMC,QAC3B,OAAO,kBAAC,WAAE+E,IAAH,eAAO/E,MAAK,aACPN,EAAIqE,EAAIiB,aAAY,SAACtF,EAAEC,EAAEsF,GAAL,OAAWvF,EAAEI,EAAK,GAAGH,EAAEsF,KAC3CtF,EAAIoE,EAAIiB,aAAY,SAACtF,EAAEC,EAAEsF,GAAL,OAAWtF,EAAEG,EAAK,GAAGJ,EAAEuF,KAC3CC,OAASnB,EAAIiB,aAAY,SAACtF,EAAEC,EAAEsF,GAAL,MAAW,CAAC,eAAD,OACjB,GAAIvF,EADa,iBAEjB,GAAIC,EAFa,iBAGjB,EAAEsF,EAAE,EAHa,6BAIjB,GAAIA,EAAE,GAJW,OAKlCE,KAAK,QACPC,UAAYrB,EAAIiB,aAAY,SAACtF,EAAEC,EAAEsF,GAAL,MAAW,CAAC,eAAD,OACf,GAALnF,EADoB,0BAEvBH,EAFuB,0BAGxBD,EAHwB,wBAI1B,EAAEuF,EAAE,GAJsB,MAKrCE,KAAK,SACRnF,IACA,CAAC+C,WAASc,UAAUA,EAAUJ,EAAV,kBACPA,GAAMC,EAAG,kBACTA,GAAO,IACpBO,IAAYlE,KCrBrBsF,EAAgB,CAACC,mBAAoB,EAAEC,0BAA2B,KAClEC,EACI,CAACjB,QAAQ,kBAAkBhD,SAAS,WAAWkE,SAAS,SACvDC,cAAc,SAASC,WAAW,SAASC,aAAa,YAF7DJ,EAGI,CAACE,cAAc,SAASZ,MAAM,MAAMD,OAAO,MAAMgB,OAAO,UAAUC,YAAY,IAHlFN,EAII,CAACE,cAAc,SAASpC,SAAS,QAAQyC,WAAW,YAAYC,cAAc,aAJlFR,EAKI,CAACE,cAAc,SAASO,QAAQ,gBALpCT,EAMG,CAACU,WAAW,6BAA6BC,WAAW,GAEvDC,EACI,gbADJA,EAEK,wRAFLA,EAGI,qaAHJA,EAIG,0mBAGIC,EAAoB,CAC7BC,aAAc,SAAAvG,GAAK,OAAI,yCAASA,EAAT,CAAgBwG,QAAQ,mBAAiB,2BAAG,0BAAMC,EAAGJ,OAC5EK,aAAc,SAAA1G,GAAK,OAAI,yCAASA,EAAT,CAAgBwG,QAAQ,mBAAiB,2BAAG,0BAAMC,EAAGJ,OAC5EM,YAAc,SAAA3G,GAAK,OAAI,yCAASA,EAAT,CAAgBwG,QAAQ,mBAAiB,2BAAG,0BAAMC,EAAGJ,OAC5EO,KAAc,SAAA5G,GAAK,OAAI,yCAASA,EAAT,CAAgBwG,QAAQ,mBAAiB,2BAAG,0BAAMC,EAAGJ,QAMnEQ,EAA2B,SAAC,GAElC,IADHC,EACE,EADFA,QAAQC,EACN,EADMA,KAAK9C,EACX,EADWA,IACX,IADe+C,YACf,aAD0BC,YAC1B,MAD+B,QAC/B,MADuC5E,eACvC,MAD+C,EAC/C,MADiDvC,YACjD,SACI2D,EAAQnD,mBAAQ,kBAAMgG,EAAS,GAAD,OAAIW,EAAJ,cAAoB,CAACA,IACnDpH,EAAQS,mBAAQ,kBAAMR,EAAM,UAAW,YAAW,CAACA,IACnDoH,EAAYC,uBAAY,kBAAMlD,GAAKA,GAAI,SAACmD,GAAD,mBAAC,eAAeA,GAAhB,IAA0BC,WAAU,SAAU,CAACpD,IACtFqD,EAAYH,uBAAY,kBAAMlD,GAAKA,GAAI,SAACmD,GAAD,MAAY,CAAChE,MAAMgE,EAAEhE,KAAKiE,WAAU,QAAU,CAACpD,IAC5F,OAAQ6C,EACJ,oCACI,kBAACrD,EAAD,CAAMxD,MAAK,2BAAMwF,GAAN,IAAmBpD,UAASxC,UAAQsD,QAASmE,IACxD,0BAAMrH,MAAK,2BAAMwF,GAAN,IAAmBM,YAAYgB,EAAK,GAAG,EAAElH,WAASkH,GAC3DC,GACF,kBAACV,EAASM,KAAV,CAAe3G,MAAK,2BAAMwF,GAAN,IAAmB5F,UAAQsD,QAAS+D,IACxD,0BAAMjH,MAAK,2BAAMwF,GAAN,IAAkB5F,WAASiH,IAN5B,MAcTS,EAAc,SAAdA,EAAe,GAIpB,IAAD,IAHHnE,YAGG,aAHQoE,eAGR,aAHsBH,iBAGtB,aAFHI,aAEG,MAFG,EAEH,MAFMC,YAEN,MAFW,EAEX,MAFcC,oBAEd,MAF2BrC,EAE3B,MADHxF,YACG,aADSC,YACT,MADc,EACd,MADiBE,aACjB,MADuB,GACvB,MAD2B2H,gBAC3B,MADoC,GACpC,EAD2C5H,EAC3C,+GACkB6H,mBAAiC,CAACzE,OAAKoE,UAAQH,cADjE,mBACIS,EADJ,KACW7D,EADX,KAEG8D,EAAShE,oBAAU,CACrBsD,UAAWS,EAAMT,UACjBW,OAAO,2BAAKA,SAAOC,SAAWN,GAC9BO,KAAM,CAACpD,OAAQ,EAAGzC,QAAS,EAAGgD,UAAW,yBACzC8C,GAAI,CAAGrD,OAAQgD,EAAM1E,KAAO,OAAS,EAC/Bf,QAASyF,EAAM1E,KAAO,EAAS,EACjCiC,UAAWyC,EAAM1E,KAAO,uBAAyB,2BAEnDJ,EAAW1C,mBAAQ,kBAAM8H,WAASC,IAAIrI,EAAMgD,UAAU,SAAAsF,GAAU,IAAD,IAC3DC,EAAQH,WAASI,QAAT,UAAkBF,SAAlB,iBAAiB,EAAgBtI,aAAjC,aAAiB,EAAuBgD,WAAa,GACnE,OAAOhD,EAAMgD,UACT,kBAACuE,EAAD,2BAAevH,GAAf,IACIF,OAAMC,OAAME,QAAOwH,MAAMA,EAAM,EAAGG,SAAS,GAC3CxE,KAAMqE,EAAMC,EAAM1E,SAAUuF,EAAME,OAAO,EAAIF,EAAMG,MAAM,GAAK,KAC9DrB,WAAW,EAAOP,QAAUyB,EAAME,OAAO,EAAIF,EAAM,GAAKD,UAChE,CAACtI,EAAOyH,EAAOC,EAAM5H,EAAMC,EAAME,IAC/BgH,EAAO3G,mBAAQ,kBAAM0C,aAAoB2F,OAAS3F,EAASyF,OAAS,EACnEX,EAAM1E,KAAO,QAAU,OACxB,UAAS,CAACJ,EAAU8E,EAAM1E,OAEhC,OADA1C,qBAAU,WAAYuD,GAAI,SAAAmD,GAAC,OAAII,IAAUJ,EAAEI,QAAZ,2BAAwBJ,GAAxB,IAA2BI,YAASJ,OAAK,CAACI,IAErE,kBAAC,WAAExC,IAAH,CAAO/E,MAAK,uCAAMwF,GAAN,IAAmBlC,SAAc,GAALxD,EAAS6I,QAAQnB,GAAUxH,GAAU2H,IACzE,kBAAC,EAAD,2BAAqB5H,GAArB,IAA4BiH,OAAMhD,MAAK5B,SAAgB,OAARW,QAAQ,IAARA,OAAA,EAAAA,EAAUyF,QAAO,EAAE,GAAI3I,OAAMC,UAC5E,kBAAC,WAAEiF,IAAH,CAAO/E,MAAK,uCACJwH,EAAM,EAAE,CAACoB,WAAW,eAAD,OAAgB/I,EAAK,OAAO,SAAU,IAC1D2F,GAFK,IAEOjB,QAAQ,eAAD,OAAqB,GAALzE,EAAhB,OACnBgI,IAAY/E,KC1FzByC,EACI,CAACjE,SAAS,QAAQiD,IAAI,EAAEqE,KAAK,EAAEhE,OAAO,OAAO8D,OAAO,GADxDnD,EAEI,CAACjE,SAAS,QAAQiD,IAAI,KAAKqE,KAAK,EAAEF,OAAO,EAAEG,UAAU,SAASjE,OAAO,OAFzEW,EAGI,CAACjE,SAAS,WAAW6D,UAAU,wBAHnCI,EAII,CAACjB,QAAQ,sBAAsB3E,MAAM,UAAUqG,QAAQ,SAEpD8C,EAAuB,SAAC,GAAD,IAAEjB,EAAF,EAAEA,OAAQ7D,EAAV,EAAUA,KAAV,IAAgBnE,YAAhB,MAAqB,EAArB,SAChC,kBAAC,WAAEiF,IAAH,eAAO/E,MAAK,2BAAMwF,GAAN,IACRV,MAAYgD,EAAOpI,EAAEwI,IAAG,SAACxI,GAAD,OAAYA,EAAE,EAAE,OAAJ,UAAmB,GAALI,EAAQ,EAAtB,SACpC8E,WAAYkD,EAAOzG,MAAM6G,IAAG,SAACjD,GACzB,IAAM+D,EAAQlB,EAAOpI,EAAEuJ,UAAUf,GAAGjJ,OAAOiK,WAC3C,MAAM,oCAAN,OAA2CF,EAAK/D,EAAE,EAAlD,0BACGhB,OAEFkF,EAA6B,SAAC,GAAD,QAAErJ,YAAF,MAAO,EAAP,EAAUgI,EAAV,EAAUA,OAAQ/E,EAAlB,EAAkBA,SAAlB,OACtC,kBAAC,WAAEgC,IAAH,CAAO/E,MAAK,2BAAMwF,GAAN,IACRV,MAAMgD,EAAOpI,EAAEsF,aAAY,SAACtF,GAAD,OAAYA,EAAE,EAAEA,EAAE,KAC7CiF,aAAa,OAAD,OAAQ,GAAG7E,EAAX,cAAqB,GAAGA,EAAxB,UACZsJ,gBAAgB,aAChB,yBAAKpJ,MAAO,CAACqJ,OAAO,GAAD,OAAI,GAAGvJ,EAAP,kBAA6ByB,SAAS,aAAcwB,KAGlEuG,EAAwB,SAAC,GAAD,IAAExB,EAAF,EAAEA,OAAQ7D,EAAV,EAAUA,KAAV,IAAgBN,YAAhB,aAA4B7D,YAA5B,MAAiC,EAAjC,SACjC,kBAAC,WAAEiF,IAAH,iBAAWd,IAAX,CAAmBjE,MAAK,uCAAMwF,GAAesC,GAArB,IAA4BtD,IAAS,GAAL1E,EAAQ+I,KAAU,GAAL/I,MACjE,kBAAC,EAAD,eAAM2D,GAAG,cAAiB,CAACE,OAAK7D,YAG3ByJ,EAAuB,SAAC,GAAD,IAAExG,EAAF,EAAEA,SAAF,IAAYjD,YAAZ,MAAiB,EAAjB,SAChC,kBAAC,WAAEiF,IAAH,CAAO/E,MAAK,2BAAMwF,GAAN,IAAkBgE,WAAW,QAAQlG,SAAS,GAAGxD,IACzDoD,QAAS,SAACuG,GAAD,OAASA,EAAEC,oBAAoB3G,IAGnC4G,EAAc,WAAkF,IAAD,yDAAP,GAAxE5G,EAA+E,EAA/EA,SAA+E,IAArE+B,aAAqE,MAA/D7F,OAAOiK,WAAW,EAA6C,OAA3CrJ,KAA2C,EAAhCC,aAAgC,MAA3B,EAA2B,MAAxB8D,cAAwB,MAAjB,kBAAI,MAAa,EAClGgG,EAAS1J,kBAAgB,GACzB2J,EAAY3C,uBAAY,eAAC4C,IAAD,gEAAmBF,EAAO3I,QAAQ6I,EAAOlG,GAAQA,MAAW,CAACA,IAFa,EAGlFE,qBAAW,iBAAO,CAACpE,EAAE,EAAEC,EAAE,EAAE0B,MAAM,MAHiD,mBAGjGyG,EAHiG,KAGzF9D,EAHyF,KAIlGb,EAAM,eAAC4G,EAAD,uDAAG,EAAH,OAAWF,GAAU,GAAM7F,EAAI,CAACtE,EAAEoF,EAAMnF,EAAE,EAAEoI,OAAW,IAAJgC,EAAMhC,SAAOiC,OAAOjC,SAAOkC,QACpFC,EAAM,eAACH,EAAD,uDAAG,EAAH,OAAWF,GAAU,GAAO7F,EAAI,CAACtE,EAAE,EAAMC,EAAE,EAAEoI,OAAO,2BAAIA,SAAOoC,OAAZ,IAAkBC,SAASL,OACpF9F,EAAOoG,YAAW,CACpBC,QAAU,gBAAEC,EAAF,EAAEA,SAAF,OAAgBvG,EAAI,CAAC3C,MAAMkJ,EAAS,IAAI,KAClDC,OAAS,YAAqD,IAAnDlG,EAAkD,EAAlDA,KAAKmG,EAA6C,EAA7CA,KAAWrG,EAAkC,cAAxCD,KAAwC,sBAA7BuG,SAA6B,GAAnBC,EAAmB,KAAhBC,EAAgB,KAAZC,EAAY,EAAZA,OAE7C,OADKD,EAAU,IAAN9F,GAAgB,GAANA,EAAS8F,IAAOC,GAAQA,IACtCvG,EACDsF,EAAO3I,QACP2I,EAAO3I,QAAsB,IAAL0J,GAAQA,EAAU,IAAN7F,GAAWV,GAAI,GAAO8F,EAAM9F,GAAKjB,EAAKiB,QAA9E,EADiC,IAALuG,GAAQA,EAAU,GAAN7F,GAAWV,EAAI,GAAOjB,EAAKiB,GAAM8F,EAAM9F,GAD7DJ,EAAI,CAACtE,GAAGkK,EAAO3I,QAAQ6D,EAAM,IAAI2F,EAAKE,EAAG,GAAGhL,EAAE8K,EAAKG,EAAG,OAKhF,OACI,yBAAK5K,MAAO,CAACuB,SAAS,QAASiD,IAAI,EAAEqE,KAAK,EAAEF,OAAO,MAC/C,kBAAC,EAAgB,CAAC7I,OAAMgI,SAAQ7D,SAChC,kBAAC,EAAkB,CAACnE,OAAMgI,SAAQ7D,SAClC,kBAAC,EAAkB,CAACnE,OAAMgI,SAAQ7D,QAClC,kBAAC,EAAU,CAACpE,MAAK,EAAKC,QACjBgL,IAAM3C,SAASC,IAAIrF,GAAW,SAACsF,EAAO0C,GAAR,OAC3B,kBAAC,EAAc,CAACjL,OAAMiL,OAAO1C,UCtD3C7C,EACI,CAACjE,SAAS,QAAQiD,IAAI,EAAEC,MAAM,EAAEkE,OAAO,KAD3CnD,EAEI,CAACjE,SAAS,QAAQiD,IAAI,EAAEC,MAAM,EAAEI,OAAO,QAF3CW,EAGI,CAACjE,SAAS,QAAQsD,OAAO,MAAML,IAAI,KAAKC,MAAM,EAAEqE,UAAU,UAH9DtD,EAII,CAACjE,SAAS,WAAWkD,MAAM,EAAEW,UAAU,wBAJ3CI,GAKI,CAAC4D,gBAAgB,UAAUxJ,MAAM,UAAWqG,QAAQ,gBAEjD+E,GAAuB,SAAC,GAAD,QAAElL,YAAF,MAAO,EAAP,EAAUgI,EAAV,EAAUA,OAAV,OAChC,kBAAC,WAAE/C,IAAH,CAAO/E,MAAK,aACR8E,MAAOgD,EAAOmD,EAAEjG,aAAY,SAACiG,GAAD,gBACxB,GAAGnL,GAAO4B,KAAKwJ,IAAID,EAAE,GAAGvJ,KAAKa,IAAI,KADT,SAG5BqC,WAAYkD,EAAOzG,MAAM2D,aAAY,SAACC,GAAD,MAAY,CAAC,wBAAD,qCAG/BA,EAAE,EAH6B,OAI/CE,KAAK,SACJK,MAGE2F,GAAwB,SAAC,GAAD,QAAErL,YAAF,MAAO,EAAP,EAAUgI,EAAV,EAAUA,OAAV,IAAkBnE,YAAlB,gBACjC,kBAAC,WAAEoB,IAAH,CAAO/E,MAAK,2BAAMwF,GAAN,IAAmBhB,IAAI,GAAG1E,EAAMsL,QAAQtD,EAAOmD,KACvD,kBAAC,EAAD,eAAMxH,GAAG,iBAAoB,CAACE,OAAK7D,YAG9BuL,GAA6B,SAAC,GAAD,IAAEtI,EAAF,EAAEA,SAAF,IAAYjD,YAAZ,MAAiB,EAAjB,EAAoBgI,EAApB,EAAoBA,OAApB,OACtC,kBAAC,WAAE/C,IAAH,CAAO/E,MAAK,2BAAMwF,GAAN,IACRV,MAAMgD,EAAOmD,EAAEjG,aAAY,eAACiG,EAAD,uDAAG,EAAH,gBAAa,GAAGnL,GAAM4B,KAAKwJ,IAAID,EAAE,GAAGvJ,KAAKa,IAAI,GAA7C,YAC3B,yBAAKvC,MAAO,CAACqJ,OAAO,QAAD,OAAS,GAAGvJ,EAAK,EAAjB,0BAA4CiD,KAG1DuI,GAAuB,SAAC,GAAD,IAAEvI,EAAF,EAAEA,SAAF,IAAYjD,YAAZ,MAAiB,EAAjB,SAChC,kBAAC,WAAEiF,IAAH,CAAO/E,MAAK,2BAAMwF,IAAN,IACR6D,OAAO,GAAD,OAAI,GAAGvJ,EAAK,EAAZ,UACN6E,aAAa,GAAD,OAAI,GAAG7E,EAAP,uBAA0B,GAAGA,EAA7B,SACZ,yBAAKoD,QAAS,SAAAuG,GAAC,cAAEA,QAAF,IAAEA,OAAF,EAAEA,EAAGC,mBAAmB1J,MAAO,CAC1C6E,OAAO,GAAG/E,EAAMuJ,OAAO,QAAD,OAAS,GAAGvJ,EAAK,EAAjB,MACtBwD,SAAS,GAAGxD,EAAM6I,OAAO,EAAG1C,QAAQ,OAAQsF,WAAW,WACvDxI,KAGCyI,GAAoB,WAA6C,IAAD,yDAAP,GAAnCzI,EAA0C,EAA1CA,SAA0C,IAAhCjD,YAAgC,MAA3B,EAA2B,MAAxB8D,cAAwB,MAAjB,kBAAI,MAAa,EACnEgG,EAAS1J,kBAAgB,GACzB2J,EAAY3C,uBAAY,SAAC4C,GAAD,OAAsBF,EAAO3I,QAAQ6I,EAAOlG,GAAQA,MAAW,CAACA,IAFrB,EAGnDE,qBAA2B,iBAAO,CAACpE,EAAE,EAAGC,EAAE,EAAGsL,EAAE,GAAI5J,MAAM,MAHN,mBAGlEyG,EAHkE,KAG1D9D,EAH0D,KAInEyH,EAAO,WAAiB,IAAhBrB,EAAe,uDAAN,EACbsB,KAAU5D,EAAOmD,EAAEhC,UAAUf,GAAG,IAChCyD,GAAS/B,EAAO3I,QAAQ,EAAE,KAAQyK,EAAI,EAAU,EAAE,EACxD,OAAO,IAAOA,EAAMC,GAAQvB,EAAS,GAAG,EAAE,KAExCjH,EAAO,eAAC4G,EAAD,uDAAG,EAAH,OAAWF,GAAU,GAAO7F,EAAI,CAACiH,EAAEQ,EAAK1B,GAAGhC,OAAW,IAAJgC,EAAMhC,SAAOiC,OAAOjC,SAAOkC,QACpFC,EAAO,eAACH,EAAD,uDAAG,EAAH,OAAWF,GAAU,GAAO7F,EAAI,CAACiH,EAAEQ,EAAK1B,GAAGhC,OAAO,eAAIA,SAAOoC,UACpEyB,EAAO,SAAC,GAAuC,IAAD,IAArCjB,UAAqC,MAAlC,EAAkC,MAAhCvG,UAAgC,MAA7B,EAA6B,MAA3BqG,YAA2B,aAAhBnG,KAChC,YADgD,SAE5CsF,EAAO3I,QACP2I,EAAO3I,QAAsB,IAAL0J,GAAQA,EAAS,KAAL7K,GAAUsE,GAAI,IAAK,GAAIA,EAAM8F,GAAO9F,GAAOjB,GAAMiB,QAAzF,EADiC,IAALuG,GAAQA,EAAS,KAAL7K,GAAUsE,GAAI,GAAQjB,GAAMiB,GAAM8F,GAAO9F,GAD/DJ,EAAI,CAACiH,EAAEnD,EAAOmD,EAAEhC,UAAUf,IAAIuC,EAAK,GAAIE,EAAI7K,EAAK,IAAI,MAIpEmE,EAAOoG,YAAW,CACpBC,QAAS,gBAAEC,EAAF,EAAEA,SAAF,OAAgBvG,EAAI,CAAC3C,MAAMkJ,EAAS,IAAI,KACjDsB,QAAS,gBAAEvH,EAAF,EAAEA,KAAKmG,EAAP,EAAOA,KAAP,gBAAYqB,OAAZ,GAAuBC,GAAvB,kBAAgCH,EAAO,CAACnB,OAAKnG,OAAKF,GAAG,EAAEuG,GAAGoB,KACnEvB,OAAS,gBAAElG,EAAF,EAAEA,KAAKmG,EAAP,EAAOA,KAAWrG,EAAlB,cAAYD,KAAZ,MAAiCwG,EAAjC,cAAuBD,SAAvB,aAA4CkB,EAAO,CAACnB,OAAKnG,OAAKF,KAAGuG,GAAGA,OAEjF,OACI,kBAAC,WAAE5F,IAAH,iBAAWd,IAAX,CAAmBjE,MAAK,eAAMwF,KAC1B,kBAAC,GAAmB,CAAC1F,OAAMgI,WAC3B,kBAAC,GAAmB,CAAChI,OAAMgI,WAC3B,kBAAC,GAAmB,CAAChI,OAAMgI,UAC1BgD,IAAM3C,SAASC,IAAIrF,GAAW,SAACsF,EAAO0C,GAAR,OAC3B,kBAAC,GAAc,CAACjL,OAAkBiL,OAAQ1C,SC/DpD7C,GAA8C,CAChDwG,OAAO,CAACzK,SAAU,WAAWiD,IAAK,EAAEqE,KAAM,EAAE/D,MAAO,QAAQD,OAAQ,QAAQY,SAAU,QACrFwG,KAAM,CAAChG,QAAQ,OAAQiG,eAAgB,iBAIrCrE,GAAQ,CACVrD,IAAK,GAET,SAAS2H,GAAT,GAAuC,IAAtBC,EAAqB,EAArBA,cACPC,EAAM,IAAI9L,UACV+L,EAAQpM,mBACPJ,EAAQyM,cAARzM,KACD0M,EAASC,YAAU,QAAS3M,EAAKgF,MAAOhF,EAAK+E,OAAQ,GACrD6H,EAAWxF,uBAAY,SAACyF,GAAD,IAAGC,EAAH,uDAAK,EAAL,OAAWR,EAAcQ,EAAEJ,EAAO,MAAI,CAACJ,EAAeI,IAEnF,OADArL,aAAS,oCAAMmL,EAAMrL,eAAZ,iBAAM,EAAeM,gBAArB,aAAM,EAAyBsL,KAAKR,EAAIrI,IAAI,EAAG6D,GAAMrD,IAAI,IAAK,GAAI,OAEvE,2BAAO5C,IAAK0K,GACR,kBAAC,EAAD,CAAO/K,SAAU,CAAC,GAAG,GAAG,IAAKzB,KAAM,GAAID,MAAM,IAC7C,kBAAC,IAAD,eAAMiN,IAAI,SAAShN,KAAI,sBAAM0M,GAAN,CAAc,KAAe,CAACE,WAAS5H,MAf3D,OAeiED,OAdjE,SAeC,kBAAC,IAAD,CAAKkI,aAAc,GAAG,kBAAC,EAAD,CAAOlN,MAAI,GAAX,YACtB,kBAAC,IAAD,eAAKiN,IAAI,UAAa,CAAChI,MAjBxB,OAiB+BD,OAhB/B,SAiBK,kBAAC,IAAQ,CAACC,MAlBf,OAkBsBD,OAjBtB,QAkBS,kBAAC,IAAD,CAAMmI,QAAM,EAAChN,MAAK,aAAG8E,MAAM,OAAQD,OAlB5C,QAkBuDW,GAAOyG,OACjD,kBAAC,EAAD,CAAMvI,IAAI,UAAaR,QAAS,kBAAIjE,OAAOkE,KAAK,iCAChD,kBAAC,EAAD,CAAMO,IAAI,SAAaR,QAAS,kBAAIjE,OAAOkE,KAAK,gCAChD,kBAAC,EAAD,CAAMO,IAAI,aAAaR,QAAS,kBAAIjE,OAAOkE,KAAK,uCASrE,SAAS8J,KACZ,IADmB,EAEKrF,mBAAS,GAFd,mBAEZsF,EAFY,KAENC,EAFM,OAGKC,YAAgB,CAACC,KAAK,EAAGC,GAAG,EAAGC,GAAG,IAHvC,mBAGZ1N,EAHY,KAGN2N,EAHM,OAIKJ,YAAgB,CAACC,KAAK,EAAGC,GAAG,EAAGC,GAAG,MAJvC,mBAIZzN,EAJY,KAIN2N,EAJM,KAKnB,OACI,6BACI,kBAAC,IAAD,CAAQC,iBAAe,EAACC,WAAS,EAC7BC,GAAI,CAAEC,OAAO,GACbC,OAAQ,CAACvM,SAAS,CAAC,EAAE,EAAE,GAAIwM,KAAK,GAChC/N,MAAO,CAACuB,SAAS,WAAYuD,MAAM,QAASD,OAAO,UACnD,gCAAYtD,SAAU,CAAC,EAAE,EAAE,GAAIyM,UAAW,KAC1C,kCAAcA,UAAW,KACzB,+BAAWC,YAAU,EAAC1M,SAAU,CAAC,EAAE,EAAE,GAAI2M,SAAU,IACnD,kBAAC,WAAD,CAAUC,SAAU,kBAAC,IAAD,CAAMnB,QAAM,GAAZ,cAChB,kBAACb,GAAD,CAAMC,cAAee,MAG7B,yBAAKiB,SAjBI,SAAC3E,GAAD,OAAY5B,GAAMrD,IAAMiF,EAAE4E,OAAOC,WAiBjBtO,MAAOwF,GAAOwG,QACnC,yBAAKhM,MAAO,CAAE6E,OAAO,GAAD,OAAY,IAAPqI,EAAL,UAExB,kBAAC,EAAU,CAACpN,QACR,uBAAGE,MAAO,CAACJ,MAAM,WAAYgD,KAAK,KAAlC,QACA,uBAAG5C,MAAO,CAACJ,MAAM,WAAYgD,KAAK,SAAlC,QACA,uBAAG5C,MAAO,CAACJ,MAAM,WAAYgD,KAAK,SAAlC,SAEJ,kBAAC,GAAU,CAAC9C,QACR,yBAAKoD,QAAS,kBAAIsK,GAAQ,SAACrG,GAAD,MAAU,CAACmG,GAAGnG,EAAEoG,GAAGA,GAAGpG,EAAEmG,SAAQzN,EAAK,eAAK,gBACpE,yBAAKqD,QAAS,kBAAIuK,GAAQ,SAACtG,GAAD,MAAU,CAACmG,GAAGnG,EAAEoG,GAAGA,GAAGpG,EAAEmG,SAAQxN,EAAK,GAAG,eAAK,kB,+DC5D1EyO,GAAY,SAAC,GAGnB,IAFHxL,EAEE,EAFFA,SAEE,IAFQjD,YAER,MAFa,EAEb,MAFgBkJ,YAEhB,MAFqB,EAErB,MAFwBnG,aAExB,MAF8B,EAE9B,MAFiC7C,aAEjC,MAFuC,GAEvC,MADFH,YACE,aADUD,aACV,MADgB,GAChB,MADmB4O,WACnB,MADuB,EACvB,MAD0BC,WAC1B,MAD8B,EAC9B,EADoC1O,EACpC,uFACmB+D,qBAAU,iBAAK,CAAC4K,IAAI,CAAC,EAAE,EAAE,OAD5C,mBACMA,EADN,KACMA,IAAM1K,EADZ,KAEI2K,EAAYtO,mBAAa,WAC3B,IAAMuO,EAAYH,GAAU,IAAL3O,EACjB+O,EAAYL,GAAK,KACvB,OAAO,qCAACnF,OAAO,GAAD,OAAIxG,EAAJ,mBAAoBA,EAApB,WAAoC0B,QAAQ,EAAEhD,SAAS,WAC7DuD,MAAM,WAAD,OAAiB,IAALhF,EAAZ,OAA0B6E,aAAkB,GAAL7E,EAAQ2F,SAAS,UAC7DmJ,GAAW,CAACA,cAFpB,IAEgChK,WAAa/E,EAAK,UAAU,QACpDgP,GAAW,CAACA,cAHpB,IAGgCjP,MAAMA,GAAOC,EAAK,UAAU,WAC7D,CAACC,EAAM+C,EAAOjD,EAAOC,EAAM2O,EAAKC,IAC7BK,EAAO5H,uBAAY,SAACxH,EAAGC,GAAJ,MAAQ,EAC7BD,EAAIT,OAAOiK,WAAc,GAAKpJ,EAAO,KACrCH,EAAIV,OAAO8P,YAAc,GAAKjP,EAAO,IACrCkJ,KAAO,CAAClJ,EAAMkJ,IACZ/E,EAAOoG,YAAW,CACpBG,OAAS,gBAAEwE,EAAF,EAAEA,MAAF,cAAgBA,QAAhB,IAAgBA,OAAhB,EAAgBA,EAAOtF,mBAChCY,QAAS,qBAAEC,UAA2BvG,EAAI,CAAC0K,IAAI,CAAC,EAAE,EAAE,MACpDO,OAAS,gCAAEC,GAAF,GAAMxP,EAAN,KAAQC,EAAR,YAAgBqE,EAAI,CAAC0K,IAAII,EAAKpP,EAAEC,QAE7C,OAAO,kBAAC,WAAEoF,IAAH,eAAO/E,MAAK,yBACXmP,UAAUT,EAAI1J,aAAY,SAACtF,EAAEC,EAAEyP,GAAL,MAAW,CAAC,GAAD,OAC9B,GAAM,EAAF1P,EAD0B,iBAE9B,IAAM,EAAFC,EAF0B,iBAG9B,IAAMyP,EAHwB,iBAI9BA,EAAI,GAJ0B,mCAKZ,GAAK,EAAFA,EALS,OAKAjK,KAAK,QAC1CC,UAAUsJ,EAAI1J,aAAY,SAACtF,EAAEC,EAAEyP,GAAL,MAAW,CAAC,eAAD,OACb,GAALtP,EADkB,0BAErBH,EAAE,GAFmB,0BAGrBD,EAAE,GAHmB,wBAIxB,EAAE0P,EAAE,GAJoB,MAIXjK,KAAK,QAC/BwD,OAAO+F,EAAI1J,aAAY,SAACtF,EAAEC,EAAEyP,GAAL,OAAW1P,EAAEC,EAAEyP,EAAE,EAAI,EAAI,MAC7CT,GAAc3O,IACdiE,IAdJ,2BAeQlE,GAfR,IAecgD,gBC7CnB/C,GAAY,CAAC2C,UAAU,SAAU+C,cAAc,SAAUnB,QAAQ,YAAajB,SAAS,KACvF+L,GAAS,CAAC,QAAQ,SACXC,GAAc,WACvB,IAAMzP,EAAQ0P,YAAI,OAAS,CAACzI,KAAM,UAAWxG,OAAO,IAC9CR,EAAQyP,YAAI,OAAS,CAACzI,KAAM,SAAWxG,MAAO,EAAGmO,IAAK,EAAGD,IAAK,IAC9D3L,EAAQ0M,YAAI,QAAS,CAACzI,KAAM,SAAWxG,MAAO,EAAGmO,IAAK,EAAGD,IAAK,MAC9DxF,EAAQuG,YAAI,OAAS,CAACzI,KAAM,SAAWxG,MAAO,EAAGmO,KAAK,EAAGD,IAAK,IAC9DC,EAAQc,YAAI,MAAS,CAACzI,KAAM,SAAWxG,MAAO,EAAGmO,IAAK,EAAGD,IAAK,MAC9DA,EAAQe,YAAI,MAAS,CAACzI,KAAM,SAAWxG,MAAO,EAAGmO,IAAK,EAAGD,IAAK,MAC9D5O,EAAW2P,YAAI,QAAY,CAACzI,KAAM,SAAWxG,MAAO+O,GAAO,GAAIG,MAAOH,KACtEtM,EAAWwM,YAAI,WAAY,CAACzI,KAAM,SAAWxG,MAAO+O,GAAO,GAAIG,MAAOH,KAC5E,OACI,kBAAC,GAAD,cAAU,CAACxP,OAAKC,OAAK+C,QAAMmG,OAAKyF,MAAID,MAAIzL,YAAxC,CACI/C,MAAK,2BAAMA,IAAN,IAAYJ,QAAMyJ,OAAO,GAAD,OAAS,IAALvJ,EAAJ,mBAA4B,IAALA,EAAvB,iBAG5B2P,GAAQ,qK,GCpBeC,EAAQ,MAArCC,G,GAAAA,aAAcC,G,GAAAA,YACdC,GAASH,EAAQ,MAAjBG,MAKMC,GAAY,SAAC,GAEnB,IAAD,IADFC,YACE,MADG,GACH,MADOC,gBACP,MADgB,aAChB,MAD8BC,cAC9B,aAD4CpQ,YAC5C,aADwDC,YACxD,MAD6D,EAC7D,MADgEE,aAChE,MADsE,GACtE,EAD6ED,EAC7E,kEACImQ,EAAgBhJ,uBAAY,SAACyF,GAAD,OAASwD,UAAUC,UAAUC,UAAUN,KAAM,CAACA,IAC1EO,EAAcjQ,mBAAQ,WACxB,OAAO,2BAAK4P,EAAO,CAACvK,cAAc,MAAMnB,QAAQ,GAAG,IAAnD,IAAuDA,QAAQ,OAC3D0B,QAAQgK,EAAO,eAAe,QAAS1O,SAAS,WAAY8H,OAAO,MACxE,CAAC4G,IACJ,OAAO,kBAACJ,GAAD,iBAAa9P,EAAb,CAAoBwQ,OAAQN,EAAO,OAAO,MAAUO,iBAAiB,GACxD,CAACF,cAAaJ,gBAAeF,YAD1C,CACoDS,iBAAkBR,EACpEjQ,MAAK,2BAAOH,EAAK+P,GAAYD,IAAxB,IAAsCrM,SAAS,GAAD,OAAIxD,EAAJ,QAAiBE,KAC5D+P,ICbfP,GAAQ,CAAC,aAAc,UACvBkB,GAAQ,CAAC,6nCA8BFC,GAAc,WACvB,IAAM9Q,EAAQ+Q,YAAW,OAAW,CAAC9J,KAAM,UAAWxG,OAAO,IACvD2P,EAAQW,YAAW,SAAW,CAAC9J,KAAM,UAAWxG,OAAO,IACvDR,EAAQ8Q,YAAW,OAAW,CAAC9J,KAAM,SAAWxG,MAAO,EAAGmO,IAAK,EAAGD,IAAK,IACvEuB,EAAWa,YAAW,OAAY,CAAC9J,KAAM,SAAUxG,MAAMoQ,GAAM,KAC/DV,EAAWY,YAAW,WAAY,CAAC9J,KAAM,SAAUxG,MAAMkP,GAAM,GAAIA,WACzE,OACI,kBAAC,GAAS,CAAC3P,OAAKoQ,SAAOnQ,OAAKiQ,OAAKC,cAG5Ba,GAAQ,2OC3CRC,GAAY,SAAC,GAGnB,IAAD,IAFFC,cAEE,MAFK,KAEL,MAFWC,YAEX,MAFgB,SAEhB,MADFlR,YACE,MADG,EACH,MADM+D,iBACN,MADgB,eAChB,EADmC9D,EACnC,oDACIkR,EAAK/Q,mBACL0B,EAAM1B,iBAAO,MACnBO,qBAAU,WAAKwQ,EAAGhQ,QAAU8P,IAAS,CAACA,IACtCG,YAAQtP,GAAK,SAAC6H,GAAD,OACNA,EAAE0H,gBACkB,oBAAbF,EAAGhQ,SACTgQ,EAAGhQ,aACX,IAAMjB,EAAQK,mBAAa,+BACvBkB,SAAS,WAAW0E,QAAQ,OAAOoD,OAAO,GAAD,OAAS,GAALvJ,EAAJ,kBACzCgF,MAAW,IAALhF,EAAS+E,OAAY,IAAL/E,GAAaC,EAAMC,OAAO,MAChD,CAACF,EAAMC,EAAMC,QACjB,OAAO,yCAAUD,EAAW,CAAC6B,MAAIoP,OAAKnN,YAAU7D,YCbvCoR,GAAc,WACvB,IAAMvR,EAAQ+Q,YAAW,OAAS,CAAC9J,KAAM,UAAWxG,OAAO,IACrDR,EAAQ8Q,YAAW,OAAS,CAAC9J,KAAM,SAAWxG,MAAO,EAAGmO,IAAK,EAAGD,IAAK,IAC3E,OACI,kBAAC,GAAS,CAAC3O,OAAMC,UAGZuR,GAAQ,4GCVRC,GAAQ,eAACC,EAAD,uDAAM,GAAN,MAAoB,GAAGA,EAAKC,OAAO,GAAGC,cAAiBF,EAAK9I,MAAM,GAAGiJ,eAC7EC,GAAQ,SAACjS,GAAD,IAAW+O,EAAX,uDAAe,EAAGD,EAAlB,uDAAsB,EAAtB,OAAsC9O,EAAE+O,EAAKA,EAAK/O,EAAE8O,EAAKA,EAAI9O,GACrEkS,GAAQ,SAAClS,GAAD,IAAW+O,EAAX,uDAAe,EAAGD,EAAlB,uDAAsB,EAAtB,OAAqCC,EAAM/O,GAAKA,EAAI8O,GAK5DqD,GAAM,eAACC,EAAD,uDAAK,EAAL,OACVA,EAAM,GAAK,EACXA,EAAM,GAAK,IACL,IAANA,GAAW,GACZ,GACKC,GAAO,SAAgBhG,EAAOiG,EAAUxL,GAAjC,4BACbuF,EAAEtD,MAAM,EAAEuJ,IADG,YAEZA,EAAEjG,EAAEvD,OAAO,EAAGE,MAAMsJ,EAAEjG,EAAEvD,QAAQyJ,KAAKzL,GAAGuF,EAAE,IAAM,MAE3CmG,GAAW,eAACC,EAAD,uDAAG,GAAeH,EAAlB,uDAAoB,EAAEI,EAAtB,uDAAwB,EAAEtN,EAA1B,uDAAgC7F,OAAOiK,WAAvC,OACpBiJ,aAAazJ,OAASyJ,EAAE3J,OAAS,EAC3BuJ,GAAKI,EAAGH,GAAI,GACT5J,KAAI,eAAC2B,EAAD,uDAAG,EAAH,OACGqI,EAAI,IAAMA,GAAK,EAAIA,EAAIA,EAAEtN,IACzBiF,EAAI,IAAMA,GAAK,EAAIA,EAAIA,EAAEjF,IACzBiF,EAAI,IAAM,GACX,KACN3B,KAAI,SAAC2B,EAAE4C,EAAE1H,GAAL,OAAW8E,GAAG,EAAGA,EAAI,EAAI,sBAAI9E,EAAEC,QAAO,SAAA6E,GAAC,OAAEA,EAAE,MAAlB,CAAqB,IAAGsI,QAAO,SAACtG,EAAEuG,GAAH,OAAOvG,EAAEuG,KAAGrN,EAAEC,QAAO,SAAA6E,GAAC,OAAEA,EAAE,KAAGvB,UAC5FE,MAAMsJ,GAAGC,KAAKD,EAAE,EAAE,EAAEA,EAAEA,IAGnBO,GAAgB,sCAAIC,EAAJ,yBAAIA,EAAJ,uBACzBA,EAAKpK,KAAI,SAAAqK,GAAC,MAAe,kBAAJA,EAAc,IAAIC,IAAID,GAAKA,KAC3CrK,KAAI,SAAAqK,GAAC,OAAIA,GAAKE,GAAQF,EAAEG,SAAU,QAClCC,OAAM,SAACJ,EAAG9F,EAAGmG,GAAP,OAAgBL,IAAIK,EAAK,OAE3BC,GAAwB,CACjCC,SAAS,MAEAC,GAAc,CACvBC,GAASjU,OAAOC,SAAS0T,SAASO,MAAM,KAAKjO,QAAO,SAAA6E,GAAC,OAAEA,KAAGqJ,MAAK,SAACzG,EAAE9L,GAAH,OAAW,IAAJA,MAAQ,GAC9EwS,OAASpU,OAAOC,SAAS0T,SAASO,MAAM,KAAKjO,QAAO,SAAA6E,GAAC,OAAEA,KAAGvB,OAAS,EACnE8K,QAAoC,cAA3BrU,OAAOC,SAASC,SACzBoU,SAAStU,OAAOC,SAASqU,UAAW,GACpCpU,SAASF,OAAOC,SAASC,UAAW,GACpCqU,SAASvU,OAAOC,SAASuU,MAAW,GACpCb,SAAS3T,OAAOC,SAAS0T,UAAW,GACpCc,OAASzU,OAAOC,SAASwU,QAAW,GACpCC,KAAS1U,OAAOC,SAASyU,MAAW,GACpC3D,SAAS/Q,OAAOkR,UAAUH,UAAU,KACpCwC,KAAS,CAAC,IAAIE,IAAIzT,OAAOC,SAAS0D,QAezBgR,GAAW,SAAkB1G,GACtC,IAAMrF,EAAK,eAAOqF,GAClB2G,OAAOC,QAAQjM,GAAOkM,MAAK,8CAA0B,oBAA1B,KAAqC,GAAG,KAClEC,SAAQ,mCAAEjJ,EAAF,KAAMkJ,EAAN,YAAoBpM,EAAMkD,GAAkB,oBAANkJ,EAAiBA,EAAIpM,GAAOoM,KAC3E,IAAMzB,EAjBc,SAAOtF,GAAkC,IACtDqG,EAA4DrG,EAA5DqG,SAASpU,EAAmD+N,EAAnD/N,SAASqU,EAA0CtG,EAA1CsG,SADmC,EACOtG,EAAjC0F,gBAD0B,MACjB,GADiB,IACO1F,EAArBwG,cADc,MACP,GADO,IACOxG,EAAXyG,KAClDO,EAAM,CAACX,EAASpU,EAASqU,EAASZ,EAASc,OAFW,MACC,GADD,GAGtDS,EAAM,SAACV,GAAD,OAAYA,EAAK,IAAD,OAAKA,GAAO,IAClCW,EAAM,eAACvT,EAAD,uDAAG,EAAEwT,EAAL,8CAAaA,aAAa3L,MAAO7H,EAAEwT,EAAE7L,OAAO6L,EAAExT,GAAGwT,EAAEA,EAAE7L,OAAO,GAAI6L,GAC5E,GAAIH,EAAIrB,OAAM,SAAA9I,GAAC,MAAa,kBAAJA,KACpB,OAAO4I,GAAQ,GAAD,OAAIY,EAAJ,aAAiBpU,GAAjB,OAA4BgV,EAAKX,GAAjC,KAA8CZ,EAAiBc,GACjF,IAAMY,EAAYJ,EAAI9L,KAAI,SAAA2B,GAAC,OAAEA,aAAarB,MAAMqB,EAAEvB,OAAO,KAAG6J,QAAO,SAACtG,EAAEuG,GAAH,OAAOvG,EAAEuG,EAAEvG,EAAEuG,KAChF,OAAO,YAAI5J,MAAM4L,IAAYlM,KAAI,SAACuE,EAAE9L,GAAH,OAC7B8R,GAAQ,GAAD,OAAKyB,EAAKvT,EAAE0S,GAAZ,aAA0Ba,EAAKvT,EAAE1B,IAAjC,OACAgV,EAAKC,EAAKvT,EAAE2S,IADZ,KAC0BY,EAAKvT,EAAE+R,GAAUwB,EAAKvT,EAAE6S,OAOhDa,CAAY1M,GACzB,OAAO,2BAAIA,GAAX,IAAkB2K,KAAKA,aAAgB9J,MACnC8J,EAAKpK,KAAI,SAACqK,GAAD,MAAsB,kBAAJA,EAAe,IAAIC,IAAID,GAAKA,KACvD,CAAe,kBAAPD,EAAkB,IAAIE,IAAIF,GAAQA,MAIrCgC,GAA+B,CACxCC,KAAK,CAAC,WAAW,aACjBC,KAAK,KACLC,OAAO,KACPC,SAAS,KACTC,UAAU,MAMP,SAASlC,KAAkD,IAAD,uBAArCmC,EAAqC,yBAArCA,EAAqC,gBAC7D,IAAIC,EAAc,GAClB,GAAwB,IAApBD,EAAStM,OAAc,MAAO,GAClC,GAA2B,kBAAhBsM,EAAS,GAAiB,MAAM,IAAIE,UAAU,uBACrDF,EAAS,GAAG1V,MAAM,iBAAmB0V,EAAStM,OAAS,IACvDsM,EAAS,GAAKA,EAASG,QAAUH,EAAS,IAC1CA,EAAS,GAAG1V,MAAM,gBAClB0V,EAAS,GAAKA,EAAS,GAAGI,QAAQ,gBAAiB,UAEnDJ,EAAS,GAAKA,EAAS,GAAGI,QAAQ,gBAAiB,SACvDJ,EAAWA,EAAS5P,QAAO,SAAAiQ,GAAG,MAAQ,KAANA,KAChC,IAAK,IAAItU,EAAI,EAAGA,EAAIiU,EAAStM,OAAQ3H,IAAK,CACtC,IAAIsU,EAAML,EAASjU,GAEnB,GADmB,kBAARsU,IAAkBA,EAAMC,OAAOD,IACvB,kBAARA,EAAkB,MAAM,IAAIH,UAAJ,UAAiBG,EAAjB,8CAA0DA,IACjF,KAARA,IACAtU,EAAI,IAAGsU,EAAMA,EAAID,QAAQ,SAAU,KACVC,EAAzBtU,EAAIiU,EAAStM,OAAS,EAAS2M,EAAID,QAAQ,SAAU,IAC9CC,EAAID,QAAQ,SAAU,KACjCH,EAAYM,KAAKF,IAErB,IAAIA,EAAOJ,EAAyB5P,KAAK,KAErCmQ,GADJH,EAAMA,EAAID,QAAQ,kBAAmB,OACrB/B,MAAM,KAEtB,OADAgC,EAAMG,EAAML,SAAWK,EAAM9M,OAAS,EAAI,IAAK,IAAM8M,EAAMnQ,KAAK,KAO7D,IAAMoQ,GAAK,CACdrB,IAAKxL,MAAM8M,QACXC,IAAK,SAAC1J,GAAD,MAAsE,oBAAtC8H,OAAO6B,UAAUC,SAASC,KAAK7J,IACpE8J,IAAK,SAAC9J,GAAD,MAA6C,oBAANA,GAC5CoJ,IAAK,SAACpJ,GAAD,MAA6C,kBAANA,GAC5C+F,IAAK,SAAC/F,GAAD,MAA6C,kBAANA,GAC5C+J,IAAK,SAAC/J,GAAD,YAAsC,IAANA,GACrCgK,IAAK,SAAChK,GAAD,OAAsC,OAANA,GACrC/H,IAAK,SAAC+H,GAAD,OAAgCA,aAAaiK,KAClD5N,IAAK,SAAC2D,GAAD,OAAoCA,aAAakK,KACtDC,IAVc,SAUVnK,EAAQuG,GACZ,UAAWvG,WAAauG,EAAG,OAAO,EAC9B,GAAIiD,GAAGJ,IAAIpJ,IAAMwJ,GAAGzD,IAAI/F,GAAI,OAAOA,IAAMuG,EACzC,GAAIiD,GAAGE,IAAI1J,IACPwJ,GAAGE,IAAInD,IACPuB,OAAOY,KAAK1I,GAAGvD,OAASqL,OAAOY,KAAKnC,GAAG9J,SAAW,EAClD,OAAO,EACX,IAAI3H,EACJ,IAAKA,KAAKkL,EAAG,KAAMlL,KAAKyR,GAAQ,OAAO,EACvC,IAAKzR,KAAKyR,EAAG,GAAIvG,EAAElL,KAAOyR,EAAEzR,GAAI,OAAO,EACvC,OAAO0U,GAAGO,IAAIjV,IAAKkL,IAAMuG,ICrIjC,IAAM1N,GAAa,SAAC,GAAD,QAAEqG,SAAF,MAAI,EAAJ,MAAMkL,SAAN,MAAQ,EAAR,MAAU7D,SAAV,MAAY,EAAZ,MAAcvG,SAAd,MAAgB,GAAhB,MAAmBqK,MAAnB,qBAA6C,CAACxR,WAAW,QAAD,OAAS,CAACqG,EAAEkL,EAAE7D,EAAEvG,GAAG5G,KAAK,KAAxB,MAAiC,IACtGK,GACI,CAACjE,SAAS,WAAWuD,MAAM,OAAO6D,OAAO,EAAEU,OAAO,QADtD7D,GAEI,CAACjE,SAAS,WAAWuD,MAAM,OAAO6D,OAAO,GAF7CnD,GAGI,CAACjE,SAAS,WAAWiD,IAAI,EAAEqE,KAAK,EAAEpE,MAAM,EAAE4E,OAAO,QAHrD7D,GAII,CAACjE,SAAS,WAAWsH,KAAK,MAAMrE,IAAI,MAAMY,UAAU,wBAEjDiR,GAAsB,SAAC,GAAD,IAC/BtT,EAD+B,EAC/BA,SAD+B,IACtBjD,YADsB,MACjB,EADiB,MACf+E,cADe,MACR,EADQ,EACNnF,EADM,EACNA,EADM,IACH0W,aADG,gBAE7B1W,EAAEsF,aAAY,SAACsR,GAAD,OAAa,SAAAA,EAAI,IAAG,KAAM,KAC1C,kBAAC,WAAEvR,IAAH,CAAOhC,SAAUA,EAAU/C,MAAK,uCAAMwF,IAAN,IAAmBX,UAAWD,GAAW,CAAC0N,EAAE,IAAI8D,WAAhD,IAC5BzW,EAAE,EAAID,EAAEA,EAAEwI,IAAG,SAACoO,GAAD,OAAsC,IAALxW,GAAdwW,EAAG,GAAG,GAAG,IAAbA,KAC5BjV,MAAQ3B,EAAEwI,IAAG,SAACoO,GAAD,OAAa,SAAAA,EAAI,GAAE,EAAN,SAAQxW,EAAM,GAAE,GAAGwW,EAAG,EAAEA,GAAIA,GAAKxW,KAC3DgF,MAAQpF,EAAEwI,IAAG,SAACoO,GAAD,OAAaA,EAAG,EAAK,EAAHA,EAAS,GAAHA,KACrCrQ,QAAQvG,EAAEwI,IAAG,SAACoO,GAAD,OAAaA,EAAG,SAAS,eACjCC,GAAsB,SAAC,GAAD,IAAExT,EAAF,EAAEA,SAASrD,EAAX,EAAWA,EAAX,OAAmBqD,EAClD,kBAAC,WAAEgC,IAAH,CAAO/E,MAAK,2BAAMwF,IAAN,IAAiBS,QAAQvG,EAAEwI,IAAG,SAACoO,GAAD,OAAaA,EAAG,EAAE,SAAS,aAChEvT,EADL,KAD6D,MAMpDyT,GAAc,SAAdA,EAAe,GAIrB,IAAD,MAHFC,aAGE,MAHI,KAGJ,OAHUC,SAGV,EAHyBN,cAGzB,aAFF3R,aAEE,MAFI,KAEJ,MAFUoE,YAEV,MAFe,KAEf,MAFqBrB,aAErB,MAF2B,EAE3B,MAF8B3E,aAE9B,MAFoC,EAEpC,MADF/C,YACE,MADG,EACH,MADME,aACN,MADY,GACZ,EADmBD,EACnB,4FAC0B6H,oBAAiB,iBAAC7H,QAAD,IAACA,OAAD,EAACA,EAAOgD,gBAAR,eAA0ByF,SAAQ,GAD7E,mBACKA,EADL,KACamO,EADb,OAE0B/O,mBAAiB7H,EAAM8E,QAAe,IAAL/E,EAAS0I,GAFpE,mBAEK3D,EAFL,KAEa+R,EAFb,OAG0BhP,mBAAoBc,MAAMF,GAAQyJ,MAAK,IAHjE,mBAGK4E,EAHL,KAGaC,EAHb,KAIIC,EAAc7W,iBAAiBuW,GAAO,YAAI/N,MAAMF,IAASJ,KAAI,SAACuE,EAAE9L,GAAH,OAAcA,MAC3EmW,EAAc9W,iBAAQwI,MAAMF,GAAQyJ,KAAU,IAALnS,IACzCmX,EAAc/W,iBAA4B,MAC1CgX,EAAchQ,uBAAY,WAAO,IAAD,EAClC,GAAInH,EAAM8E,OAAQ,OAAO+R,EAAU7W,EAAM8E,QACzC,IAAMsS,EAAUzO,MAAMT,MAAc,OAATgP,QAAS,IAATA,GAAA,UAAAA,EAAWhW,eAAX,eAAoB8B,WAAU,IACzDiU,EAAU/V,QAAU,YAAIkW,GAAQ/O,KAAI,SAACgP,GAAD,OAASA,EAAEC,cAAc,KAC7DtX,EAAMgD,UAAY6T,EAAU,sBAAII,EAAU/V,SAAd,CAAsB,IAAGoR,QAAO,SAACtG,EAAEuG,GAAH,OAAOvG,EAAEuG,MAAW,IAALxS,EAAS0I,KACrF,CAAC1I,EAAM0I,EAAQzI,EAAM8E,OAAQ9E,EAAMgD,WACtCtC,qBAAU,WAAK,IAAD,EACJ6W,GAAM,UAACvX,EAAMgD,gBAAP,eAAyByF,SAAQ,EAC7CmO,EAAUW,GACVR,EAAUpO,MAAM4O,GAAKrF,MAAK,IACtB8E,EAAS9V,QAAQuH,SAAW8O,IAC/BP,EAAS9V,QAAUwV,GAAO,YAAI/N,MAAM4O,IAAMlP,KAAI,SAACuE,EAAE9L,GAAH,OAAcA,KAC7DmW,EAAU/V,QAAUyH,MAAM4O,GAAKrF,KAAU,IAALnS,MACrC,CAACA,EAAM2W,EAAO1W,EAAMgD,WAEvB,IAAMwU,EAAO,SAAC,GAAD,QAAE7L,WAAF,MAAM,EAAN,MAAQwI,WAAR,MAAY6C,EAAS9V,QAArB,SAAgCyK,EAAI,EAAE,EAAE,sBAAIwI,EAAIzL,MAAM,EAAEiD,GAAKtD,KAAI,SAAAvH,GAAC,OAAEmW,EAAU/V,QAAQJ,OAA9C,CAAkD,IAAGwR,QAAO,SAACtG,EAAEuG,GAAH,OAAOvG,EAAEuG,MAEpHkF,EAAOtQ,uBAAY,oBAAErG,SAAF,OAAK,EAAL,MAAOqT,WAAP,MAAW6C,EAAS9V,QAApB,MAA4ByK,WAA5B,OAAiC,EAAjC,MAAmCf,UAAnC,MAAsC,EAAtC,MAAwCC,UAAxC,MAA2C,EAA3C,MAA6CH,YAA7C,gBACrB,SAAC3J,GAAD,OAAe2J,GAAM3J,IAAID,EACnB,CAACQ,MAAM,GAAK3B,EAAEiL,EAAIhL,EAAE4X,EAAK,CAAC7L,QAAMd,GAChC,CAACvJ,MAAM,EAAK3B,EAAE,EAAIC,EAAE4X,EAAK,CAAC7L,IAAIwI,EAAIuD,QAAQ3W,GAAGoT,YAAQ,IA3B7D,EA4BqBwD,qBAAWlP,EAAQgP,EAAK,KA5B7C,mBA4BKG,EA5BL,KA4Bc3T,EA5Bd,KA6BIC,EAAOoG,YAAW,CACpBnH,QAAQ,kBAAI0U,YAAW,WAAKV,IAAclT,EAAIwT,EAAK,OAAO,IAC1DhN,OAAS,YACkD,IAD/CC,EAC8C,EAD9CA,KAAKI,EACyC,EADzCA,OACyC,gBADlCH,SACkC,GADxBC,EACwB,KADrBC,EACqB,KADjBiN,EACiB,EADjBA,UAC7BvT,EAA8C,EAA9CA,KAAYzD,EAAkC,cAAxCiB,KAAwC,sBAA9BqC,KAA8B,GAAxBC,EAAwB,KAArBC,EAAqB,KAAjByT,EAAiB,EAAjBA,WACjCxT,GAAQuG,GAAUiN,EAAUD,EAAU,GAAGhN,IAC7C,IAAMa,EAAMqL,EAAS9V,QAAQwW,QAAQ5W,GAC/BkX,EAAMpG,GAAOjQ,KAAKsW,MAAMtM,EAAId,EAAG9K,EAAK,KAAM,EAAG0I,EAAO,GACpD0L,ED5DG,SAACA,EAAa+D,EAAWF,GAC1C,IAAMG,EAAG,sBAAOhE,EAAIzL,MAAM,EAAGwP,IAApB,YAA6B/D,EAAIzL,MAAMwP,EAAI,EAAG/D,EAAI1L,UAC3D,MAAM,GAAN,mBAAW0P,EAAIzP,MAAM,EAAGsP,IAAxB,YAAiC7D,EAAIzL,MAAMwP,EAAKA,EAAI,IAApD,YAA2DC,EAAIzP,MAAMsP,KC0DjDI,CAAKpB,EAAS9V,QAASyK,EAAKqM,GAExC,GADItN,IAAMsM,EAAS9V,QAAUiT,IACzB5P,EAAM,OAAON,EAAKwT,EAAK,CAAC3W,IAAEqT,MAAIxI,MAAIf,KAAGC,KAAGH,UAC5C,IAAM/K,GAAKiL,EAAG,GAAG,EAAE,GAAK7K,EAAK,GACjB,SAAA6K,EAAI,GAAE,IAAI,SAAAjL,EAAG,GAAQ,EAAN,SAAAiL,EAAI,KAAK,SAAAvG,EAAI,GAAJ,SAAMC,EAAI,IAAQwS,EAAOhW,GAC7DiW,GAAU,SAAA3P,GAAC,mBAAM0M,OAAOuE,OAAO,GAAdvE,OAAA,KAAAA,CAAA,GAAmBhT,GAAIsG,EAAEtG,SAC1C+W,YAAW,WAAKV,IAAclT,EAnBzB,SAAC,GAAD,QAAEnD,SAAF,OAAK,EAAL,MAAOnB,SAAP,MAAS,EAAT,MAAWuF,SAAX,MAAa,EAAb,SAAoB,eAACnE,EAAD,uDAAG,EAAH,MAAQ,CAACpB,EAAEoB,IAAID,EAAEnB,EAAE,EAAEC,EAAE4X,EAAK,CAAC7L,IAAIqL,EAAS9V,QAAQwW,QAAQ3W,KAAKO,MAAMP,IAAID,EAAEoE,EAAE,IAmBpEoT,CAAK,CAACxX,IAAEoE,EAAK,OAAQ,MAIzDlC,EAAW1C,mBAAQ,kBAAM8H,WAASC,IAAIrI,EAAMgD,UAAU,SAACsF,GAAW,IAAD,IAC7DC,EAAQH,WAASI,QAAT,UAAkBF,SAAlB,iBAAiB,EAAgBtI,aAAjC,aAAiB,EAAuBgD,WAAa,GACnE,OAAQuF,EAAME,OAAO,GAAa,IAARhB,EACpBsD,IAAMwN,aAAajQ,EAAc,CAACtF,SAASuF,EAAM,GAAIoO,SACnD,kBAACF,EAAD,2BAAezW,GAAf,IAAsByH,MAAMA,EAAM,EAAEzE,SAASuF,EAAMG,MAAM,QAC3DJ,OACN,CAACb,EAAOzH,IAMZ,OALAU,qBAAU,WACN,IAAM8X,EAAQ,kBAAWrB,IAAelT,EAAIwT,EAAK,MAEjD,OADAvY,OAAOuZ,iBAAiB,SAAUD,GAASA,IACpC,kBAAMtZ,OAAOwZ,oBAAoB,SAAUF,MACnD,CAACrB,EAAalT,EAAKwT,IAElB,yBAAK5V,IAAKqV,EAAWjX,MAAK,uCAAMwF,IAAN,IAAkBX,UAAU7E,GAAU4E,GAAW,CAACqG,EAAE,IAAImL,YAC7EuB,EAAQvP,KAAK,WAAc2C,GAAd,QAAErL,EAAF,EAAEA,EAAEC,EAAJ,EAAIA,EAAE0B,EAAN,EAAMA,MAAN,OACV,kBAAC,WAAE0D,IAAH,cAAW,CAACgG,OAAU9G,EAAK8G,GAA3B,CAAiC/K,MAAO,CAACN,IAAEC,IAAE4B,SAAS,WAAWuD,MAAM,UACnE,kBAAC,WAAEC,IAAH,CAAO/E,MAAK,2BAAMwF,IAAN,IAAkBnE,QAAMkD,QAAQ1B,GAAU+B,GAAW,CAACuR,EAAE,IAAIC,YAClErT,EAAiBgI,IAEvB,kBAAC,GAAc,CAACrL,IAAEI,OAAKsW,QAAMvR,OAAOmS,EAAU/V,QAAQ8J,IAClD,kBAAC,GAAD,CAAWrL,EAAGA,GAAI+E,GAClB,kBAAC,GAAD,CAAW/E,EAAGA,GAAImJ,IAEpBgO,EAAO9L,KAAO,UAAChI,EAAiBgI,UAAlB,mBAAwBhL,aAAxB,eAA+B2W,WAAa,SChGnEgC,GAAe,WACxB,IAAM7Y,EAAQ+Q,YAAW,OAAS,CAAC9J,KAAM,UAAWxG,OAAO,IACrD8V,EAAQxF,YAAW,QAAS,CAAC9J,KAAM,UAAWxG,OAAO,IACrDR,EAAQ8Q,YAAW,OAAS,CAAC9J,KAAM,SAAWxG,MAAO,EAAGmO,IAAK,EAAGD,IAAK,IACrE3L,EAAQ+N,YAAW,QAAS,CAAC9J,KAAM,SAAWxG,MAAM,GAAImO,IAAK,EAAGD,IAAI,MACpEhH,EAAQoJ,YAAW,QAAS,CAAC9J,KAAM,SAAWxG,MAAO,EAAGmO,IAAK,EAAGD,IAAK,IACrEnG,EAAQuI,YAAW,QAAS,CAAC9J,KAAM,SAAWxG,MAAO,EAAGmO,IAAK,EAAGD,IAAK,KAC3E,OACI,kBAAC,GAAU,CAAC3O,OAAMuW,QAAOtW,OAAM+C,QAAO2E,QAAQA,GAC7C,YAAIkB,QAAQL,IAAQD,KAAI,SAACuE,EAAE9L,GAAH,OACrB,kBAAC,GAAD,CAAM4N,IAAK,EAAG1D,IAAKlK,EAAGb,MAAO,CACzB6E,OAAY,IAAL/E,EACP8E,WAAW,sBAAuB/D,QAKrC8X,GAAS,0WCdhBnT,GACI,CAACjE,SAAS,WAAWkE,SAAS,UAAUX,MAAM,OAAOa,WAAW,UADpEH,GAEI,CAACjE,SAAS,WAAWkE,SAAS,UAAUZ,OAAO,OAAOoB,QAAQ,eAAeP,cAAc,OAMxFkT,GAAc,SAAC,GAGrB,IAAD,QAFFnC,aAEE,MAFI,GAEJ,MAFQ3R,aAER,MAFc,EAEd,MAFiBD,cAEjB,MAFwB,EAExB,MAF2B4J,WAE3B,MAF+B,EAE/B,OADF5O,KACE,EADSC,KACT,EADiBE,cACjB,MADuB,GACvB,MAD2B6Y,iBAC3B,MADqC,GACrC,EAD4C9Y,EAC5C,kFACI+Y,EAAO5Y,iBAAe,GACtB6Y,EAAO7Y,kBAAe,UAACH,SAAD,mBAAgBgD,gBAAhB,eAA0ByF,SAAQ,GACxDwQ,EAAO9Y,iBAAe2E,GAAQ,GAC9BoU,EAAO/Y,iBAAiBgS,GAASuE,EAAOsC,EAAK9X,QAAS6D,IAJ1D,EAKsBhB,qBAAU,iBAAO,CAAC8I,EAAEoM,EAAK/X,YAL/C,mBAKK6G,EALL,KAKcoR,EALd,OAMsBxB,qBAAWuB,EAAKhY,QAAQuH,QAAQ,SAAA3H,GAAC,MAAG,CAACuR,EAAE6G,EAAKhY,QAAQJ,GAAGuO,EAAE,MAN/E,mBAMKuI,EANL,KAMcwB,EANd,KAWIlV,EAAOoG,YAAW,CACpBG,OAAO,YAAmE,IAAjE4O,EAAgE,EAAhEA,MAAO9U,EAAyD,EAAzDA,KAAYyG,EAA6C,cAAnDjJ,KAAmD,sBAAvC4I,SAAuC,GAA7BC,EAA6B,KAA1BC,EAA0B,KAAVkC,EAAU,cAArBuM,UAAqB,OAClD,IAAfP,EAAK7X,SAAamY,KAAON,EAAK7X,QAAU4Q,GAAK/E,IACjD+E,GAAK/E,IAAQ+E,GAAK/E,KAAOgM,EAAK7X,SAC9BkY,EARK,eAACxO,EAAD,uDAAI,EAAG2O,EAAP,uDAAS,EAAGrU,EAAZ,uDAAc,EAAGsU,EAAjB,uDAAmB,EAAGnH,EAAtB,uDAAwB6G,EAAKhY,QAASuY,EAAtC,uDAAwCva,OAAOiK,WAA/C,OAA8D,eAACrI,EAAD,uDAAG,EAAH,MACvE,CAACyY,EAAEA,EAAErU,GAAG4N,OAAM,SAAApJ,GAAC,OAAImI,GAAMnI,GAAI,EAAGsP,EAAK9X,YAClCJ,IAAIyY,GAAGzY,IAAIyY,EAAErU,IAAM2M,GAAMQ,EAAEvR,GAAG8J,EAAG1F,GAAGpE,IAAIyY,EAAE,GAAG,GAAGE,EAAGD,EAAGnH,EAAEkH,GAAGlH,EAAEkH,EAAErU,GAAGsU,GAAiC,KAA7B,CAACnH,EAAEA,EAAEvR,GAAG8J,EAAG1F,GAAGpE,IAAIyY,EAAE,GAAG,GAAGE,GAChG3Y,IAAIyY,GAAGzY,IAAIyY,EAAErU,IAAM2M,GAAMQ,EAAEvR,GAAG8J,EAAG1F,GAAGpE,IAAIyY,EAAE,GAAG,GAAGE,EAAGD,EAAGnH,EAAEkH,GAAGlH,EAAEkH,EAAErU,GAAGsU,GAAiC,KAA7B,CAACnH,EAAEA,EAAEvR,GAAG8J,EAAG1F,GAAGpE,IAAIyY,EAAE,GAAG,GAAGE,IAK1FC,CAAK9O,EAAGI,EAAI8G,GAAK/E,GAAK2B,IAC3ByK,EAAK,CAACtM,EAAE+E,GAAMqH,EAAK/X,QAAQ2J,EAAG3L,OAAO8P,YAAaN,EAAK,KAClDnK,IACL2U,EAAKhY,QAAU0W,EAAQvP,KAAI,SAACnD,GAAD,OAAWA,EAAEmN,EAAEnJ,UAAUf,IAAM,KAC1D8Q,EAAK/X,QAAU6G,EAAO8E,EAAE3D,UAAUf,IAAgB,MAGpDnF,EAAW1C,mBAAQ,kBAAM8H,WAASC,IAAIrI,EAAMgD,UAAU,SAAAqU,GAAC,OAAEA,OAAI,CAACrX,EAAMgD,WAgB1E,OAfAtC,qBAAU,WAAO,IAAD,IACN6W,GAAM,UAACvX,SAAD,mBAAgBgD,gBAAhB,eAA0ByF,SAAQ,EAC1C8O,IAAMyB,EAAK9X,UACf8X,EAAK9X,QAAUqW,EACf2B,EAAKhY,QAAL,sBAAmBgY,EAAKhY,QAAQmH,KAAI,SAAA2B,GAAC,OAAEA,EAAE,EAAEuN,EAAI2B,EAAKhY,QAAQuH,WAA5D,CAAqE,EAAE8O,IACvE6B,GAAK,SAACtY,GAAD,MAAQ,CAACuR,EAAE6G,EAAKhY,QAAQJ,UAC7B,CAACd,EAAOoZ,IACZ1Y,qBAAU,WACNwY,EAAKhY,QAAUiR,GAASuE,EAAMsC,EAAK9X,QAAQ6D,GAC3CqU,GAAK,SAAAtY,GAAC,MAAG,CAACuR,EAAE6G,EAAKhY,QAAQJ,SAC1B,CAACiE,EAAOqU,EAAM1C,IACjBhW,qBAAU,WACNuY,EAAK/X,QAAU4D,GAAQ,EACvBqU,EAAK,CAACtM,EAAEoM,EAAK/X,YACd,CAAC4D,EAAQqU,IAER,kBAAC,WAAEnU,IAAH,eAAO/E,MAAK,2BAAMwF,IAAN,IAAmBX,OAAOiD,EAAO8E,EAAE5H,aAAY,SAAA+E,GAAC,gBAAO,IAAFA,EAAL,SAC1C/J,IAAYD,GACzB4X,EAAQvP,KAAI,WAAK2C,GAAL,IAAEqH,EAAF,EAAEA,EAAF,OACT,kBAAC,WAAErN,IAAH,iBAAWd,EAAK8G,GAAU,CAACA,OAA3B,CAAiC/K,MAAK,uCAC3BwF,IAAgBqT,GADW,IAE9B/T,MAAMsN,EAAEpN,aAAY,SAAA+E,GAAC,gBAAO,IAAIA,EAAX,YAGvBhH,EAAiBgI,SC5D1B2O,GAAe,WACxB,IAAM7Z,EAAQ+Q,YAAW,OAAU,CAAC9J,KAAM,UAAWxG,OAAO,IACtDR,EAAQ8Q,YAAW,OAAU,CAAC9J,KAAM,SAAWxG,MAAO,EAAGmO,IAAK,EAAGD,IAAK,IACtEC,EAAQmC,YAAW,MAAU,CAAC9J,KAAM,SAAWxG,MAAO,EAAGmO,IAAK,EAAGD,IAAK,IACtE1J,EAAQ8L,YAAW,QAAU,CAAC9J,KAAM,SAAWxG,MAAO,EAAGmO,IAAK,EAAGD,IAAK,IACtE3J,EAAQ+L,YAAW,SAAU,CAAC9J,KAAM,SAAWxG,MAAO,EAAGmO,IAAK,EAAGD,IAAK,IACtEmL,EAAQ/I,YAAW,SAAU,CAAC9J,KAAM,SAAWxG,MAAO,EAAGmO,IAAK,EAAGD,IAAI,KAC3E,OACI,yBAAKxO,MAAO,CAAC6E,OAAO,SAChB,kBAAC,GAAU,CAAChF,OAAKC,OAAK2O,MAAI3J,QAAMD,UAC/B,YAAI6D,QAAQiR,IAASvR,KAAI,SAACuE,EAAGmF,GAAJ,OACtB,yBAAK/G,IAAK+G,EAAK9R,MAAO,CAAC8E,MAAM,OAAOD,OAAO,OAAOD,WAAW,QAAD,OAAS,CAAC,GAAD,OAC9DkN,EAAU,EAAI,IAAM,GAD0C,WAE7DA,EAAI,GAAK,EAAI,IAAM,GAF0C,WAG7DA,EAAI,GAAK,EAAI,IAAM,IACzB3M,KAJmE,MAAT,iBAU/DyU,GAAS,2eCrBTC,GAAY,SAAC,GAEnB,IADH9W,EACE,EADFA,SACE,IADQnD,aACR,MADc,GACd,MADkBC,YAClB,aAD6BC,YAC7B,MADkC,EAClC,MADqCE,aACrC,MAD2C,GAC3C,EADkDD,EAClD,0DASF,OARAC,EAAQK,mBAAa,+BACjBiD,SAAc,GAALxD,EACTF,MAAMA,GAAOC,EAAK,UAAU,OAC5BiF,MAAM,qBAAD,OAA2B,IAALhF,EAAtB,OACL+E,OAAO,OACPwE,OAAO,QACJrJ,KACH,CAACJ,EAAMC,EAAKC,EAAKE,IACd,qCAAU+C,WAAS/C,SAASD,KCZjCyP,GAAQ,CAAC,IAAK,IAAK,IAAK,KACjBsK,GAAe,WACxB,IAAMja,EAAW+Q,YAAW,OAAa,CAAC9J,KAAM,UAAWxG,OAAO,IAC5D6C,EAAWyN,YAAW,OAAa,CAAC9J,KAAM,UAAWxG,OAAO,IAC5D8G,EAAWwJ,YAAW,YAAa,CAAC9J,KAAM,UAAWxG,OAAO,IAC5DyG,EAAW6J,YAAW,OAAa,CAAC9J,KAAM,UAAWxG,OAAO,IAC5DiH,EAAWqJ,YAAW,UAAa,CAAC9J,KAAM,UAAWxG,OAAO,IAC5DkH,EAAWoJ,YAAW,QAAa,CAAC9J,KAAM,SAAWxG,MAAO,EAAGmO,IAAK,EAAGD,IAAK,IAC5E/G,EAAWmJ,YAAW,OAAa,CAAC9J,KAAM,SAAWxG,MAAO,EAAGmO,IAAK,EAAGD,IAAK,IAC5E1O,EAAW8Q,YAAW,OAAa,CAAC9J,KAAM,SAAWxG,MAAO,EAAGmO,IAAK,EAAGD,IAAK,IAC5ExH,EAAW4J,YAAW,OAAa,CAAC9J,KAAM,SAAWxG,MAAO,QAAUkP,MAAM,CAAC,QAAQ,OAAO,WAC5F3I,EAAW+J,YAAW,UAAa,CAAC9J,KAAM,SAAWxG,MAAOkP,GAAM,GAAIA,WAC5E,OACI,kBAAC,GAAS,CAAC3P,OAAKC,QACZ,kBAAC,EAAU,CAACD,OAAKsD,OAAKoE,UAAQH,YAAUL,OAAKS,QAAMC,OAAK3H,OAAKkH,OAAKH,WAC9D,oCACI,yCACA,6CACA,8CAEJ,oCACI,yCACA,6CACA,iDAMPkT,GAAS,+fC1BhBC,GAAS,SAACja,GAAD,OACX,kBAAC,IAAD,KACI,yBAAUA,EACN,gCAAYuC,SAAU,CAACZ,KAAKa,GAAG,EAAE,EAAE,GAAIlB,MAAO,CAAC,GAAG,GAAG,MACrD,uCAAmBS,KAAM,CAAC,EAAG,EAAG,KAChC,uCAAmBlC,MAAO,cAIzBqa,GAAW,WAIpB,OACI,kBAAC,IAAD,CACIja,MAAO,CAAC8E,MAAM,OAAOD,OAAO,QAAQwE,OAAO,EAAE9E,QAAQ,GACrDoJ,WAAS,EAACuM,YAAU,EAACC,UAAQ,EAACzM,iBAAe,EAAC0M,WAAY,GAC1D,kCAAcpM,UAAW,KACzB,gCAAYzM,SAAU,EAAE,IAAK,IAAK,IAAKyM,UAAW,IAClD,kBAAC,WAAD,CAAUG,SAAU,MAChB,kBAAC,IAAD,CAAMrB,IAAI,MAAMhI,MAAM,QAAQD,OAAO,QACjC,kBAAC,IAAD,CAAKC,MAAM,QAAO,kBAAC,GAAD,OAClB,kBAAC,IAAD,CAAKA,MAAM,QAAO,kBAAC,GAAD,W,SCZzBuV,GAAgB,SAAC,GAKvB,IAJHtX,EAIE,EAJFA,SAIE,IAFFxB,gBAEE,MAFO,CAAC,EAAE,EAAE,GAEZ,MADFe,gBACE,MADO,CAAC,EAAE,EAAE,GACZ,EACIgY,EAAOpa,iBAAO,MACdqa,EAAOra,iBAAO,CAACqB,WAASe,aAF5B,EAGoBwB,sBAAU,kBAAIyW,EAAKtZ,WAHvC,mBAGKuZ,EAHL,KAGYC,EAHZ,KAISC,EAAenO,cAAnBqB,GAAI8M,WACL1W,EAAK,WAAoB,IAAnB2W,EAAkB,uDAAf,EAAEC,EAAa,uDAAV,EAAEC,EAAQ,uDAAL,EACrBN,EAAKtZ,QAAQM,SAAW,CAACoZ,EAAGC,EAAGC,GAAIzS,KAAI,SAAC2B,EAAElJ,GAAH,OAASkJ,EAAE,GAAGwQ,EAAKtZ,QAAQM,SAASV,MAC3E4Z,EAAK,eAAIF,EAAKtZ,WAYlB,OAVAoJ,YAAW,CACPG,OAAQ,gBAAa7K,EAAb,cAAE+K,SAAF,aAAqB1G,EAAI,GAAI,GAAGrE,EAAEV,OAAO8P,cACjD+L,QAAQ,gBAAanb,EAAb,cAAE+K,SAAF,aAAqB1G,EAAI,GAAI,GAAGrE,EAAEV,OAAO8P,eAClD,CAACgM,UAAUL,EAAYM,aAAa,CAACC,SAAQ,KAChD9Z,aAAS,YAAe,IAAb2M,EAAY,EAAZA,OACDoN,EAAMV,EAAOjZ,SAAS4Z,MAC5BrN,EAAOvM,SAAS7B,EAAIwb,EAAI,GACxBpN,EAAOvM,SAAS5B,EAAIub,EAAI,GACxBpN,EAAOvM,SAAS6N,EAAI8L,EAAI,MAGxB,kBAAC,YAAE5O,MAAH,eAAS1K,IAAK0Y,GAAUE,GACnBzX,ICpCAqY,GAAa,WACtB,IAAMvb,EAAS0P,YAAI,OAAU,CAACzI,KAAM,UAAWxG,OAAO,IAChDR,EAASyP,YAAI,OAAU,CAACzI,KAAM,SAAU2H,IAAK,EAAGnO,MAAO,EAAGkO,IAAI,IAGpE,OACQ,kBAAC,IAAD,CAAQZ,GAAI,CAACyN,WAAU,EAAOC,wBAAwB,GAC9Ctb,MAAO,CAAC8E,MAAM,OAAOD,OAAO,sBAC5BiJ,OAAQ,CAACvM,SAAS,CAAC,EAAE,EAAE,GAAIga,IAAI,KAC/BnB,WAAYnb,OAAOuc,iBACnBC,UAAY,YAAe,IAAb7N,EAAY,EAAZA,GACVA,EAAG8N,eAAiBnb,eACpBqN,EAAG+N,YAAiBpb,0BAE5B,kCAAcyN,UAAW,MACzB,gCAAYzM,SAAU,CAAC,IAAK,IAAK,KAAMyM,UAAW,MAClD,gCAAYzM,SAAU,EAAE,KAAM,KAAM,KAAMyM,UAAW,EAAGpO,MAAM,QAC9D,kBAAC,EAAU,CAACC,OAAKC,SACjB,kBAAC,GAAD,CAAQyB,SAAU,CAAC,EAAE,EAAE,GAAIe,SAAU,EAAEZ,KAAKa,GAAG,EAAE,EAAE,IAC/C,wCAKPqZ,GAAU,mKCvBVC,GAAY,WACrB,IAAMhc,EAAS0P,YAAI,OAAU,CAACzI,KAAM,UAAWxG,OAAO,IAChDR,EAASyP,YAAI,OAAU,CAACzI,KAAM,SAAU2H,IAAK,EAAGnO,MAAO,EAAGkO,IAAI,IAC9DlP,EAASiQ,YAAI,MAAU,CAACzI,KAAM,SAAU2H,IAAK,EAAGnO,MAAO,EAAGkO,IAAI,IAC9DjP,EAASgQ,YAAI,OAAU,CAACzI,KAAM,SAAU2H,IAAK,EAAGnO,MAAO,EAAGkO,IAAI,KAC9DhP,EAAS+P,YAAI,OAAU,CAACzI,KAAM,SAAU2H,IAAK,EAAGnO,MAAO,EAAGkO,IAAI,IAC9D/O,EAAS8P,YAAI,SAAU,CAACzI,KAAM,QAAUxG,MAAO,CAACZ,EAAE,GAAGC,EAAE,IAAKmc,OAAM,IAIxE,OACQ,kBAAC,IAAD,CAAQlO,GAAI,CAACyN,WAAU,EAAOC,wBAAwB,GAC9Ctb,MAAO,CAAC8E,MAAM,OAAOD,OAAO,sBAC5BiJ,OAAQ,CAACvM,SAAS,CAAC,EAAE,EAAE,GAAIga,IAAI,KAC/BnB,WAAYnb,OAAOuc,iBACnBC,UAAY,YAAe,IAAb7N,EAAY,EAAZA,GACVA,EAAG8N,eAAiBnb,eACpBqN,EAAG+N,YAAiBpb,0BAE5B,kCAAcyN,UAAW,MACzB,gCAAYzM,SAAU,CAAC,IAAK,IAAK,KAAMyM,UAAW,MAClD,gCAAYzM,SAAU,EAAE,KAAM,KAAM,KAAMyM,UAAW,EAAGpO,MAAM,QAC9D,kBAAC,IAAD,KACI,kBAAC,EAAU,CACPC,OAAKC,OAAKR,MAAIC,OAAKC,OAAKC,cAKnCsc,GAAS,mKC7BhBvM,GAAQ,CAAC,SAAU,oBACnBwM,GAAU,CAAC,SAAU,OAAQ,SAC7BC,GAAU,CAAC,SAAU,MAAO,eAAgB,kBAAmB,UAC/DC,GAAa,CAAC,SAAU,OAAQ,QAAS,WACzCC,GAAa,SAACpc,GAAW,IACpBD,EAAQyM,cAARzM,KACD0M,EAASC,YAAU,QAAS3M,EAAKgF,MAAOhF,EAAK+E,OAAQ,GAC3D,OACI,kBAAC,IAAD,CAAMiI,IAAI,SAAShN,KAAI,sBAAM0M,GAAN,CAAc,IAAY1H,MAAM,OAAOD,OAAO,QACjE,kBAAC,IAAD,CAAKC,MAAM,OAAOD,OAAO,QACrB,kBAAC,EAAU9E,MAKdqc,GAAe,WACxB,IAAM3Z,EAAY8M,YAAI,UAAc,CAACzI,KAAK,SAAUxG,MAAQ0b,GAAQ,GAAIxM,MAAOwM,KACzEtZ,EAAY6M,YAAI,UAAc,CAACzI,KAAK,SAAUxG,MAAQ2b,GAAQ,GAAIzM,MAAOyM,KACzEtZ,EAAY4M,YAAI,aAAc,CAACzI,KAAK,SAAUxG,MAAM4b,GAAU,GAAI1M,MAAO0M,KACzEnZ,EAAYwM,YAAI,WAAc,CAACzI,KAAK,SAAUxG,MAAMkP,GAAM,GAAIA,WAC9D1M,EAAWyM,YAAI,WAAY,CAACzI,KAAK,SAAUxG,OAAO,EAAGmO,KAAK,EAAGD,IAAI,IACjE3L,EAAQ0M,YAAI,QAAS,CAACzI,KAAK,SAAUxG,MAAM,EAAGmO,IAAI,EAAGD,IAAI,KACzD1O,EAAOyP,YAAI,OAAQ,CAACzI,KAAK,SAAUxG,MAAM,EAAGmO,IAAI,EAAGD,IAAI,KACvD3O,EAAO0P,YAAI,OAAQ,CAACzI,KAAK,UAAWxG,OAAM,IAChD,OACI,kBAAC,IAAD,CACIN,MAAO,CAAC8E,MAAM,OAAOD,OAAO,QAAQwE,OAAO,EAAE9E,QAAQ,GACrDoJ,WAAS,EAACuM,YAAU,EAACE,WAAY,EACjCD,UAAQ,EAACzM,iBAAe,EACxBI,OAAQ,CAACvM,SAAS,CAAC,EAAE,EAAE,GAAGga,IAAI,KAC9B3N,GAAI,CAACyO,gBAAgB,mBAAoBxO,OAAM,EAAMwN,WAAU,EAAOiB,SAAQ,EAAO9U,OAAM,GAC3FiU,UAAW,qBAAE7N,GAAW2O,cAAc,aACtC,gCAAYhb,SAAU,EAAE,IAAK,IAAK,IAAKyM,UAAW,IAClD,kCAAcA,UAAW,KACzB,+BAAYC,YAAU,EAACuO,MAAO,GAAKtO,SAAW,EAAGuO,uBAAuB,KAC5Dlb,SAAU,CAAC,EAAG,GAAI,IAAKyM,UAAW,EAAG0O,wBAAuB,OACxE,gCAAYnb,SAAU,CAAC,GAAG,GAAG,GAAIF,MAAO,CAAC,GAAG,GAAG,MAC/C,kBAAC,WAAD,CAAU8M,SAAU,MAChB,kBAAC,IAAD,KACI,kBAAC,GAAY,CACTpL,WACAN,UACAC,UACAC,YACA9C,OACAC,OACA+C,QACAC,iBAMX6Z,GAAS,yQCvDhBC,GAAU,SAAC9P,GAAD,OAAW+G,OAAOuE,OAAP,MAAAvE,OAAM,CAAQ,IAAR,mBAAcA,OAAOY,KAAK3H,GAAK1E,KAAI,SAAA2C,GAAG,uBACjEA,EAAK,CAACzK,MAAMwM,EAAI/B,YAmCT8R,GAAS,SAAC,GAIZ,IAJcC,EAIf,EAJeA,IAIf,IAHNvb,gBAGM,MAHG,CAAC,EAAE,EAAE,GAGR,MAFNuD,aAEM,MAFA,IAEA,MAFKiY,oBAEL,MAFkB,IAElB,MAFwBC,kBAExB,aAF0CC,iBAE1C,MAFoD,EAEpD,MAFuDpa,aAEvD,MAF6D,EAE7D,MADNgC,cACM,MADC,IACD,MADMqY,mBACN,MADkB,IAClB,MADwBC,iBACxB,aADyCC,eACzC,MADiD,IACjD,EAD0Drd,EAC1D,uIAEAqI,EAAM/H,mBAAa,WACrB,IAAMgd,EAAQC,SAASC,cAAc,SACrC,GAAKF,EAIL,OAHAA,EAAMG,IAAQV,EACdO,EAAMI,MAAQ,EAAMJ,EAAMK,OAC1BL,EAAMM,OAAQ,EAAMN,EAAMO,OACnB,IAAIrd,eAAmB8c,KAC/B,CAACP,IACEe,EAAW3d,mBACXD,EAAWC,mBACXC,EAAWD,mBACXE,EAAW0D,sBAAU,kBAAM8Y,GAAU,CACvC9X,QAAOiY,eAAc3U,MAAKvF,QAC1BgC,SAAQqY,cAAaD,YAAWG,eAoBpC,OAjBAjc,aAAS,WAEL,IADA,IAAM+Z,EAAM,IAAIva,aAAcmE,EAAMD,EAAO,GACjChE,EAAE,EAAGC,EAAE,EAAGkR,EAAEkJ,EAAI1S,OAAQ3H,EAAEmR,EAAGnR,GAAG,EAAGC,IACzCoa,EAAKra,GAAMC,EAAIgE,EACfoW,EAAIra,EAAE,GAAKa,KAAKoc,MAAOhd,EAAEgE,GAE7B7E,EAASgB,QAAQC,aAAa,WAAY,IAAIX,kBAAsB2a,EAAI,IACxE2C,EAAO5c,QAAQM,SAAS7B,EAAI6B,EAAS,GACrCsc,EAAO5c,QAAQM,SAAS5B,EAAI4B,EAAS,GACrCsc,EAAO5c,QAAQM,SAAS6N,EAAI7N,EAAS,GACrCpB,EAASc,QAAQkc,UAAaA,EAC9Bhd,EAASc,QAAQ+b,WAAaA,EAC9B7c,EAASc,QAAQb,SAAWwc,GAAU,CAClC9X,QAAOiY,eAAc3U,MAAKvF,QAC1BgC,SAAQqY,cAAaD,YAAWG,eAIpC,kBAAC,KAAES,OAAH,iBAAc9d,EAAd,CAAsB6B,IAAKic,EAAQtc,SAAUA,IACzC,kBAAC,KAAEwc,eAAH,CAAkBnc,IAAK3B,EAAU4B,OAAO,aACxC,kBAAC,KAAEmc,eAAH,eAAkBpc,IAAKzB,EAAU0B,OAAO,WACpCM,aAAW,EAAC8b,SAAU1d,oBAD1B,2BAEYH,GAFZ,IAGQ+c,YAAWnb,eAtDX,qKAuDAgb,aAAYjb,aA9Ed,qxBCFLmc,GAAiB,WAC1B,IAAMf,EAAY5N,YAAI,YAAa,CAACzI,KAAK,UAAWxG,OAAM,IACpD0c,EAAazN,YAAI,aAAc,CAACzI,KAAK,UAAWxG,OAAM,IAOtDP,EAAQ,CACVgd,aAPiBxN,YAAI,eAAgB,CAACzI,KAAK,SAAUxG,MAAM,IAAMmO,IAAI,EAAGD,IAAI,MAQ5E0O,YAPgB3N,YAAI,cAAe,CAACzI,KAAK,SAAUxG,MAAM,IAAMmO,IAAI,EAAGD,IAAI,MAQ1E2O,YACAH,aACAC,UATc1N,YAAI,YAAa,CAACzI,KAAK,SAAUxG,MAAM,EAAGmO,IAAI,EAAGD,IAAI,GAAI1G,QAAQ,IAU/EsV,QATY7N,YAAI,UAAW,CAACzI,KAAK,SAAUxG,MAAM,IAAMmO,IAAI,EAAGD,IAAI,MAUlE3L,MATU0M,YAAI,QAAS,CAACzI,KAAK,SAAUxG,MAAM,EAAGmO,IAAI,EAAGD,IAAI,KAU3DsO,IATQvN,YAAI,MAAO,CAACzI,KAAM,SAAU0I,MAAO,CAAC,0BAA2B,OAW3E,OACI,kBAAC,IAAD,CAAQ5B,GAAI,CAACyN,WAAU,EAAOC,wBAAwB,GAC9Ctb,MAAO,CAAC8E,MAAM,OAAOD,OAAO,sBAC5BiJ,OAAQ,CAACvM,SAAS,CAAC,EAAE,EAAE,KAAMga,IAAI,KACjCnB,WAAYnb,OAAOuc,iBACnBC,UAAY,YAAe,IAAb7N,EAAY,EAAZA,GACVA,EAAG8N,eAAiBnb,eACpBqN,EAAG+N,YAAiBpb,0BAE5B,kCAAcyN,UAAW,MACzB,gCAAYzM,SAAU,CAAC,IAAK,IAAK,KAAMyM,UAAW,MAClD,gCAAYzM,SAAU,EAAE,KAAM,KAAM,KAAMyM,UAAW,EAAGpO,MAAM,QAC9D,gCAAY2B,SAAU,CAAC,GAAG,IAAK,GAAIO,KAAM,CAAC,IAAK,MAC/C,kBAAC,IAAD,KACI,kBAAC,GAAW/B,MAKfoe,GAAU,0J,SCnCVC,GAAQ,SAAC,GAC4D,IAAD,IAA7EtB,WAA6E,MAH9D,iEAG8D,MAA9Djd,YAA8D,aAAnDC,YAAmD,MAA9C,GAA8C,MAA1CyB,gBAA0C,MAAjC,CAAC,GAAG,GAAG,GAA0B,MAAvBF,aAAuB,MAAjB,CAAC,EAAE,EAAE,GAAY,IAC7Cgd,YAAUC,KAAYxB,GAA/CyB,EADsE,EACtEA,WAAYC,EAD0D,EAC1DA,MACblS,EAAQpM,iBAAY,MACpBue,EAAUve,iBAAY,MAHiD,EAI7D0H,oBAAc,kBAAM,IAAIrH,iBAAqB,SAAtDme,EAJsE,oBAKvEC,EAAY,CAACjf,EAAE6B,EAAS,GAAG5B,EAAE4B,EAAS,IAkB5C,OAjBAJ,aAAS,WAAeX,GAAS,IAAD,EAArBsN,EAAqB,EAArBA,OACP4Q,EAAME,OAAOpe,IACV,OAAE8L,QAAF,IAAEA,GAAF,UAAEA,EAAOrL,eAAT,aAAE,EAAgBM,YACrB+K,EAAMrL,QAAQM,SAAS7B,EAAIif,EAASjf,EACpC4M,EAAMrL,QAAQM,SAAS6N,EAAIuP,EAAShf,EACpCmO,EAAO+Q,4BACH/Q,EAAOgR,OAAO,IAAIve,UAAcoe,EAASjf,EAAE,EAAE,EAAEif,EAAShf,EAAE,SAElEc,qBAAU,WACN,IAAMse,EAAYjf,EAAO,GAAK,EAAI,EAMlC,OALA2e,EAAQxd,QAAU,CAAE+d,KAAMN,EAAMO,WAAWV,EAAWQ,GAAYzS,EAAMrL,UACxEwd,EAAQxd,QAAQ+d,KAAKpB,OACrBa,EAAQxd,QAAQ+d,KAAKE,OAAS,EAC9BT,EAAQxd,QAAQ+d,KAAKG,UAAY,EACjCC,QAAQC,IAAIZ,EAAQxd,QAAQ+d,MACrB,kBAAMT,EAAWvK,SAAQ,SAACsL,GAAD,OAAcZ,EAAMa,YAAYD,SACjE,CAACf,EAAWG,EAAM5e,IAChB0e,EAGD,yCAAO5c,IAAK0K,GAAW,CAAC/K,WAAUF,SAAlC,CAA0Cme,QAAS,OACjD,2BAAOld,SAAU,CAACZ,KAAKa,GAAG,EAAE,EAAE,GAAIlB,MAAO,CAAC,IAAK,IAAK,MAClD,+BAAWoe,OAAQjB,EAAK,gBACxB,iCAAave,SAAUue,EAAK,YAAgBve,SACxCyf,SAAUlB,EAAK,YAAgBkB,SAC/Bpd,SAAU,EAAEZ,KAAKa,GAAG,EAAE,EAAE,GAAIlB,MAAO,CAAC,IAAK,IAAK,MAC9C,uCACIQ,OAAO,WAAWjC,MAAOC,EAAK,QAAS,EACvCmd,YAAY,EAAO2C,UAAQ,KAEnC,iCAAa1f,SAAUue,EAAK,aAAiBve,SACzCyf,SAAUlB,EAAK,aAAiBkB,SAChCpd,SAAU,EAAEZ,KAAKa,GAAG,EAAE,EAAE,GAAIlB,MAAO,CAAC,IAAK,IAAK,MAC9C,uCACIQ,OAAO,WAAWjC,MAAOC,EAAK,EAAS,SACvCmd,YAAY,EAAO2C,UAAQ,OAjBhC,MC/BFC,GAAQ,SAAC,GAA0C,IAAD,IAAvC/f,YAAuC,aAA3BC,YAA2B,MAAtB,GAAsB,MAAlB+f,aAAkB,MAAZ,GAAY,EACrDC,EAAO5f,iBAAY,MACnB6f,EAAQ1f,mBAAQ,kBAAM,IAAIE,aAAkB,IAC5Cyf,EAAS9Y,uBAAY,eAAC+Y,EAAD,uDAAK,EAAEC,EAAP,uDAAW,EAAX,OAAeA,EAAIxe,KAAKse,SAASC,IAAK,IAC3DE,EAAY9f,mBAAQ,kBAAM,YAAIqI,MAAMmX,IAAQzX,KAAI,iBAAK,CACvD5G,EAAOwe,EAAO,KAAYI,QAAQJ,EAAO,IAAI,IAAKrV,GAAG,EACrD0V,OAAOL,EAAO,IAAI,GAAQM,QAAQN,EAAO,IAAI,IAAKpV,GAAG,EACrD2V,MAAOP,EAAO,KAAM,KAAMQ,QAAQR,EAAO,IAAI,UAAS,CAACA,EAAOH,IAmBlE,OAlBA1e,aAAS,WACLgf,EAAUnM,SAAQ,SAACyM,EAAU5f,GAAO,IAC1BW,EAAgDif,EAAhDjf,EAAG6e,EAA6CI,EAA7CJ,OAAQE,EAAqCE,EAArCF,MAAOH,EAA8BK,EAA9BL,QAASE,EAAqBG,EAArBH,QAASE,EAAYC,EAAZD,QAC1Chf,EAAIif,EAASjf,GAAK+e,EAAQ,EAC1B,IAAMxU,EAAIrK,KAAKwJ,IAAI1J,GAAKE,KAAKC,IAAQ,EAAJH,GAAS,GACpC8Q,EAAI5Q,KAAKC,IAAIH,GAAKE,KAAKwJ,IAAQ,EAAJ1J,GAAS,GACpCyD,EAAIvD,KAAK8M,IAAI,IAAK9M,KAAKwJ,IAAI1J,GAAK1B,EAAO,IAC7CigB,EAAMxe,SAASyC,IACVyc,EAAS9V,GAAG,GAAIoB,EAAIqU,EAAU1e,KAAKwJ,IAAK1J,EAAE,GAAI6e,GAAW3e,KAAKC,IAAM,EAAFH,GAAK6e,EAAQ,GAC/EI,EAAS7V,GAAG,GAAI0H,EAAIgO,EAAU5e,KAAKC,IAAKH,EAAE,GAAI6e,GAAW3e,KAAKwJ,IAAM,EAAF1J,GAAK6e,EAAQ,GAC/EI,EAAS7V,GAAG,GAAI0H,EAAIkO,EAAU9e,KAAKwJ,IAAK1J,EAAE,GAAI6e,GAAW3e,KAAKC,IAAM,EAAFH,GAAK6e,EAAQ,IAEpFN,EAAM1e,MAAM2C,IAAIiB,EAAGA,EAAGA,GACtB8a,EAAMW,eACNZ,EAAK7e,QAAQ0f,YAAY9f,EAAGkf,EAAMa,WAEtCd,EAAK7e,QAAQ4f,eAAevf,aAAc,KAG1C,oCACI,mCAAeM,IAAKke,EAAMhe,KAAM,CAAC,KAAK,KAAK+d,IACvC,0CAAsBhe,OAAO,WAAWC,KAAM,CAAC,EAAG,GAAI,MACtD,uCAAmBD,OAAO,WAAWjC,MAAOC,EAAK,EAAS,cC7B7DihB,GAAgB,WACzB,IAAMjhB,EAAQ+Q,YAAW,OAAS,CAAC9J,KAAM,UAAWxG,OAAO,IACrDR,EAAQ8Q,YAAW,OAAS,CAAC9J,KAAM,SAAWxG,MAAO,EAAGmO,IAAK,EAAGD,IAAM,IACtEuS,EAAQnQ,YAAW,QAAS,CAAC9J,KAAM,SAAWxG,MAAO,EAAGmO,IAAK,EAAGD,IAAK,KACrE0M,EAAQtK,YAAW,WAAY,CAAC9J,KAAK,QAASxG,MAAO,CAACZ,EAAE,EAAEC,EAAE,GAAImc,OAAM,EAAMkF,SAAS,KAC3F,OACI,kBAAC,IAAD,CAAQpT,GAAI,CAACyN,WAAU,EAAOC,wBAAuB,GAC7Ctb,MAAO,CAAC8E,MAAM,OAAQD,OAAO,sBAC7BiJ,OAAQ,CAACvM,SAAS,CAAC,GAAG,EAAE,IACxB6Y,WAAYnb,OAAOuc,iBACnBC,UAAW,YAAQ,EAAN7N,GAAU8N,eAAenb,iBAC1C,yBAAKsB,OAAO,MAAMC,KAAM,CAAC,SAAU,GAAI,MACvC,qCAAiBkM,UAAW,IAAMzM,SAAU,CAAC,EAAG,GAAI,KACpD,sCAAkBA,SAAU,EAAE,EAAG,GAAI,GAAI0M,YAAU,IACnD,kBAAC,WAAD,CAAUE,SAAU,MAChB,kBAAC,GAAU,CAACtO,OAAKC,OAAKyB,SAAS,CAAC2Z,EAAIxb,GAAG,GAAGwb,EAAIvb,GAAG0B,MAAM,CAAC0f,EAAIA,EAAIA,KAChE,kBAAC,GAAW,CAAClhB,OAAKC,YCf5BmhB,GACH,CAAC,kCACA,mCACSC,GAAS,SAAC,GAIhB,IAAD,IAHFC,eAGE,MAHM,wCAGN,MAFFC,kBAEE,MAFSH,GAAW,GAEpB,MADFI,cACE,MADK,EACL,EAD+BthB,GAC/B,EADQF,KACR,EADmBC,KACnB,gEACIwM,EAAUpM,iBAAY,MACtBohB,EAAUjD,YAAeC,KAAY6C,GACrCI,EAAUlD,YAAU9d,gBAAqB6gB,GACzC3C,EAAUve,iBAAY,MAJ1B,EAKc0H,oBAAc,kBAAM,IAAIrH,iBAAqB,SAAtDme,EALL,oBAcF,OARA5T,IAAMrK,WAAU,WACZ,IAAMqR,GAAO,EAAEuP,GAAUA,EAAOC,EAAK/C,WAAW/V,OAAS6Y,EAAQ,EAC3DrC,EAAON,EAAMO,WAAWqC,EAAK/C,WAAWzM,GAAMxF,EAAMrL,SAG1D,OAFAwd,EAAQxd,QAAU,CAAE+d,QACpBP,EAAQxd,QAAQ+d,KAAKpB,OACd,kBAAM0D,EAAK/C,WAAWvK,SAAQ,SAACsL,GAAD,OAAcZ,EAAMa,YAAYD,SACtE,CAAC+B,EAAQC,EAAK/C,WAAYG,IAC7Bvd,aAAS,SAACwL,EAAGnM,GAAWke,EAAME,OAAOpe,MAEjC,yCAAOoB,IAAK0K,GAAWvM,EAAvB,CAA8Byf,QAAS,OACnC,2BAAOne,MAAO,CAAC,IAAI,IAAI,KAAMiB,SAAU,CAAC,IAAI,EAAE,GAAIf,SAAU,CAAC,GAAG,EAAE,IAC9D,+BAAWke,OAAQ6B,EAAK9C,MAAL,gBACnB,iCACIve,SAAUqhB,EAAK9C,MAAL,KAAmBzb,SAAS,GAAG9C,SACzCyf,SAAU4B,EAAK9C,MAAL,KAAmBzb,SAAS,GAAG2c,UACzC,uCAAmB7d,OAAO,WAAWuG,IAAKmZ,EAAS5B,UAAQ,KAE/D,iCACI1f,SAAUqhB,EAAK9C,MAAL,KAAmBzb,SAAS,GAAG9C,SACzCyf,SAAU4B,EAAK9C,MAAL,KAAmBzb,SAAS,GAAG2c,SACzCvf,SAAUmhB,EAAK9C,MAAL,KAAmBzb,SAAS,GAAG5C,WAE7C,iCACIF,SAAUqhB,EAAK9C,MAAL,KAAmBzb,SAAS,GAAG9C,SACzCyf,SAAU4B,EAAK9C,MAAL,KAAmBzb,SAAS,GAAG2c,SACzCvf,SAAUmhB,EAAK9C,MAAL,KAAmBzb,SAAS,GAAG5C,cCvChDqhB,GAAiB,WAC1B,IAAM3hB,EAAO0P,YAAI,OAAS,CAACzI,KAAM,UAAWxG,OAAO,IAC7CR,EAAOyP,YAAI,OAAS,CAACzI,KAAM,SAAWka,SAAS,EAAG1gB,MAAO,IACzDygB,EAAOxR,YAAI,QAAS,CAACzI,KAAM,SAAWka,SAAS,EAAG1gB,MAAO,IACzDmhB,EAAOlS,YAAI,KAAS,CAACzI,KAAM,QAAWka,SAAS,EAAG1gB,MAAO,CAACZ,EAAE,EAAEC,EAAE,GAAImc,OAAM,IAC1Enc,EAAO4P,YAAI,IAAS,CAACzI,KAAM,SAAWka,SAAS,EAAG1gB,MAAO,EAAGmO,KAAK,IACjEiT,EAAOnS,YAAI,MAAS,CAACzI,KAAM,QAAWka,SAAS,EAAG1gB,MAAO,CAACZ,EAAE,EAAEC,EAAE,GAAImc,OAAM,IAC1E6F,EAAOpS,YAAI,KAAS,CAACzI,KAAM,SAAWka,SAAS,EAAG1gB,MAAO,EAAGmO,KAAK,IACjE4S,EAAQ9R,YAAI,SAAa,CAACzI,KAAM,SAAWka,SAAS,GAAI1gB,MAAO,IACrE,OACI,kBAAC,IAAD,CAAQsN,GAAI,CAACyN,WAAU,EAAOC,wBAAuB,GAC7Ctb,MAAO,CAAC8E,MAAM,OAAQD,OAAO,sBAC7BuV,WAAYnb,OAAOuc,iBACnBC,UAAW,YAAQ,EAAN7N,GACN8N,eAAenb,iBAG1B,qCAAiByN,UAAW,IAAMzM,SAAU,CAAC,EAAG,GAAI,KACpD,sCAAkBA,SAAU,EAAE,EAAG,GAAI,GAAI0M,YAAU,IACnD,kBAAC,WAAD,CAAUE,SAAU,MAChB,kBAAC,GAAW,CACRtO,OAAKC,OAAKuhB,SAASA,EACnB9f,SAAS,CAAEkgB,EAAG/hB,EAAIC,EAAI8hB,EAAG9hB,GACzB2C,SAAS,CAACof,EAAI/hB,EAAG+hB,EAAIhiB,GAAGiiB,GACxBtgB,MAAS,CAAC0f,EAAIA,EAAIA,QAKzBa,GAAU,4RC9BVtT,GAAU,kCAAIgP,SAASuE,eAAe,eAA5B,aAAI,EAAiC7V,OAAO,CAACxH,IAAI,EAAEqE,KAAK,EAAEiZ,SAAS,YAC7E/O,GAAa,CAAEC,SAAS,kBAAM1E,OAI9ByT,GAAyC,CAClDC,QAAO,EAAMC,OAAO,GAAIzO,SAAU,qBAAEF,QAAqB,CAAC,OAAO,OAAO,QAAQ,IAChFD,OAAO,qBAAEH,IAAeN,SAAU,gBAAEM,EAAF,EAAEA,GAAG+O,EAAL,EAAKA,OAAL,MAC9B,CAAC,SAAD,OAAc/O,EAAGA,EAAG,IAAI,IAAxB,oBACcA,EAAGA,EAAG,IAAI,IACf,OAAT+O,EAAA,yBAEKC,GAAO,yCAAG,WAAOpF,GAAP,4BAAA/Q,EAAA,6DAAeoW,EAAf,+BAAuB,CAAC,eAAe,oBAAvC,kBACpBC,KAAMjH,IAAI2B,EAAIla,KAAM,CAACuf,YACfE,MAAK,SAAAC,GACF,IAAIA,GAAoB,MAAbA,EAAIL,OACX,MAAM,IAAIM,MAAM,eACpB,OAAOD,EAAIE,SALA,2CAAH,sDAOPC,GAAM,yCAAG,WAAO3F,EAAS4F,GAAhB,4BAAA3W,EAAA,6DAA6BoW,EAA7B,+BAAqC,CAAC,eAAe,oBAArD,kBACnBC,KAAMO,KAAK7F,EAAIla,KAAM8f,EAAM,CAACP,YACtBE,MAAK,SAACC,GACH,GAAIA,EAAIL,OAAO,MAAQK,EAAIE,KAAKI,MAC5B,MAAM,IAAIL,MAAM,eACpB,MAAO,CAACM,SAASH,EAAKG,SAAUC,UAAUR,EAAIE,KAAKI,WALzC,2CAAH,wDASNG,GAAW,CACpB,CAAC,aAAa,OAAO,OAAO,QAC5B,CAAC,aAAa,QAAQ,QAAQ,SAC9B,CAAC,OAAO,SAAS,QAAQ,UACzB,CAAC,OAAO,SAAU,QAAS,UAGzBC,GAAS,eAACvN,EAAD,uDAAK,GAAG1K,EAAR,uDAAY,GAAZ,OAAmBA,KAAO0K,EAAOA,EAAY1K,GAAO,IACtDkY,GAAW,CACpBrQ,SAAU,oBAAEM,GAAF,iCAAK,GAAL,IACVgQ,KAAO,oBAAEhQ,UAAF,MAAK,GAAL,MAAQxC,MAAR,OAAsBsS,QAAtB,MAAc,GAAd,EAAoC,OAAS1R,GAAM4B,KAC1DnD,KAAO,oBAAEmD,UAAF,MAAK,GAAL,MAAQxC,MAAR,OAAsBsS,QAAtB,MAAc,GAAd,EAAoC,OAAS1R,GAAM4B,KAC1DxC,MAAOmD,OAAOuE,OAAP,MAAAvE,OAAM,CAAQ,IAAR,mBAAeA,OAAOC,QAAQqP,GAAO/a,KAAI,mCAAEkR,EAAF,KAAIvP,EAAJ,4BAAYuP,EAAGvP,UCR5DqZ,GAAU,SACnBrjB,GAE6C,IAD7CgI,EAC4C,uDADR,GAEjB,oBAARhI,IAAoBA,EAASA,KACpB,oBAATgI,IAAoBA,EAASA,KACxC,IAAMsb,EAAUnjB,iBAAM,2BAAc+S,IAAgBlT,IAC9CujB,EAAUpjB,iBAAM,2BAAcqjB,IAAgBxb,IAJR,EAKzBH,mBAAmBgM,GAASyP,EAAQpiB,UALX,mBAKrCiM,EALqC,KAKhClJ,EALgC,KAMtCmJ,EAAUjG,uBAAY,SAACW,GACN,oBAARA,IACPA,EAAQA,EAAMwb,EAAQpiB,UAC1BoiB,EAAQpiB,QAAR,2BAAsBoiB,EAAQpiB,SAAY4G,GAC1C7D,GAAI,SAAA0H,GACA,IAAM8X,EAAU5P,GAASyP,EAAQpiB,SACjC,OAAIyK,EAAIkH,WAAW4Q,EAAQ5Q,UAE3B3T,OAAOwkB,QAAQC,UAAU,GAAG,GACxBF,EAAQ5Q,oBAAoBlK,MACxB8a,EAAQ5Q,SAAS,IAAI,GACrB4Q,EAAQ5Q,UAAa,IAJlB4Q,OAOhB,CAACxf,IAKJ,OAJAvD,qBAAU,WAAO,IACNuS,EAAYsQ,EAAQriB,QAApB+R,SACW,oBAAXA,GAAyBA,MACjC,CAAC9F,EAAKgG,KACF,CAAChG,EAAMC,ICzDZ3H,GAA4B,CAC9BhB,IAAM,CAACjD,SAAS,WAAWiI,WAAW,KAAKV,UAAU,SAAS8F,UAAU,QACxE+U,KAAM,CAACpiB,SAAS,WAAWsD,OAAO,SAClC+e,KAAM,CAACriB,SAAS,WAAWkE,SAAS,SAASX,MAAM,OAAOD,OAAO,QACjEgf,KAAM,CAACtiB,SAAS,WAAWuD,MAAM,OAAON,IAAI,EAAEqE,KAAK,EAAEQ,OAAO,EAAE9E,QAAQ,IAEpEuf,GAAc,SAAC/jB,GAAD,OAAW,kBAAC,GAAD,eAAM0O,KAAM,EAAGzO,MAAOwF,GAAOoe,KAAM5a,KAAM,IAAQjJ,KCC1EyF,GACG,CAACjE,SAAS,QAAQiD,IAAI,EAAEqE,KAAK,EAAE/D,MAAM,OAAOD,OAAO,Q,8BCT/Ckf,GAAc,SAAC,GAGjB,IAAD,IAFF5gB,YAEE,aAFU6gB,eAEV,MAFkB,KAElB,MAFwBnkB,YAExB,aAFoCC,YAEpC,MAFyC,EAEzC,EADFiD,EACE,EADFA,SACE,IADQnD,aACR,MADc,GACd,EADqBG,EACrB,mEACA+E,EAAQzE,mBAAQ,kBAAI,IAAMP,IAAK,CAACA,IADhC,EAEgBgE,qBAAU,iBAAK,CAACpE,EAAE,EAAEC,GAAGmF,EAAMzD,MAAM,MAFnD,mBAECyG,EAFD,KAES9D,EAFT,KAGNvD,qBAAU,WAAK0C,GAAMa,EAAI,CAACtE,EAAE,EAAEC,EAAE,EAAE0B,MAAM,MAAM,CAAC8B,EAAMa,IACrD,IAAMkG,EAAMhD,uBAAa,WAAgB,IAAf9C,EAAc,uDAAX,EAAEC,EAAS,uDAAN,EAC9BL,EAAI,CAACtE,EAAE0E,EAAGU,EAAOnF,GAAG0E,EAAG,GAAGS,EAAOzD,MAAM,IACvC2iB,GAAWpM,YAAW,kBAAIoM,MAAW,SAAA5f,EAAI,GAAJ,SAAMC,EAAI,MAChD,CAAC2f,EAASlf,EAAOd,IACdC,EAAOoG,YAAW,CACpBC,QAAU,gBAAEC,EAAF,EAAEA,SAAF,OAAgBvG,EAAI,CAAC3C,MAAMkJ,EAAS,GAAI,KAClDC,OAAS,YAAuD,IAArDlG,EAAoD,EAApDA,KAAKmG,EAA+C,EAA/CA,KAA+C,gBAA1CtG,KAA0C,GAApCC,EAAoC,KAAjCC,EAAiC,qBAA7BqG,SAA6B,GAAnBC,EAAmB,KAAhBC,EAAgB,KAAZC,EAAY,EAAZA,OAE/C,OADKD,EAAU,IAAN9F,GAAgB,GAANA,EAAS8F,IAAOC,GAAQA,IACtCvG,EACG,SAAAqG,EAAI,GAAE,SAAA7F,EAAO,GAAE,GAAG,SAAAV,EAAI,GAAJ,SAAMC,EAAI,GAAE,GAChC6F,EAAM9F,EAAGC,GACTL,EAAI,CAACtE,EAAE,EAAEC,EAAE,EAAE0B,MAAM,IAHP2C,EAAI,CAACtE,EAAE+K,EAAKE,EAAG,EAAEhL,EAAE8K,EAAKG,EAAG,OAM/CnD,EAAOpH,mBAA0B,kBAAIid,SAASuE,eAAe,UAAQ,IACrE7hB,EAAQK,mBAAa,+BACvBwI,KAAK,EAAG/D,MAAM,OAASmB,QAAQ,OAAOiG,eAAe,SACrD1H,IAAI,EAAGK,OAAO,OAAQtD,SAAS,QAAWgK,WAAW,SACrD/B,WAAW,KAAM5J,MAAMA,GAAOC,EAAK,UAAU,OAC7C8I,OAAO,IAAI/D,WAAW,QAAD,OAAS/E,EAAK,WAAW,QAAzB,SAA2CE,EAAMC,SACtE,CAACH,EAAMD,EAAOG,EAAMC,QACxB,OAAOmD,EAAO8gB,uBACV,yBAAKjkB,MAAOA,EAAOkD,QAAS,kBAAI8gB,GAASA,MACrC,kBAAC,WAAEjf,IAAH,eAAO/E,MAAK,aAAGuB,SAAS,YAAcuG,IAAa7D,IAAnD,CACIf,QAAS,SAAAuG,GAAC,OAAEA,EAAEC,qBACb3G,IAGX0E,GAAuB,MCrCvBjC,GACI,CAACjE,SAAS,WAAWgD,QAAQ,MAAMoE,OAAO,EAAEvD,UAAU,wBAOnD8e,GAAc,SAAdA,EAAe,GAGrB,IAAD,IAFF3iB,gBAEE,MAFO,CAAC7B,EAAE,EAAEC,EAAE,EAAEsL,EAAEvJ,KAAKa,GAAG,GAE1B,MAF8BiF,aAE9B,MAFoC,EAEpC,MAFuCwB,YAEvC,MAF4C,MAE5C,MADFlJ,YACE,MADG,EACH,MADM+W,cACN,SADsB9W,EACtB,2DACIyI,EAASnI,mBAAS,wBAAM,iBAACN,QAAD,IAACA,OAAD,EAACA,EAAOgD,gBAAR,eAA0ByF,SAAQ,IAAG,CAACzI,IAC9DokB,EAAWjkB,iBAAQwI,MAAMF,GAAQyJ,KAAK1Q,IACtC0P,EAAK/J,uBAAY,kBAAM,WAAU,IAATrG,EAAQ,uDAAN,EACtBoK,EAAI1J,EAAS0J,EAAE,EAAKvJ,KAAKa,GAAG,GAAmB,IAAZiG,EAAO3H,EAAE,GAAM,IAAe,IAAV2H,EAAO,GAAM,GAAG9G,KAAKa,GAAG,EAC/E7C,EAAImX,EAAU,GAAG7N,EAAKlJ,EAAK4B,KAAKwJ,IAAID,GAAK,EACzCtL,EAAIkX,GAAU,GAAG7N,EAAKlJ,EAAK4B,KAAKC,IAAIsJ,GAAK,EAE/C,OADAkZ,EAASljB,QAAQJ,GAAK,CAACnB,IAAEC,GAAGA,EAAEsL,KACvB,CAACvL,IAAGC,IAAG0B,MAAMwV,EAAO,EAAE,MAC9B,CAACA,EAAQrO,EAAQjH,EAAS0J,EAAGjC,EAAMlJ,IATpC,EAUqB4X,qBAAYlP,EAAQyI,KAVzC,mBAUK0G,EAVL,KAUc3T,EAVd,OAW8B4D,mBAAUc,MAAMF,GAAQyJ,MAAK,IAX3D,mBAWKmS,EAXL,KAWeC,EAXf,KAYIC,EAASpd,uBAAY,SAACuC,EAAGsB,GAC3BsZ,GAAY,SAAAld,GAAC,OAAI0M,OAAOuE,OAAO,GAAIjR,EAAlB0M,OAAA,KAAAA,CAAA,GAAuB9I,GAAM5D,EAAE4D,QAChDtB,EAAEC,oBACJ,IACI3G,EAAW1C,mBAAQ,kBAAM8H,WAASC,IAAKrI,EAAMgD,UAAU,SAACsF,EAAM0C,GAAS,IAAD,IAExE,OADA/G,EAAIiN,KACG5I,IAAK,UAAKA,SAAL,iBAAI,EAAgBtI,aAApB,aAAI,EAAuBgD,UACnC+H,IAAMwN,aAAajQ,EAAc,CAACtF,SAC9B,kBAACmhB,EAAD,aAAYnZ,MAAK8L,OAAOA,GAAQuN,EAASrZ,GACrCvD,MAAMA,EAAM,EAAGjG,SAAS4iB,EAASljB,QAAQ8J,GACzC/B,KAAKA,GAAM,EAAY,IAATxB,EAAM,IACpBlE,SAAS,GAAGxD,GAAM,EAAY,IAAT0H,EAAM,KACtBa,EAActI,OAAO,OAElCsI,OACJ,CAAC+b,EAAU5c,EAAOyJ,EAAI4F,EAAQ9W,EAAMgD,SAAUiG,EAAMhF,EAAKlE,IAC7D,OACI,yBAAKE,MAAO,CAACuB,SAAS,QAAQsH,KAAKtH,EAAS7B,EAAE6kB,OAAOhjB,EAAS5B,IACzDgY,EAAQvP,KAAI,SAACN,EAAQiD,GAAT,OACT,kBAAC,WAAShG,IAAV,CAAcgG,IAAG,UAAKvD,EAAL,YAAcuD,GAAO/K,MAAK,2BAAM8H,GAAWtC,IACxDtC,QAAS,SAAAuG,GAAC,OAAE6a,EAAO7a,EAAGsB,KACpBhI,EAAiBgI,SCtCjCvF,GACG,CAACoJ,UAAU,OAAOnJ,SAAS,UCM9B+e,I,4BACF,kBAAC,IAAD,KACI,kBAAC,IAAD,KACI,kBAAC,IAAD,KACI,kBAAC,IAAD,KACI,kBAAC,IAAD,CAAUC,KAAK,IAAQC,UAAWzX,GAAM0X,OAAK,IAC7C,kBAAC,IAAD,CAAUF,KAAK,QAAQC,UAAWzX,GAAO0X,OAAK,IAC9C,kBAAC,IAAD,CAAUF,KAAK,QAAQC,ULVpB,WAAO,IAAD,EACDtX,YAAgB,CAACC,KAAK,EAAGC,GAAG,EAAGC,GAAG,IADjC,mBAClB1N,EADkB,KACZ2N,EADY,OAEDJ,YAAgB,CAACC,KAAK,EAAGC,GAAG,EAAGC,GAAG,MAFjC,mBAElBzN,EAFkB,KAEZ2N,EAFY,OAGD2V,GAAkBH,GAAUlQ,IAH3B,mBAGlB7F,EAHkB,KAGZC,EAHY,OAIDC,YAAQ,CAACwX,GAAG,EAAErX,GAAG,GAAG,MAJnB,mBAIlBsX,EAJkB,KAIZC,EAJY,KAKzB,OACA,yBAAK9kB,MAAK,2BAAMwF,GAAOhB,KAAb,IAAiBI,WAAW/E,EAAK,OAAO,UAC7B,SAAZqN,EAAKyG,MAAezG,EAAKgW,MAAM,kBAAChW,EAAKgW,KAAN,OACnB,SAAZhW,EAAKyG,MAAezG,EAAK6C,MAAM,oCAAG7C,EAAK6C,OAE5C,kBAAC,GAAD,CAAO0G,MAAOvJ,EAAKgW,KAAK,CAAC2B,GAAM,GAAG,CAAC,EAAE,GAAIpW,IAAK,GAAIoK,UAAWrT,GAAOme,MAChE,kBAAC,GAAU,CAAC9jB,OAAKC,OAAK+C,MAAM,QACxB,kBAAC,GAAa,CAAChD,OAAKC,QAAQoN,EAAKgW,MAC7B,kBAAC,IAAD,CACI6B,MAAOzT,GAAMpE,EAAKgG,IAAK8R,OAAO,WAC9BhlB,MAAK,yBAAG4E,WAAW/E,EAAK,UAAU,QAAU2F,GAAOqe,MAA9C,IACGjkB,MAAMC,EAAK,UAAU,OAAOyD,SAAc,GAALxD,EAAQJ,EAAE,EAAEC,EAAE,IAC3DslB,WAAW,KAEnB,kBAAC,GAAa,CAACplB,OAAKC,QAChB,kBAAC,EAAD,cAAY,CAACD,OAAKC,KAAKA,EAAK,EAAE2H,KAAKyF,EAAKgG,GAAG,EAAE,GAChChG,EAAKgG,GAAG,CAAC5P,SAAS,QAAQ,GADvC,CAEQqE,SAAU,CAACpD,QAAQ2I,EAAKgW,KAAK,GAAGpjB,EAAK,IAAIA,GACzC+G,QACA,0BAAM3D,QAAS,kBAAMiK,EAAQ,CAAC+F,GAAG,OAAjC,UACF6P,GAAS3a,KAAI,SAAC8c,EAAIrkB,GAAL,OAAWqkB,aAAexc,MACrC,0BAAMqC,IAAKlK,GAAKqkB,EAAI9c,KAAI,SAAC8K,EAAIpS,GAAL,OACxB,0BAAMiK,IAAKmI,EAAIhQ,QAAS,kBAAMpC,GAAGqM,EAAQ,CAAC+F,SAAOA,OACjD,0BAAMnI,IAAKlK,EAAIqC,QAAS,kBAASiK,EAAQ,CAAC+F,GAAGgS,MAAQA,SAIrE,kBAAC,GAAU,CAACrlB,OAAKC,OAAK+C,MAAM,QACxB,kBAAC,GAAa,CAAChD,OAAKC,QACfoN,EAAKgW,MAAQ,kBAAChW,EAAKgW,KAAN,OAEhBhW,EAAK6C,MAAQwF,GAAGJ,IAAIjI,EAAK6C,OAC3B,kBAAC,GAAa,CAAClQ,OAAKC,QAChB,kBAAC,GAAS,CAACD,OAAKC,OAAKiQ,KAAK7C,EAAK6C,UAI3C,kBAAC,EAAU,CAACjQ,QACR,uBAAGE,MAAO,CAACJ,MAAM,WAAYgD,KAAK,KAAlC,QACA,uBAAG5C,MAAO,CAACJ,MAAM,WAAYgD,KAAK,SAAlC,QACA,uBAAG5C,MAAO,CAACJ,MAAM,WAAYgD,KAAK,SAAlC,SAEJ,kBAAC,GAAU,CAAC9C,QACR,yBAAKoD,QAAS,kBAAIsK,GAAQ,SAACrG,GAAD,MAAU,CAACmG,GAAGnG,EAAEoG,GAAGA,GAAGpG,EAAEmG,SAAQzN,EAAK,eAAK,gBACpE,yBAAKqD,QAAS,kBAAIuK,GAAQ,SAACtG,GAAD,MAAU,CAACmG,GAAGnG,EAAEoG,GAAGA,GAAGpG,EAAEmG,SAAQxN,EAAK,GAAG,eAAK,gBACvE,yBAAKoD,QAAS,kBAAI4hB,GAAQ,SAAC3d,GAAD,OAASA,EAAEoG,GAAG,CAACqX,GAAG,EAAEO,GAAG,EAAE5X,GAAG,GAAG,CAACqX,GAAG,EAAEO,GAAG,IAAI5X,GAAG,EAAE,QAAMsX,EAAK,eAAK,gBAC3F,yBAAK3hB,QAAS,kBAAIiK,GAAQ,SAAAhG,GAAC,MAAG,CAACwM,KAAc,SAATxM,EAAEwM,KAAc,OAAO,SAAoB,SAAZzG,EAAKyG,KAAc,eAAK,gBAC3F,yBAAKzQ,QAAS,kBAAIiK,GAAQ,SAAAhG,GAAC,MAAG,CAACwM,KAAc,SAATxM,EAAEwM,KAAc,OAAO,SAAoB,SAAZzG,EAAKyG,KAAc,eAAK,iBAE/F,kBAAC,IAAD,KACI,0CAAgBrC,GAAMpE,EAAKgG,KAC3B,0BAAMkS,IAAI,YAAYxiB,KAAK,0BK7CnB,kBAAC,IAAD,CAAU6hB,KAAK,QAAQC,UDZnB,WAAM,MAEFtB,GAAoBrB,GAAYhP,IAF9B,mBAEnB7F,EAFmB,KAEbC,EAFa,OETP,SACnBkY,GAYE,IAXFC,EAWC,uDAX2B,KAC5BC,EAUC,uDAV2B,KAC5BC,EASC,uDATmC,GAUhCjQ,GAAGM,IAAIwP,KAAaA,EAAaA,KACjC9P,GAAGJ,IAAIkQ,KAAaA,EAAa,IAAI3S,IAAI2S,IAC7C,IAAMI,EAAavlB,mBACbwlB,EAAaxlB,iBAAOolB,GACpBK,EAAazlB,iBAAOqlB,GACpBK,EAAa1lB,iBAAOslB,GACpBK,EAAa3lB,kBAAgB,GAPlC,EAQkB0H,mBAAa,MAR/B,mBAQMke,EARN,KAQW9hB,EARX,KAUDvD,qBAAU,WACF8R,GAAckT,EAAUxkB,QAASokB,KACrCI,EAAUxkB,QAAUokB,EACfQ,EAAW5kB,UACX4kB,EAAW5kB,SAAU,EACtBykB,EAAUzkB,SACVykB,EAAUzkB,QAAQwkB,EAAUxkB,SAASohB,MAAK,SAACC,GACvC1K,YAAW,WAAYiO,EAAW5kB,SAAU,IAAQ,KACpD+C,GAAI,SAAA0H,GAAG,OAAI4W,GAAO5W,YAE3B,CAAC2Z,IAKJ,IAAMU,EAAU7e,uBAAY,SAAC8e,GAAiD,IAAvCC,EAAsC,uDAAzB,KAAKC,EAAoB,uDAAP,GAClE,IAAKL,EAAW5kB,QAAhB,CACK4kB,EAAW5kB,SAAU,EACtBsU,GAAGM,IAAImQ,KAAeA,EAAYA,EAAUF,IAC5CvQ,GAAGJ,IAAI6Q,KAAeA,EAAY,IAAItT,IAAIsT,IAC1CzQ,GAAGQ,IAAIkQ,KAAeA,EAAeP,EAAUzkB,SACnD,IAAMklB,EAAcV,EAAUxkB,QAC9BwkB,EAAUxkB,QAAU+kB,EACpBN,EAAUzkB,QAAUglB,EACpBL,EAAU3kB,QAAV,2BAAwB2kB,EAAU3kB,SAAYilB,GAC1CR,EAAUzkB,SACVykB,EAAUzkB,QAAQ+kB,GAAW3D,MAAK,SAACC,GAC/B1K,YAAW,kBAAOiO,EAAW5kB,SAAU,IAAQ,KAC/C+C,GAAI,SAAA0H,GAEA,GADA0T,QAAQC,IAAI,WACP9M,GAAc4T,EAAaV,EAAUxkB,SAAU,OAAOqhB,EAFpD,MAGiBsD,EAAU3kB,QAA3B+R,gBAHA,MAGS,KAHT,EAIW,oBAAXA,GAAyBA,IAChC,IAAMoT,EAAO1a,GACRA,EAAI2a,SAAS,IAAInhB,QAAO,SAACiC,GAAD,QACxBmb,EAAI+D,SAAS,IAAIjT,MAAK,SAACnI,GAAD,OAAWA,EAAEiI,KAAK/L,EAAE+L,SAC3C,GACJ,OAAO,2BAAIoP,GAAX,IAAgB+D,QAAQ,GAAD,mBAAKD,GAAL,YAAc9D,EAAI+D,qBAGtD,CAACP,IAGEQ,EAAWpf,uBAAY,WAAwC,IAAvCqf,EAAsC,uDAAzB,KAAKL,EAAoB,uDAAP,GACpDL,EAAW5kB,UACX4kB,EAAW5kB,SAAU,EACtBsU,GAAGQ,IAAIwQ,KAAeA,EAAeZ,EAAU1kB,SACnD0kB,EAAU1kB,QAAUslB,EACpBX,EAAU3kB,QAAV,2BAAwB2kB,EAAU3kB,SAAYilB,MAE/C,IACH,MAAO,CAACJ,EAAMC,EAASO,GF9DCE,CAAQtZ,EAAKsF,KAAK,GAAI0P,IAHpB,mBAGnB4D,EAHmB,KAGbW,EAHa,OGoBP,SACnBC,EACAC,GAMa,IALbC,EAKY,uDALmBpS,GAMzBqS,EAAY3mB,iBAAYwmB,GACxBI,EAAY5mB,iBAAmBymB,GAC/Bf,EAAY1lB,iBAAM,2BAAiBsU,IAAqBoS,IAHlD,EAIgBG,aAAWnB,EAAU3kB,QAAQwT,MAJ7C,mBAILuS,EAJK,KAIIhjB,EAJJ,KAISijB,EAJT,OAKgBrf,mBAAS,CAACib,SAASmE,EAAQnE,UAAU,GAAGqE,SAAS,GAAGC,MAAM,KAL1E,mBAKLC,EALK,KAKGC,EALH,KAONC,EAAUpgB,uBAAY,WAItB,IAHF8e,EAGC,uDAHc,KACfuB,EAEC,uDAFc,KACfrB,EACC,uDADc,GACd,EAC+DU,EAAzDjS,cADN,MACa,KADb,IAC+DiS,EAA7ChS,gBADlB,MAC2B,KAD3B,IAC+DgS,EAA/B/R,iBADhC,MAC0C,KAD1C,IAC+D+R,EAAhBY,eAD/C,MACuD,KADvD,EAKD,OAHIxB,IAAiBa,EAAO5lB,QAAU+kB,GAClCuB,IAAcT,EAAU7lB,QAAUsmB,GAClCrB,IAAcN,EAAU3kB,QAAUilB,GAC9Bc,EAAQlE,WACXmE,EAAI,YAAY,CAACxC,KAAK,MAAO9P,GAAQA,IAAUE,GAAWA,KAC3DiS,EACC7lB,QAAQ4lB,EAAO5lB,QAASmmB,GACxB/E,MAAM,SAAC3N,GACJ,IAAKA,EAAKmO,WAAanO,EAAKoO,UACxB,MAAM,IAAIP,MACd5N,GAAYA,IAAY3Q,EAAI,WAAY0Q,EAAKmO,SAAU,CAAC4B,KAAK,MAC7D7P,GAAYA,IAAY5Q,EAAI,YAAY0Q,EAAKoO,UAAU,CAAC2B,KAAK,SAEhEgD,OAAM,SAAC9a,GAAD,OAAS6a,GAASA,SAC9B,CAACR,EAAQhjB,EAAIijB,EAAIG,EAAOR,IAErB5T,EAAW9L,uBAAY,YAAmB,IAAjBmH,EAAgB,EAAhBA,OAC3BgZ,GAAU,SAAAlgB,GAAC,kCAASA,GAAT,mBAAakH,EAAOqZ,KAAMrZ,EAAO/N,aAC7C,IACGoU,EAAOrU,mBAAc,iBAAO,CAC9BwiB,SAAUmE,EAAQnE,UAAW,GAAI8E,SAASX,EAAQlE,UAClDA,UAAUkE,EAAQlE,WAAW,GAAI8E,MAAO/T,OACnCC,QAAQ,CAAC+O,SAAS,OAAOqE,SAAS,OAAOC,MAAM,aAC/C/e,KAAI,mCAAEsf,EAAF,KAAO1gB,EAAP,yBACD6gB,MAAM,aAAD,OAAeH,GAAQpnB,MAAQ8mB,EAAeM,GAAOA,OAAM1gB,OAChEsF,OAAO,EAAMwb,UAAS,EAAMhhB,KAAa,aAAP4gB,EAAkB,OAAOA,EAAM1U,YACtD,aAAP0U,EAAkB,CAACK,aAAa,MAAM,CAACC,MAAM,QAAQC,QAAQ,gBAEzE,CAACjB,EAASI,EAAQpU,IACtB,MAAO,CAAC0B,EAAM4S,GHlEUY,CAAQhb,EAAKsF,KAAK,GAAIiQ,GAAQ,CAAC9N,OAAO,kBAAIxH,EAAQ,CAAC8U,OAAO,QAJxD,mBAInBvN,EAJmB,KAIb4S,EAJa,OAMF1f,mBAAiBsF,EAAK8C,UANpB,mBAMnBmY,EANmB,KAMbC,EANa,OAOFhb,YAAiB,CAACE,GAAG,EAAGC,GAAG,MAPzB,mBAOnBzN,EAPmB,KAOb2N,EAPa,OAQFL,YAAiB,CAACE,GAAG,EAAGC,GAAG,IARzB,mBAQnB1N,EARmB,KAQb2N,EARa,OASFJ,YAAQ,CAACwX,GAAG,EAAEyD,GAAG,GAAG,MAArCxD,EATmB,oBAWpB9T,EAAe1Q,mBAAQ,kBAAI,kBAAIomB,GAAQ,SAAAtf,GAAC,cAAEA,QAAF,IAAEA,OAAF,EAAEA,EAAGmhB,WAAM,CAAC7B,IACpDvjB,EAAe7C,mBAAQ,kBAAI,kBAAI8M,EAAQ,CAAC+F,GAAG,QAAQ,CAAC/F,IACpDyH,EAAevU,mBAAQ,kBAAI,kBAAI8M,GAAQ,SAAAhG,GAAC,MAAG,CAAC8a,OAAoB,KAAb9a,EAAE8a,OAAc,KAAK,UAAQ,CAAC9U,IACjFob,EAAeloB,mBAAQ,kBAAI,kBAAI8M,GAAQ,SAAAhG,GAAC,MAAG,CAAC8a,OAAkB,OAAX9a,EAAE8a,OAAc,KAAK,YAAQ,CAAC9U,IAd7D,EAeL9M,mBAAQ,WACzB,IAAML,EAAQ,CAACoF,UAAU,kBAAkByD,KAAK,MAAM2f,UAAe,GAAL1oB,GAChE,MAAO,CAAC,UAAU,cAAcsI,KAAI,SAAA3E,GAAE,OAAK,kBAAC,EAAS,CAACA,KAAG3D,OAAKE,QAAMkD,iBACrE,CAACpD,EAAKoD,IAlBiB,mBAenB2F,EAfmB,KAedpE,EAfc,KAmB1B,OACI,yBAAKzE,MAAK,2BAAMwF,IAAN,IAAkBZ,WAAW/E,EAAK,OAAO,UAAW4oB,WAAgB,IAAL3oB,KACrE,kBAAC,GAAS,CAACD,OAAKC,OAAKoD,WAArB,QACA,kBAAC,GAAD,CAAOuT,MAAOqP,EAAK,CAACjB,GAAM,GAAG,CAAC,EAAE,IAC5B,kBAAC,GAAS,CAAChlB,OAAKC,OAAK+C,MAAW,GAAL/C,EAAS2O,IAAI,GACpC,kBAAC,EAAD,cAAY,CAAC5O,OAAKC,KAAKA,EAAK,EAAE2H,KAAKyF,EAAKgG,GAAG,EAAE,GAChChG,EAAKgG,GAAG,CAAC5P,SAAS,QAAQ,GADvC,CAEItD,MAAO,CAACsD,SAAS,UACjBqE,SAAU,CAACpD,QAAQ,YAClBsgB,EAAO,GAAKiB,GAAQA,EAAKO,mBAAmB3d,OAASod,EAAKO,QACtDje,KAAI,SAAAiM,GAAC,MAAI,CAAQ,OAAP8T,EAAA,OAAa9T,QAAb,IAAaA,OAAb,EAAaA,EAAGqU,QAAhB,OAA0BrU,QAA1B,IAA0BA,OAA1B,EAA0BA,EAAGsU,QAAStU,EAAEnB,GAAG,OACrDhO,QAAO,gBAAEqM,EAAF,0BAA0B,kBAAPA,GAAoC,MAAjBA,EAAKqX,OAAO,MACzDxgB,KAAI,uCAAEmJ,EAAF,KAAO2B,EAAP,WAAe,QAAC3B,QAAD,IAACA,GAAD,UAACA,EAAMqX,cAAP,iBAAC,EAAczV,MAAM,MAAM,UAA3B,aAAC,EAA8B+B,QAAQ,OAAQ,IAAKhC,MACvE9K,KAAI,mCAAEmJ,EAAF,KAAO2B,EAAP,YAAe,0BAAMnI,IAAKmI,GAAK3B,QAGhD,oCACMuU,GAAQA,EAAKO,mBAAmB3d,OAClC,kBAAC,GAAWwE,EAAKmG,OAAO,GAAG,CAACvT,OAAK+I,OAAKpE,SACjCqhB,EAAKO,QAAQje,KAAI,oBAClBsgB,eADkB,MACV,GADU,MAElBC,eAFkB,MAEV,GAFU,MAEFzV,UAFE,MAEC,GAFD,SAGlB,yBAAKnI,IAAKmI,GACN,kBAAC,GAAD,2BAAchG,EAAKmG,OAAO,CAAC7E,IAAI,IAAItL,QAAQ,kBAAIiK,EAAQ,CAAC+F,GAAGA,EAAG,OAAM,CAACpT,SAArE,IAA2ED,OAAKgD,MAAW,GAAL/C,IAClF,kBAAC,KAAD,CAAMF,MAAOC,EAAK,OAAO,UAAWG,MAAO,CAACsD,SAAS,UAChDulB,OAAe,OAAPV,EAAYO,EAAQC,UATjD,MAYmB7C,GAAQA,EAAKwC,OAC5B,kBAAC,GAAS,CAACxoB,OAAKoD,QAAQ,kBAAI6N,KAASA,aAI7C,kBAAC,GAAU,CAAClR,OAAKC,OAAKqD,OAAO+J,EAAK+U,OAAO+B,QAAQ,kBAAI7W,EAAQ,CAAC8U,OAAO,OACjE,kBAAC,GAAS,CAACpiB,OAAKC,OAAKE,MAAM,CAACwO,IAAI,SAAS3L,MAAW,GAAL/C,GAC3C,kBAAC,GAAS,CAACD,OAAKC,OAAKyoB,gBAArB,QAA0C7T,EAAKiT,OAAO,MAAMza,EAAK+U,SAC/DvN,EAAKiT,QAAUjT,EAAKkT,MAAMxf,KAAI,SAAC2B,EAAEuP,GAAH,MAAgB,UAATvP,EAAE2d,MAA8B,OAAdxa,EAAK+U,OAAc,KAC5E,kBAAC,KAAD,iBAAclY,EAAd,CAAiBgB,IAAKuO,QACtB,kBAAC,KAAD,CAAQ1Z,MAAM,UACVI,MAAO,CAAC8E,MAAM,OAAOgkB,YAAiB,GAALhpB,GACjCoD,QAAS,kBAAIokB,EAAQpa,EAAKsF,KAAK,KAC/BzP,SAAU2R,EAAKiT,OAAO,UAAU,WAI5C,kBAAC,EAAU,CAAC7nB,QACR,uBAAGE,MAAO,CAACJ,MAAM,WAAYgD,KAAK,KAAlC,QACA,uBAAG5C,MAAO,CAACJ,MAAM,WAAYgD,KAAK,SAAlC,QACA,uBAAG5C,MAAO,CAACJ,MAAM,WAAYgD,KAAK,SAAlC,SAEJ,kBAAC,GAAU,CAAC9C,QACR,yBAAKoD,QAAS,kBAAIklB,GAAQ,SAAAjhB,GAAC,MAAM,OAAJA,EAAS,KAAK,UAAQghB,EAAK1W,eACxD,yBAAKvO,QAAS,kBAAIsK,GAAQ,SAACrG,GAAD,MAAU,CAACmG,GAAGnG,EAAEoG,GAAGA,GAAGpG,EAAEmG,SAAQzN,EAAK,eAAK,gBACpE,yBAAKqD,QAAS,kBAAIuK,GAAQ,SAACtG,GAAD,MAAU,CAACmG,GAAGnG,EAAEoG,GAAGA,GAAGpG,EAAEmG,SAAQxN,EAAK,EAAE,eAAK,iBAE1E,kBAAC,GAAU,CAACA,QACR,kBAAC,EAAD,eAAM2D,GAAG,cAAwB,CAAC5D,OAAKC,QAAvC,CAA8CoD,QAAS,kBAAI,QACvD,kBAAC,EAAD,eAAMO,GAAG,cAAoB,CAAC5D,OAAKC,QAAnC,CAA0CoD,QAASA,KACnD,kBAAC,EAAD,eAAMO,GAAG,kBAAoB,CAAC5D,OAAKC,QAAnC,CAA0CoD,QAASoL,MACnD,kBAAC,EAAD,eAAM7K,GAAG,eAAoB,CAAC5D,OAAKC,QAAnC,CAA0CoD,QAAS0R,OAG3D,kBAAC,IAAD,KACI,+BAAQkR,EAAK,OAAO,cACpB,0BAAMiD,QAAQ,UACd,0BAAMrB,KAAK,mBAAmB7gB,QAAQ,cACtC,0BAAMue,IAAI,YAAYxiB,KAAK,0BCxEvB,kBAAC,IAAD,CAAU6hB,KAAK,QAAQC,UJTnB,WAAO,IAAD,MACF9c,oBAAuB,QAAN,EAAA3I,cAAA,mBAAQkR,iBAAR,eAAmBH,WAAU,MAD5C,mBACnBmY,EADmB,KACbC,EADa,OAEFhb,YAAiB,CAACE,IAAG,EAAMC,IAAG,IAF5B,mBAEnB1N,EAFmB,KAEb2N,EAFa,OAGFJ,YAAiB,CAACE,GAAG,EAAOC,GAAG,MAH7B,mBAGnBzN,EAHmB,KAGb2N,EAHa,KAI1B,OACI,oCACI,yBAAKzN,MAAK,2BAAMwF,IAAN,IAAkBZ,WAAW/E,EAAK,OAAO,UAC/C,kBAAC,IAAD,CAAQ+N,GAAI,CAAEC,OAAO,EAAOwN,WAAW,EAAOC,wBAAwB,GAC9DxN,OAAQ,CAAEvM,SAAS,CAAC,EAAE,EAAE,KAAMga,IAAI,KAClCnB,WAAYnb,OAAOuc,kBACvB,kCAAcxN,UAAW,MACzB,gCAAYzM,SAAU,CAAC,IAAK,IAAK,KAAMyM,UAAW,MAClD,gCAAYzM,SAAU,EAAE,KAAM,KAAM,KAAMyM,UAAW,EAAGpO,MAAM,QAC9D,gCAAY2B,SAAU,CAAC,GAAG,IAAK,GAAIO,KAAM,CAAC,IAAK,MAC/C,kBAAC,WAAD,CAAUqM,SAAU,MAChB,kBAAC,IAAD,KACI,kBAAC,GAAD,CAAQ2O,IAAI,gCAK5B,kBAAC,IAAD,KACI,gDACA,0BAAMsI,IAAI,YAAYxiB,KAAK,sBAE/B,kBAAC,EAAU,CAAC9C,QACR,uBAAGE,MAAO,CAACJ,MAAM,WAAYgD,KAAK,KAAlC,QACA,uBAAG5C,MAAO,CAACJ,MAAM,WAAYgD,KAAK,SAAlC,QACA,uBAAG5C,MAAO,CAACJ,MAAM,WAAYgD,KAAK,SAAlC,SAEJ,kBAAC,GAAU,CAAC9C,QACR,yBAAKoD,QAAS,kBAAIklB,GAAQ,SAAAjhB,GAAC,MAAM,OAAJA,EAAS,KAAK,UAAQghB,EAAK1W,eACxD,yBAAKvO,QAAS,kBAAIsK,GAAQ,SAACrG,GAAD,MAAU,CAACmG,GAAGnG,EAAEoG,GAAGA,GAAGpG,EAAEmG,SAAQzN,EAAK,eAAK,gBACpE,yBAAKqD,QAAS,kBAAIuK,GAAQ,SAACtG,GAAD,MAAU,CAACmG,GAAGnG,EAAEoG,GAAGA,GAAGpG,EAAEmG,SAAQxN,EAAK,GAAG,eAAK,qBIvBnE,kBAAC,IAAD,CAAuBoI,GAAG,eAO9C8gB,IAASC,OAAQzE,GAAMlH,SAASuE,eAAe,SxCyGzC,kBAAmB1R,WACrBA,UAAU+Y,cAAcC,MACrB9G,MAAK,SAAA+G,GACJA,EAAaC,gBAEd5B,OAAM,SAAAO,GACL5I,QAAQ4I,MAAMA,EAAMsB,a","file":"static/js/main.b312c2cb.chunk.js","sourcesContent":["// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.0/8 are considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\ntype Config = {\n  onSuccess?: (registration: ServiceWorkerRegistration) => void;\n  onUpdate?: (registration: ServiceWorkerRegistration) => void;\n};\n\nexport function register(config?: Config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(\n      process.env.PUBLIC_URL,\n      window.location.href\n    );\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl: string, config?: Config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl: string, config?: Config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl, {\n    headers: { 'Service-Worker': 'script' }\n  })\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready\n      .then(registration => {\n        registration.unregister();\n      })\n      .catch(error => {\n        console.error(error.message);\n      });\n  }\n}\n","import React, {FC,useEffect,useMemo,useRef} from \"react\"\r\nimport {useFrame} from \"react-three-fiber\"\r\nimport {Props} from '../../src'\r\nimport * as THREE from \"three\"\r\ntype Vec3 = [number,number,number]\r\nconst vertexShader = `\r\nuniform float size;\r\nattribute float scale;\r\nvoid main() {\r\n    vec4 mvPosition = modelViewMatrix * vec4( position, 1.0 );\r\n    gl_PointSize = size * scale * ( 300.0 / - mvPosition.z ) * 0.1;\r\n    gl_Position = projectionMatrix * mvPosition;\r\n}`\r\n\r\nconst fragmentShader = `\r\nuniform vec3 color;\r\nvoid main() {\r\n    if ( length( gl_PointCoord - vec2( 0.5, 0.5 ) ) > 0.475 ) discard;\r\n    gl_FragColor = vec4( color, 1.0 );\r\n}`\r\ntype Point = FC<Props<{amp:number,dist:number,time:number,amount:{x:number,y:number}}>>\r\nconst Points:Point = ({\r\n    amp=1,dist=5,time=1,amount={x:50,y:50,},\r\n    color=\"\", dark=false, size=1, style={}, ...props}) => {\r\n    const geometry  = useRef<any>(null)\r\n    const material  = useRef<any>(null)\r\n    const uniforms = useMemo(() => ({\r\n        color: {value:new THREE.Color(color||dark?0xffffff:0x000000)},\r\n        size: {value: size}\r\n    }), [color,dark,size])\r\n    const delta = useRef(0)\r\n    useEffect(() => {\r\n        const scales    = new Float32Array(amount.x*amount.y)\r\n        const positions = new Float32Array(amount.x*amount.y*3)\r\n        var i = 0, j = 0;\r\n        for ( var ix = 0; ix < amount.x; ix ++ ) {\r\n            for ( var iy = 0; iy < amount.y; iy ++ ) {\r\n                positions[ i ] = ix * dist - ( ( amount.x * dist ) / 2 ); // x\r\n                positions[ i + 1 ] = 0; // y\r\n                positions[ i + 2 ] = iy * dist - ( ( amount.y * dist ) / 2 ); // z\r\n                scales[ j ] = 1;\r\n                i += 3;\r\n                j ++;\r\n            }\r\n        }\r\n        geometry.current.setAttribute('scale'   ,new THREE.BufferAttribute(scales   , 1))\r\n        geometry.current.setAttribute('position',new THREE.BufferAttribute(positions, 3))\r\n    }, [dist, amount])\r\n    useFrame (()=> {\r\n        var i = 0, j = 0;\r\n        geometry.current.attributes.scale.needsUpdate = true\r\n        geometry.current.attributes.position.needsUpdate = true\r\n        for ( var ix = 0; ix < amount.x; ix ++ ) {\r\n            for ( var iy = 0; iy < amount.y; iy ++ ) {\r\n                const t = delta.current// * time;\r\n                geometry.current.attributes.position.array[i+1] = (Math.sin( (ix+t)*0.3 )*amp)  + (Math.sin( (iy+t)*0.5 )*amp);\r\n                geometry.current.attributes.scale.array[j]   = (Math.sin( (ix+t)*0.3 )+ 1)*8 + (Math.sin( (iy+t)*0.5 )+ 1)*8;\r\n                i += 3; j ++;\r\n                delta.current += 0.0001 * time\r\n            }\r\n        }\r\n        geometry.current.attributes.scale.needsUpdate = true\r\n        geometry.current.attributes.position.needsUpdate = true\r\n    })\r\n    return (\r\n        <points {...props}>\r\n            <bufferGeometry ref={geometry} attach=\"geometry\"/>\r\n            <shaderMaterial ref={material} attach=\"material\" args={[{uniforms,vertexShader,fragmentShader}]} />\r\n        </points>\r\n    )\r\n}\r\n\r\nconst Plane = ({...props}) => {\r\n    return (\r\n        <mesh {...props} receiveShadow>\r\n            <planeGeometry attach=\"geometry\" args={[5000, 5000, 1, 1]} />\r\n            <meshLambertMaterial attach=\"material\" color=\"#232323\" transparent opacity={0.1} />\r\n        </mesh>\r\n    )\r\n}\r\n\r\nexport type Stage = FC<Props<{\r\n    position: Vec3,\r\n    rotation: Vec3,\r\n    scale   : Vec3,\r\n}>>\r\nexport const Stage: Stage = ({\r\n    position=[0, -11, 0],\r\n    rotation=[0, 0, 0],\r\n    scale=[0.1,0.1,0.1],\r\n    ...props\r\n}) => (\r\n    <>\r\n        <Points {...props} {...{position,rotation,scale}}/>\r\n        <Plane  rotation={[-0.5*Math.PI, 0, 0]} position={[0, -11, 0]} />\r\n    </>\r\n)\r\n","//import * as THREE from 'three'\r\nimport React, {FC} from 'react'\r\nimport {Text} from \"drei\";\r\n// import { EffectComposer, Bloom } from \"react-postprocessing\";\r\nimport { useReflow} from \"react-three-flex\";\r\nimport {Props} from '../types'\r\n\r\nexport type Title = FC<Props<{\r\n    anchorX:number|undefined|\"center\"|\"left\"|\"right\",\r\n    anchorY:number|undefined|\"top\"|\"top-baseline\"|\"middle\"|\"bottom-baseline\"|\"bottom\",\r\n    textAlign:undefined|\"center\"|\"left\"|\"right\"|\"justify\",\r\n    href:string\r\n}>>\r\nexport const Title:Title = ({\r\n    anchorX=\"center\", anchorY=\"middle\", textAlign=\"center\", href=\"\",\r\n    dark=false, size=1, space=0, maxWidth=-1, children, ...props\r\n}) => {\r\n    const reflow = useReflow()\r\n    const color = props.color || dark? \"#fff\": \"#000\"\r\n    const onClick = href? null: () => window.open(href)\r\n    return (\r\n        <Text {...props as any} {...{color, anchorX, anchorY, textAlign, maxWidth, onClick}}\r\n            onSync={reflow} letterSpacing={space} fontSize={size/2} lineHeight={size/2}>\r\n            {typeof children===\"string\"? children: (children as any)?.props?.children||''}\r\n            <meshStandardMaterial />\r\n        </Text>\r\n    )\r\n}\r\n","import React, {CSSProperties as CSS, FC, useMemo} from 'react'\r\nimport {Props} from '../types'\r\nimport { useSpring, animated as a } from 'react-spring'\r\nimport { useMove } from 'react-use-gesture'\r\nexport type Icon = FC<Props<{fa:string,fab:string,circ:boolean,onOpen:null|(()=>void)}>>\r\nexport const Icon:Icon = ({\r\n    fa=\"\",fab=\"\",dark=false,circ=true,size=1,onOpen=null, //onClose=null,\r\n    children,className='',...props//,color=''\r\n}) => {\r\n    const [{xys}, set] = useSpring(() => ({xys:[0,0,0]}))\r\n    const bind = useMove(({vxvy:[vx,vy],last}) => set({xys:[vx,vy,last?0:1]}))\r\n    const color = useMemo(()=>props.color||circ\r\n        ? dark?\"#818181\":\"#fff\"\r\n        : \"#212121\",[props.color,circ,dark])\r\n    const style = useMemo<CSS>(() => ({\r\n        padding:\"0px\",top:0,right:0,textAlign:\"center\",userSelect:\"none\",\r\n        ...(circ?{borderRadius:size*50,background:\"#212121\"}:{}),\r\n        ...props.style,color,height:size*50,width:size*50,fontSize:size*50\r\n    }), [size,circ,color,props.style] )\r\n    return <a.div style={{\r\n                x : xys.interpolate((x,y,s) => x*size*50+y*s),\r\n                y : xys.interpolate((x,y,s) => y*size*50+x*s),\r\n                filter : xys.interpolate((x,y,s) => [\r\n                    `drop-shadow(${0.1+x}rem`, // -x~0.5~x\r\n                                `${0.5+y}rem`, // -y~1.5~y\r\n                                `${1-s/2}rem`, // 1 =hover=> 0.5\r\n                    `rgba(0,0,0, ${0.5+s/20}))`// 0.50 =hover=> 0.55\r\n                ].join(' ')),\r\n                transform : xys.interpolate((x,y,s) => [\r\n                    `perspective(${size*50}px)`,\r\n                    `rotateX(${-y}deg)`,//-1 ~ 1\r\n                    `rotateY(${x}deg)` ,//-1 ~ 1\r\n                    `scale(${1+s/10})` ,// 1 ~ 1.1\r\n                ].join(' ')),\r\n            ...style} as CSS}\r\n           {...{children,className:className+fa\r\n                ?` fas fa-${fa}`: fab\r\n                ?` fab fa-${fab}`: \"\"}}\r\n           {...bind()} {...props} />\r\n}\r\n","// This is a fork of\r\n//     https://github.com/drcmda/react-animated-tree/blob/master/src/index.js\r\n//     https://github.com/drcmda/react-animated-tree/blob/master/src/icons.js\r\n// demo: https://codesandbox.io/embed/rrw7mrknyp\r\n//     @content, Name of the node (string or React-component)\r\n//     @type   , optional description, good for displaying icons, too (string or React-component)\r\n//     @open   , optional: default open state\r\n//     @hide, optional: when set true displays an eye icon\r\n//     @visible, optional: default visible state\r\n//     @onClick, optional: click events on the eye\r\n//     @springConfig, optional: react-spring animation config\r\nimport React, {\r\n    CSSProperties as CSS, FC, Children,\r\n    useCallback,useMemo, useState, useEffect, //useRef\r\n} from 'react'\r\nimport {useSpring, config, animated as a} from 'react-spring'\r\nimport {Props} from '../types'\r\nconst defaultConfig = {restSpeedThreshold: 1,restDisplacementThreshold: 0.01}\r\nconst styles:{[key:string]:CSS} = {\r\n    tree: {padding:'4px 0px 0px 0px',position:'relative',overflow:'hidden',\r\n           verticalAlign:'middle',whiteSpace:'nowrap',textOverflow:'ellipsis',},\r\n    tggl: {verticalAlign:'middle',width:'1em',height:'1em',cursor:'pointer',marginRight:10,},\r\n    type: {verticalAlign:'middle',fontSize:'0.6em',fontFamily:'monospace',textTransform:'uppercase',},\r\n    cont: {verticalAlign:'middle',display:\"inline-block\",},\r\n    top: {willChange:'transform, opacity, height',marginLeft:6,},\r\n}\r\nconst paths = {\r\n    close:\"M717.5 589.5q-10.5 10.5 -25.5 10.5t-26 -10l-154 -155l-154 155q-11 10 -26 10t-25.5 -10.5t-10.5 -25.5t11 -25l154 -155l-154 -155q-11 -10 -11 -25t10.5 -25.5t25.5 -10.5t26 10l154 155l154 -155q11 -10 26 -10t25.5 10.5t10.5 25t-11 25.5l-154 155l154 155 q11 10 11 25t-10.5 25.5zM888 760v0v0v-753v0h-752v0v753v0h752zM888 832h-752q-30 0 -51 -21t-21 -51v-753q0 -29 21 -50.5t51 -21.5h753q29 0 50.5 21.5t21.5 50.5v753q0 30 -21.5 51t-51.5 21v0z\",\r\n    minus: \"M888 760v0v0v-753v0h-752v0v753v0h752zM888 832h-752q-30 0 -51 -21t-21 -51v-753q0 -29 21 -50.5t51 -21.5h753q29 0 50.5 21.5t21.5 50.5v753q0 30 -21.5 51t-51.5 21v0zM732 347h-442q-14 0 -25 10.5t-11 25.5v0q0 15 11 25.5t25 10.5h442q14 0 25 -10.5t11 -25.5v0 q0 -15 -11 -25.5t-25 -10.5z\",\r\n    plus: \"M888 760v0v0v-753v0h-752v0v753v0h752zM888 832h-752q-30 0 -51 -21t-21 -51v-753q0 -29 21 -50.5t51 -21.5h753q29 0 50.5 21.5t21.5 50.5v753q0 30 -21.5 51t-51.5 21v0zM732 420h-184v183q0 15 -10.5 25.5t-25.5 10.5v0q-14 0 -25 -10.5t-11 -25.5v-183h-184 q-15 0 -25.5 -11t-10.5 -25v0q0 -15 10.5 -25.5t25.5 -10.5h184v-183q0 -15 11 -25.5t25 -10.5v0q15 0 25.5 10.5t10.5 25.5v183h184q15 0 25.5 10.5t10.5 25.5v0q0 14 -10.5 25t-25.5 11z\",\r\n    eye: \"M963 384q0 14 -21 62q-26 65 -61 109q-57 71 -139 112q-99 50 -230 50t-231 -50q-80 -41 -138 -112q-34 -43 -61 -109q-21 -48 -21 -62v0v0v0v0q0 -14 21 -62q27 -66 61 -109q57 -71 139 -112q100 -50 230 -50t230 50q81 41 139 112q35 44 62 109q20 48 20 62v0v0v0v0z M889 384q-25 -77 -64 -126h-1q-46 -59 -114 -93q-85 -42 -198.5 -42t-198.5 42q-67 34 -114 93q-40 49 -65 126q25 77 65 126q47 59 114 93q85 43 199 43t198 -43q67 -33 114 -93q40 -49 65 -126zM512 558q-72 0 -122.5 -50.5t-50.5 -122.5t50.5 -122.5t122.5 -50.5 t122.5 50.5t50.5 122.5t-50.5 122.5t-122.5 50.5zM614 385q0 -42 -30 -72t-72 -30t-72 30t-30 72t30 72t72 30t72 -30t30 -72z\",\r\n}\r\nexport type TreeIcon = {[key:string]:FC<{style:CSS,onClick:()=>void,className?:string}>}\r\nexport const TreeIcon:TreeIcon = {\r\n    CloseSquareO: props => <svg {...props} viewBox=\"64 -65 897 897\"><g><path d={paths.close}/></g></svg>,\r\n    MinusSquareO: props => <svg {...props} viewBox=\"64 -65 897 897\"><g><path d={paths.minus}/></g></svg>,\r\n    PlusSquareO : props => <svg {...props} viewBox=\"64 -65 897 897\"><g><path d={paths.plus}/></g></svg>,\r\n    EyeO        : props => <svg {...props} viewBox=\"61  51 902 666\"><g><path d={paths.eye}/></g></svg>,\r\n}\r\nexport type TreeContent = FC<Props<{\r\n    [key:string]:any, set:any, content:any, type:any,\r\n    hide:boolean, opacity:number, root:number, icon:\"Minus\"|\"Plus\"|\"Close\"\r\n}>>\r\nexport const TreesContent:TreeContent = ({\r\n    content,type,set,hide=false,icon=\"Close\",opacity=1,dark=false,\r\n}) => {\r\n    const Icon  = useMemo(() => TreeIcon[`${icon}SquareO`], [icon])\r\n    const color = useMemo(() => dark? \"#818181\": \"#212121\", [dark])\r\n    const eyeClick  = useCallback(() => set&&set((p:any) => ({...p        ,immediate:true })), [set])\r\n    const iconClick = useCallback(() => set&&set((p:any) => ({open:!p.open,immediate:false})), [set])\r\n    return !content ? null : (\r\n        <>\r\n            <Icon style={{...styles.tggl, opacity, color}} onClick={iconClick}/>\r\n            <span style={{...styles.type, marginRight:type?10:0,color}}>{type}</span>\r\n            { hide &&\r\n            <TreeIcon.EyeO style={{...styles.tggl, color}} onClick={eyeClick}/> }\r\n            <span style={{...styles.cont,color}}>{content}</span>\r\n        </>\r\n    )\r\n}\r\nexport type Trees = FC<Props<{\r\n    open:boolean, visible:boolean, depth:number, springConfig:any,\r\n    hide:boolean, immediate:boolean, topStyle:CSS, type:any, content:any,\r\n}>>\r\nexport const Trees:Trees = ({\r\n    open=true, visible=true, immediate=true,\r\n    depth=0, root=1, springConfig=defaultConfig,\r\n    dark=false, size=1, style={}, topStyle={}, ...props\r\n}) =>  {\r\n    const [state, set] = useState<{[key:string]:boolean}>({open,visible,immediate})\r\n    const spring = useSpring({\r\n        immediate: state.immediate,\r\n        config: {...config.default,...springConfig},\r\n        from: {height: 0, opacity: 0, transform: 'translate3d(20px,0,0)' },\r\n        to: {  height: state.open ? 'auto' : 0,\r\n              opacity: state.open ? 1      : 0,\r\n            transform: state.open ? 'translate3d(0px,0,0)' : 'translate3d(20px,0,0)'},\r\n    })\r\n    const children = useMemo(() => Children.map(props.children, child => {\r\n        const grand = Children.toArray((child as any)?.props?.children) || []\r\n        return props.children &&\r\n            <Trees {...{...props,\r\n                dark, size, style, depth:depth+1, topStyle:{},\r\n                open: depth<root, children: grand.length>1 ? grand.slice(1) : null,\r\n                immediate: false, content : grand.length>1 ? grand[0] : child,}}/>\r\n    }), [props, depth, root, dark, size, style])\r\n    const icon = useMemo(() => children instanceof Array && children.length > 0\r\n        ? (state.open ? 'Minus' : 'Plus')\r\n        : 'Close', [children, state.open])\r\n    useEffect(() => void (set(p => visible!==p.visible?{...p, visible}:p)), [visible])\r\n    return (\r\n        <a.div style={{...styles.tree, fontSize:size*50, zIndex:-depth, ...style, ...topStyle}}>\r\n            <TreesContent{...{...props, icon, set, opacity:children?.length?1:.3, dark, size}}/>\r\n            <a.div style={{\r\n                ...(depth>0?{borderLeft:`1px dashed #${dark?818181:212121}`}:{}),\r\n                ...styles.top, padding:`4px 0px 0px ${size*25}px`,\r\n                ...spring, }}>{children}</a.div>\r\n        </a.div>\r\n    )\r\n}\r\n","import React, {FC,CSSProperties as CSS,useCallback,useRef} from 'react';\r\nimport {useSpring, animated as a, config} from 'react-spring'\r\nimport {useGesture} from 'react-use-gesture'\r\nimport {Props} from'../types'\r\nimport {Trees} from '../containers'\r\nimport {Icon} from '../components'\r\nconst styles:{[key:string]:CSS} = {\r\n    area: {position:\"fixed\",top:0,left:0,height:\"100%\",zIndex:1},\r\n    cont: {position:\"fixed\",top:\"2%\",left:0,zIndex:1,overflowX:\"hidden\",height:`96%`},\r\n    icon: {position:\"absolute\",transform:`translate(-50%,-50%)`},\r\n    item: {padding:\"10px 10px 10px 32px\",color:\"#818181\",display:\"block\",}\r\n}\r\nexport const SidesArea :FC<Props> = ({spring, bind, size=1}) =>\r\n    <a.div style={{...styles.area,\r\n        width     : spring.x.to((x:number)=>x>1?\"100%\":`${size*50/2}px`),\r\n        background: spring.scale.to((s:number)=>{\r\n            const rate  = spring.x.animation.to/window.innerWidth //0 ~ 0.5\r\n            return `linear-gradient(90deg,rgba(0,0,0,${rate+s-1}),rgba(0,0,0,0))`})\r\n        }} {...bind()} />\r\n\r\nexport const SidesContainer : FC<Props> = ({size=1, spring, children}) =>\r\n    <a.div style={{...styles.cont,\r\n        width:spring.x.interpolate((x:number)=>x>0?x:0),\r\n        borderRadius:`0px ${50*size}px ${50*size}px 0px`,\r\n        backgroundColor:\"#212121\"}}>\r\n        <div style={{margin:`${50*size}px 0px 0px 0px`, position:\"absolute\"}}>{children}</div>\r\n    </a.div>\r\n\r\nexport const SidesIcon : FC<Props> = ({spring, bind, circ=false, size=1}) =>\r\n    <a.div {...bind()} style={{...styles.icon,...spring,top:size*50,left:size*50}}>\r\n        <Icon fa=\"align-left\" {...{circ,size}} />\r\n    </a.div>\r\n\r\nexport const SidesItem :FC<Props> = ({children, size=1}) =>\r\n    <a.div style={{...styles.item,transition:\"0.75s\",fontSize:50*size}}\r\n        onClick={(e:any)=>e.stopPropagation()}>{children}</a.div>\r\n\r\nexport type Sides = FC<Partial<Props<{}>>>\r\nexport const Sides:Sides = ({children, width=window.innerWidth/2,dark=false,size=1, onOpen=()=>null}={}) => {\r\n    const opened = useRef<boolean>(false)\r\n    const setOpened = useCallback((bool=true)=>1&&( (opened.current=bool), onOpen&&onOpen() ),[onOpen])\r\n    const [spring, set] = useSpring( () => ({x:0,y:0,scale:1}) )\r\n    const open =(v=0)=>1&&(setOpened(true),set({x:width,y:0,config:v!==0?config.wobbly:config.slow}))\r\n    const close=(v=0)=>1&&(setOpened(false),set({x:0    ,y:0,config:{...config.stiff,velocity:v }}))\r\n    const bind = useGesture({\r\n        onHover : ({hovering}) => set({scale:hovering?1.2:1}),\r\n        onDrag : ({last,down,vxvy:[vx,],movement:[mx,my],cancel}) => {\r\n            if ((my<-width*.5||width*.5<my) && cancel) cancel()\r\n            if (!last) return set({x:(opened.current?width:0)+(down?mx:0),y:down?my:0})\r\n            if(!opened.current) return (mx===0||mx> width*0.5||vx> 0.5) ? open(vx) : close(vx)\r\n            if( opened.current) return (mx===0||mx<-width*0.5||vx<-0.5) ? close(vx): open(vx)\r\n        },\r\n    })\r\n    return (\r\n        <div style={{position:\"fixed\", top:0,left:0,zIndex:100}}>\r\n            <SidesIcon   {...{size, spring, bind, }} />\r\n            <SidesArea     {...{size, spring, bind, }} />\r\n            <SidesContainer{...{size, spring, bind, }}>\r\n            <Trees {...{dark:true,size}}>\r\n                {React.Children.map(children, ((child, key) =>\r\n                    <SidesItem {...{size, key}}>{child}</SidesItem>\r\n                ))}\r\n            </Trees>\r\n            </SidesContainer>\r\n        </div>\r\n    )\r\n}\r\n","import React, {FC,CSSProperties as CSS,useCallback,useRef} from 'react';\r\nimport {useSpring, animated as a, config, UseSpringProps} from 'react-spring'\r\nimport {useGesture} from 'react-use-gesture'\r\nimport {Props} from '../types'\r\nimport {Icon} from '../components'\r\n\r\nconst styles:{[key:string]:CSS} = {\r\n    top : {position:\"fixed\",top:0,right:0,zIndex:100                        },//*dev*/, background:\"rgba(0,0,0,.1)\"},\r\n    area: {position:\"fixed\",top:0,right:0,height:\"100%\"                     },//*dev*/,background:\"rgba(255,0,0,.1)\"},\r\n    cont: {position:\"fixed\",height:`96%`,top:\"2%\",right:0,overflowX:\"hidden\"},//*dev*/,background:\"rgba(0,255,0,.1)\"},\r\n    icon: {position:\"absolute\",right:0,transform:`translate(-50%,-50%)`     },//*dev*/,background:\"rgba(0,0,255,.1)\"},\r\n    item: {backgroundColor:\"#212121\",color:\"#818181\", display:\"inline-block\"},\r\n}\r\nexport const TransArea :FC<Props> = ({size=1, spring}) =>\r\n    <a.div style={{\r\n        width: spring.r.interpolate((r:number)=>`${\r\n            50*size*( Math.cos(r/90*Math.PI)+1.5)\r\n        }px`),\r\n        background: spring.scale.interpolate((s:number)=>[\r\n            `linear-gradient(90deg`,\r\n            `rgba(0,0,0,0)`,\r\n            `rgba(0,0,0,${s-1}))`\r\n        ].join(',')),\r\n        ...styles.area}}\r\n       />\r\n\r\nexport const TransIcon : FC<Props> = ({size=1, spring, circ=false}) =>\r\n    <a.div style={{...styles.icon, top:50*size, rotateZ:spring.r}}>\r\n        <Icon fa=\"align-justify\" {...{circ,size}} />\r\n    </a.div>\r\n\r\nexport const TransContainer : FC<Props> = ({children, size=1, spring, }) =>\r\n    <a.div style={{...styles.cont,\r\n        width:spring.r.interpolate((r=0) => `${ 50*size*(Math.cos(r/90*Math.PI)+1) }px` )}}>\r\n        <div style={{margin:`calc(${50*size*2}px - 2%) 0px 0px 0px`}}>{children}</div>\r\n    </a.div>\r\n\r\nexport const TransItem :FC<Props> = ({children, size=1}) =>\r\n    <a.div style={{...styles.item,\r\n        margin:`${50*size/4}px 0px`,\r\n        borderRadius:`${50*size}px 0px  0px ${50*size}px`,}}>\r\n        <div onClick={e=>e?.stopPropagation()} style={{\r\n            height:50*size, margin:`auto ${50*size/2}px`,\r\n            fontSize:50*size, zIndex:1, display:\"flex\", alignItems:\"center\",\r\n        }}>{children}</div>\r\n    </a.div>\r\n\r\nexport const Trans : FC<Props> = ({children, size=1, onOpen=()=>null}={}) => {\r\n    const opened = useRef<boolean>(false)\r\n    const setOpened = useCallback((bool:boolean)=>1&&( (opened.current=bool), onOpen&&onOpen() ),[onOpen])\r\n    const [spring, set] = useSpring<UseSpringProps>( () => ({x:0, y:0, r:90, scale:1,}) )\r\n    const getr = (velocity=0) => {\r\n        const pre  = ~~(spring.r.animation.to/90) //  Math.round( spring.r.animation.to/90 || 0 ) //\r\n        const unit = ((opened.current?1:0) === (pre%2)?0:1) ? 0:1 //to change:1 no diff:0\r\n        return 90 * ( pre + unit * (velocity<0?-1:1) )\r\n    }\r\n    const open  =(v=0)=>1&&(setOpened(true) ,set({r:getr(v),config:v!==0?config.wobbly:config.slow}))\r\n    const close =(v=0)=>1&&(setOpened(false),set({r:getr(v),config:{...config.stiff }}))\r\n    const onBind=({mx=0,vx=0,down=false,last=false}) => {\r\n        if (!last) return set({r:spring.r.animation.to+(down?2*(-mx)/size/500:0)})\r\n        if(!opened.current) return (mx===0||mx<-size*250||vx<-0.5) ?  open(-vx) : close(-vx)\r\n        if( opened.current) return (mx===0||mx<-size*250||vx<-0.5||0.5<vx) ? close(-vx) :  open(-vx)\r\n    }\r\n    const bind = useGesture({\r\n        onHover: ({hovering}) => set({scale:hovering?1.2:1}),\r\n        onPinch: ({last,down,offset :[_,a]})  => onBind({down,last,vx:0,mx:a}),\r\n        onDrag : ({last,down,vxvy:[vx,],movement:[mx,],}) => onBind({down,last,vx,mx:mx})\r\n    })\r\n    return (\r\n        <a.div {...bind()} style={{...styles.top}}>\r\n            <TransIcon      {...{size, spring, }} />\r\n            <TransArea      {...{size, spring, }} />\r\n            <TransContainer {...{size, spring, }} >\r\n            {React.Children.map(children, ((child, key:number)=>\r\n                <TransItem {...{size/*, spring*/, key}} >{child}</TransItem>\r\n            ))}\r\n            </TransContainer>\r\n        </a.div>\r\n    )\r\n}\r\n","import * as THREE from \"three\";\r\nimport React, {Suspense,useRef,useState,useCallback} from \"react\";\r\nimport {Flex, Box} from \"react-three-flex\";\r\nimport {useAspect, Html} from \"drei\";\r\nimport {Canvas, useThree, useFrame} from \"react-three-fiber\";\r\nimport {useGrid} from 'use-grid'\r\nimport {\r\n    Icon,\r\n    Title, Stage,\r\n    Sides, Trans,\r\n} from '../src'\r\nconst styles: {[key:string]: React.CSSProperties} = {\r\n    scroll:{position: \"absolute\",top: 0,left: 0,width: \"100vw\",height: \"100vh\",overflow: \"auto\",},\r\n    html: {display:\"flex\", justifyContent: \"space-evenly\"},\r\n}\r\nconst width  = \"100%\"\r\nconst height = \"100%\"\r\nconst state = {\r\n    top: 0\r\n};\r\nfunction Page ({ onChangePages }:any) {\r\n    const vec = new THREE.Vector3();\r\n    const group = useRef<THREE.Group>();\r\n    const {size} = useThree();\r\n    const aspect = useAspect(\"cover\", size.width, size.height, 2);\r\n    const onReflow = useCallback((_,h=0) => onChangePages(h/aspect[1]),[onChangePages, aspect]);\r\n    useFrame(() => group.current?.position?.lerp(vec.set(0, state.top/100, 0), 0.1));\r\n    return (\r\n        <group ref={group}>\r\n            <Stage position={[0,-1,-10]} size={.1} dark={true}/>\r\n            <Flex dir=\"column\" size={[...aspect, 0] as any} {...{onReflow,width,height}}>\r\n                <Box marginBottom={2}><Title dark>TSEI.jp</Title></Box>\r\n                <Box dir=\"column\" {...{width, height}}>\r\n                    <Box {...{width, height}}>\r\n                        <Html center style={{width:\"50vw\", height, ...styles.html}}>\r\n                            <Icon fab=\"twitter\"    onClick={()=>window.open('https://twitter.com/tseijp')}/>\r\n                            <Icon fab=\"github\"     onClick={()=>window.open('https://github.com/tseijp')} />\r\n                            <Icon fab=\"soundcloud\" onClick={()=>window.open('https://soundcloud.com/tsei')}/>\r\n                        </Html>\r\n                    </Box>\r\n                </Box>\r\n            </Flex>\r\n        </group>\r\n    );\r\n}\r\n\r\nexport function Home() {\r\n    const onScroll = (e:any) => (state.top = e.target.scrollTop);\r\n    const [page, setPage] = useState(0);\r\n    const [dark, setDark] = useGrid<number>({init:0, md:1, lg:0  })\r\n    const [size, setSize] = useGrid<number>({init:0, md:1, lg:1.5})\r\n    return (\r\n        <div>\r\n            <Canvas colorManagement shadowMap\r\n                gl={{ alpha: false }}\r\n                camera={{position:[0,0,2], zoom:1}}\r\n                style={{position:\"absolute\", width:\"100vw\", height:\"100vh\"}}>\r\n                <pointLight position={[0,1,4]} intensity={0.1} />\r\n                <ambientLight intensity={0.2} />\r\n                <spotLight castShadow position={[1,1,1]} penumbra={1}/>\r\n                <Suspense fallback={<Html center>loading..</Html>}>\r\n                    <Page onChangePages={setPage} />\r\n                </Suspense>\r\n            </Canvas>\r\n            <div onScroll={onScroll} style={styles.scroll}>\r\n                <div style={{ height: `${page * 100}vh` }} />\r\n            </div>\r\n            <Sides {...{size}}>\r\n                <a style={{color:\"#818181\"}} href=\"/\"    >Home</a>\r\n                <a style={{color:\"#818181\"}} href=\"/hook\">Hook</a>\r\n                <a style={{color:\"#818181\"}} href=\"/note\">Note</a>\r\n            </Sides>\r\n            <Trans {...{size}}>\r\n                <div onClick={()=>setDark((p:any)=>({md:p.lg,lg:p.md}))}>{dark?'':''}</div>\r\n                <div onClick={()=>setSize((p:any)=>({md:p.lg,lg:p.md}))}>{size<75?'':''}</div>\r\n            </Trans>\r\n        </div>\r\n    );\r\n}\r\n","/***Card\r\n  *     Ref : https://codesandbox.io/embed/rj998k4vmm\r\n  *           https://coliss.com/articles/build-websites/operation/css/\r\n ***/\r\nimport React, {CSSProperties as CSS, FC, useCallback, useMemo} from 'react'\r\nimport {Props} from '../types'\r\nimport {useGesture} from 'react-use-gesture'\r\nimport {useSpring, animated as a} from 'react-spring'\r\nexport type Card = FC<Props<{\r\n    max:number,\r\n    min:number,\r\n    rate:number,\r\n    space:number,\r\n}>>\r\nexport const Card:Card = ({\r\n    children, size=1, rate=1, space=0, style={},\r\n    dark=false, color=\"\",max=0, min=0, ...props\r\n}) => {\r\n    const [{xyz}, set] = useSpring(()=>({xyz:[0,0,0]}))\r\n    const styleCard = useMemo<CSS>(() => {\r\n        const minHeight = min||size*500\r\n        const maxHeight = max||null//size*500\r\n        return {margin:`${space}px auto ${space}px auto`, padding:0,position:\"relative\",\r\n                width:`min(80%,${size*500}px)`,borderRadius:size*25,overflow:\"hidden\",\r\n            ...(minHeight&&{minHeight}),background : dark?\"#212121\":\"#fff\",\r\n            ...(maxHeight&&{maxHeight}),color:color||dark?\"#818181\":\"#000\",}\r\n    }, [size, space, color, dark, max, min])\r\n    const calc = useCallback((x, y)=>[\r\n       (x - window.innerWidth  / 2) / size / 250, // -1 ~ 1\r\n       (y - window.innerHeight / 2) / size / 250, // -1 ~ 1\r\n        rate], [size, rate])\r\n    const bind = useGesture({\r\n        onDrag : ({event})    => event?.stopPropagation(),\r\n        onHover: ({hovering}) => !hovering && set({xyz:[0,0,0]}),\r\n        onMove : ({xy:[x,y]}) => set({xyz:calc(x,y)}),\r\n    })\r\n    return <a.div style={{\r\n            boxShadow:xyz.interpolate((x,y,z) => [\r\n                `${0.5-x*2}rem`,//offset-x     : -1.5 ~ 0.5 ~ 2.5\r\n                `${1.5-y*2}rem`,//offset-y     : -0.5 ~ 1.5 ~ 3.5\r\n                `${1.5 + z}rem`,//blur-radius  : 1.5 =hover=> 2.5\r\n                `${z - 0.5}rem`,//spread-radius:-0.5 =hover=> 0.5\r\n                `hsl(200 50% 20% / ${15+z*5}%)`].join(' ')),\r\n            transform:xyz.interpolate((x,y,z) => [\r\n                `perspective(${size*50}px)`,\r\n                `rotateX(${-y/10}deg)`     ,//-0.1 ~ 0.1\r\n                `rotateY(${ x/10}deg)`     ,//-0.1 ~ 0.1\r\n                `scale(${1+z/10})` ,].join(' ')),\r\n            zIndex:xyz.interpolate((x,y,z) => x*y*z>0 ? 1 : 0),\r\n            ...styleCard, ...style }}\r\n           {...bind()}\r\n           {...{...props,children}}/>\r\n}\r\n","import React, {\r\n    FC, CSSProperties as CSS, //Children,\r\n    //useMemo, useCallback, useState, useEffect, useRef\r\n} from 'react'\r\nimport {useControl as use} from 'react-three-gui';\r\nimport {Card} from '../../../src'\r\nconst style:CSS = {textAlign:\"center\", verticalAlign:\"middle\", padding:\"auto auto\", fontSize:100}\r\nconst colors = [\"black\",\"white\",]\r\nexport const HookCard:FC = () => {\r\n    const dark  = use('dark' , {type: 'boolean', value: true})\r\n    const size  = use('size' , {type: 'number' , value: 1, min: 0, max: 2})\r\n    const space = use('space', {type: 'number' , value: 0, min: 0, max: 500})\r\n    const rate  = use('rate' , {type: 'number' , value: 1, min:-5, max: 5})\r\n    const min   = use('min'  , {type: 'number' , value: 0, min: 0, max: 500})\r\n    const max   = use('max'  , {type: 'number' , value: 0, min: 0, max: 500})\r\n    const color    = use('color'   , {type: 'select' , value: colors[0], items: colors})\r\n    const children = use('children', {type: 'select' , value: colors[0], items: colors})\r\n    return (\r\n        <Card {...{dark,size,space,rate,min,max,children}}\r\n            style={{...style,color,margin:`${size*100}px auto ${size*100}px auto`}}/>\r\n    )\r\n}\r\nexport const codeCard =\r\n`import {Card} from '@tsei/core'\r\nconst App =  => (\r\n    <Card\r\n        dark={false}\r\n        size={1}\r\n        min ={0}\r\n        max ={0}\r\n        color=\"\"/>\r\n)`\r\n","import React, {FC, useCallback, useMemo} from \"react\";\r\nimport {Props} from '../types'\r\nconst {atomOneLight, atomOneDark} = require('react-syntax-highlighter/dist/esm/styles/hljs');\r\nconst {Light} = require('react-syntax-highlighter');\r\n\r\nexport type Code = FC<Props<{\r\n    code:string, language:string, inline:boolean\r\n}>>\r\nexport const Code:Code = ({\r\n    code='', language=\"javascript\", inline=false, dark=false, size=1, style={}, ...props//children,\r\n}) => {\r\n    const onDoubleClick = useCallback((_:any)=>navigator.clipboard.writeText(code),[code])\r\n    const customStyle = useMemo(()=>{\r\n        return {...(inline?{verticalAlign:\"top\",padding:0}:{}),padding:\"1rem\",\r\n            display:inline?\"inline-block\":\"fixed\", position:'relative', margin:0,}\r\n    }, [inline])\r\n    return <Light   {...props} PreTag={inline?\"span\":\"pre\"}    useInlineStyles={true}\r\n                    {...{customStyle, onDoubleClick, language}}showLineNumbers={!inline}\r\n             style={{...(dark?atomOneDark:atomOneLight),fontSize:`${size}rem`,...style}}>\r\n                    {code}</Light>\r\n}\r\n","import React, {\r\n    FC, //CSSProperties as CSS, //Children,\r\n    //useMemo, useCallback, useState, useEffect, useRef\r\n} from 'react'\r\nimport {useControl} from 'react-three-gui';\r\nimport {Code} from '../../../src'\r\nconst items = ['javascript', 'python']\r\nconst codes = [\r\n`import React from 'react'\r\n\r\nexport const usePage = (props, config) => {\r\n    if (typeof props ===\"function\")  props = props()\r\n    if (typeof config===\"function\") config = config()\r\n    const pageRef = React.useRef({...defaultPage, ...props })\r\n    const confRef = React.useRef({...defaultConf, ...config})\r\n    const [p,set] = React.useState( normPage(pageRef.current) )\r\n    const setPage = React.useCallback((state) => {\r\n        if (typeof state===\"function\")\r\n            state = state(pageRef.current)\r\n        pageRef.current = {...pageRef.current, ...state}\r\n        set(pre => {\r\n            const newPage = normPage(pageRef.current)\r\n            if (pre.pathname===newPage.pathname)\r\n                return newPage\r\n            window.history.pushState('','',\r\n                newPage.pathname instanceof Array\r\n                  ? newPage.pathname[0]||''\r\n                  : newPage.pathname   ||'')\r\n            return  newPage\r\n        })\r\n    }, [set])\r\n    React.useEffect(() => {\r\n        const {onChange} = confRef.current\r\n        typeof onChange===\"function\" && onChange()\r\n    }, [p.id])\r\n    return [p, setPage]\r\n}`,]\r\nexport const HookCode:FC = () => {\r\n    const dark  = useControl('dark'   , {type: 'boolean', value: false})\r\n    const inline= useControl('inline' , {type: 'boolean', value: false})\r\n    const size  = useControl('size'   , {type: 'number' , value: 1, min: 0, max: 2})\r\n    const code     = useControl('code'    , {type: 'string', value:codes[0]})\r\n    const language = useControl('language', {type: 'select', value:items[0], items})\r\n    return (\r\n        <Code {...{dark,inline,size,code,language}} />\r\n    )\r\n}\r\nexport const codeCode =\r\n`import {Code} from '@tsei/core'\r\nconst codeCode = \"hello\"\r\nconst App =  => (\r\n    <Code\r\n        dark    = {false}\r\n        inline  = {false}\r\n        size    = {1}\r\n        code    = {\"javascript\"}\r\n        language= {\"...\"}/>\r\n)`\r\n","import React, {CSSProperties as CSS, FC,useEffect, useMemo, useRef} from 'react'\r\nimport {Props} from '../types'\r\nimport {useView} from 'use-grid'\r\nexport type Grow = FC<Props>\r\nexport const Grow:Grow = ({\r\n    onView=null, role=\"status\",\r\n    size=1, className=\"spinner-grow\", ...props\r\n}) => {\r\n    const fn = useRef()\r\n    const ref = useRef(null)\r\n    useEffect(()=>{fn.current = onView}, [onView])\r\n    useView(ref, (e:any) => 1\r\n        && e.isIntersecting\r\n        && typeof fn.current===\"function\"\r\n        && (fn.current as any)())\r\n    const style = useMemo<CSS>(()=>({\r\n        position:\"relative\",display:\"grid\",margin:`${size*50}px auto 0 auto`,\r\n        width:size*250,height:size*250,...(props.style||{})\r\n    }), [size, props.style])\r\n    return <div  {...props} {...{ref,role,className,style}} />\r\n}\r\n","import React, {\r\n    FC, //CSSProperties as CSS, Children,\r\n    //useMemo, useCallback, useState, useEffect, useRef\r\n} from 'react'\r\nimport {useControl} from 'react-three-gui';\r\nimport {Grow} from '../../../src'\r\nexport const HookGrow:FC = () => {\r\n    const dark  = useControl('dark' , {type: 'boolean', value: false})\r\n    const size  = useControl('size' , {type: 'number' , value: 1, min: 0, max: 2})\r\n    return (\r\n        <Grow {...{dark, size}}/>\r\n    )\r\n}\r\nexport const codeGrow =\r\n`import {Grow} from '@tsei/core'\r\nconst App =  => (\r\n    <Grow\r\n        dark={true}\r\n        size={1}/>\r\n)`\r\n","import {Page, PageConfig, URL as U, UserConfig} from './types'\r\n// *************************  FOR Components  ************************* //\r\n\r\nexport const topUp = (text=\"\"):string => \"\"+text.charAt(0).toUpperCase()+\"\"+text.slice(1).toLowerCase()\r\nexport const clamp = (x:number, min=0, max=1) :number  => (x<min)?min:(x>max)?max:x\r\nexport const range = (x:number, min=0, max=1) :boolean => min < x && x < max\r\nexport const swap  = (arr:number[],ind:number,row:number) => {\r\n    const ret = [...arr.slice(0, ind), ...arr.slice(ind+1, arr.length)]\r\n    return [...ret.slice(0, row), ...arr.slice(ind, ind+1), ...ret.slice(row)]\r\n}\r\nexport const sign =(num=0):number=> 0\r\n    ||  (num < 0 &&-1)\r\n    ||  (num > 0 && 1)\r\n    ||  (num===0 && 0)\r\n    ||  0\r\nexport const samp = <T extends any>(a:T[], l:number, d?:T):T[] => [\r\n    ...a.slice(0,l),\r\n    ...(l-a.length>0? Array(l-a.length).fill(d||a[0]) : [])\r\n]\r\nexport const getWRate = (o=[] as number[],l=0,w=0,width=window.innerWidth) =>\r\n    o instanceof Array && o.length > 0\r\n        ? samp(o, l, -1)\r\n            .map((v=0) => 0\r\n                || (w > 0 && (w <= 1 ? w : w/width))\r\n                || (v > 0 && (v <= 1 ? v : v/width))\r\n                || (v < 0 && -1)\r\n                || 0)\r\n            .map((v,_,s) => v>=0? v : 1 - [...s.filter(v=>v>0),0].reduce((a,b)=>a+b)/s.filter(v=>v<0).length)\r\n        : Array(l).fill(l>0?1/l:l)\r\n\r\n// *************************  use-page  ************************* //\r\nexport const equalPathname = (...urls:(U|string|undefined|null|false)[]) =>\r\n    urls.map(u => typeof u===\"string\"? new URL(u) : u)\r\n        .map(u => u && joinURL(u.pathname, \"/\"))\r\n        .every((u, _, self) => u===self[0])\r\n\r\nexport const pageConfig:PageConfig = {\r\n    onChange:null,\r\n}\r\nexport const defaultPage = {\r\n    id      :window.location.pathname.split('/').filter(v=>v).find((_,i)=>i===1)||\"\",\r\n    isHome  :window.location.pathname.split('/').filter(v=>v).length > 1,\r\n    isLocal :window.location.hostname===\"localhost\",\r\n    protocol:window.location.protocol ||\"\",\r\n    hostname:window.location.hostname ||\"\",\r\n    portname:window.location.port     ||\"\",\r\n    pathname:window.location.pathname ||\"\",\r\n    search  :window.location.search   ||\"\",\r\n    hash    :window.location.hash     ||\"\",\r\n    language:window.navigator.language||\"ja\",\r\n    urls    :[new URL(window.location.href)],\r\n}\r\nexport const joinPage = <T={}>(page:Page<T>):string|string[] => {\r\n    const {protocol,hostname,portname,pathname=\"\",search=\"\",hash=\"\"} = page;\r\n    const arr  =[protocol,hostname,portname,pathname,search,hash]\r\n    const getp =(port:any)=>port?`:${port}`:\"\"\r\n    const geti =(i=0,n:any)=>n instanceof Array?(i<n.length?n[i]:n[n.length-1]):n\r\n    if (arr.every(v=>typeof v===\"string\"))\r\n        return joinURL(`${protocol}//${hostname}${getp(portname)}/`,pathname as any, search as any)\r\n    const maxLength = arr.map(v=>v instanceof Array?v.length:1).reduce((a,b)=>a>b?a:b)\r\n    return [...Array(maxLength)].map((_,i) =>\r\n        joinURL( `${geti(i,protocol)}//${geti(i,hostname)\r\n            }${getp(geti(i,portname))}/`,geti(i,pathname),geti(i,search) )\r\n    ) as string[]\r\n}\r\nexport const normPage = <T extends {}={}>(page:Page<T>) => {\r\n    const state = {...page} as any//Page<T>\r\n    Object.entries(state).sort(([_,val]) => typeof val===\"function\"?1:-1)\r\n    .forEach(([key,val]:any) => (state[key]=typeof val===\"function\"?val(state):val))\r\n    const urls = joinPage<T>(state as Page<T>)\r\n    return {...state, urls:urls instanceof Array\r\n      ? urls.map((u:any) => typeof u===\"string\" ? new URL(u) : u) as U[]\r\n      : [typeof urls===\"string\" ? new URL(urls) : urls] as U[] } as Page<T>\r\n}\r\n\r\n// *************************  For useUser  ************************* //\r\nexport const defaultUserConfig:UserConfig = {\r\n    keys:['username','authtoken'],\r\n    user:null,\r\n    onSign:null,\r\n    onSignin:null,\r\n    onSignout:null\r\n}\r\n// *************************  join-url  ************************* //\r\n// * This function is fork of join-url/urljoin\r\n// * Code : https://github.com/jfromaniello/url-join/blob/master/lib/url-join.js\r\n// ************************* *************** ************************* //\r\nexport function joinURL (...strArray:(string|number)[]) : string {\r\n    var resultArray = [];\r\n    if (strArray.length === 0) return ''\r\n    if (typeof strArray[0] !== 'string') throw new TypeError('Url must be string.');\r\n    if (strArray[0].match(/^[^/:]+:\\/*$/) && strArray.length > 1)\r\n        strArray[0] = strArray.shift() + strArray[0];\r\n    if (strArray[0].match(/^file:\\/\\/\\//))\r\n        strArray[0] = strArray[0].replace(/^([^/:]+):\\/*/, '$1:///');\r\n    else\r\n        strArray[0] = strArray[0].replace(/^([^/:]+):\\/*/, '$1://');\r\n    strArray = strArray.filter(str=>str!==\"\")\r\n    for (var i = 0; i < strArray.length; i++) {\r\n        let str = strArray[i];\r\n        if (typeof str === 'number') str = String(str)\r\n        if (typeof str !== 'string') throw new TypeError(`${str} must be a string. Received ${typeof str}`);\r\n        if (str === '') continue;\r\n        if (i > 0) str = str.replace(/^[\\/]+/, '');                   //eslint-disable-line\r\n        if (i < strArray.length - 1) str = str.replace(/[\\/]+$/, ''); //eslint-disable-line\r\n        else str = str.replace(/[\\/]+$/, '/');                        //eslint-disable-line\r\n        resultArray.push(str);\r\n    }\r\n    let str = (resultArray as string[]).join('/');\r\n    str = str.replace(/\\/(\\?|&|#[^!])/g, '$1');\r\n    let parts = str.split('?');\r\n    str = parts.shift() + (parts.length > 0 ? '?': '') + parts.join('&');\r\n    return str;\r\n}\r\n// *************************  helpers  ************************* //\r\n// * This function is fork of react-spring\r\n// * Code : https://github.com/pmndrs/react-spring/blob/master/src/shared/helpers.ts\r\n// ************************* *************** ************************* //\r\nexport const is = {\r\n    arr: Array.isArray,\r\n    obj: (a: unknown): a is object    => Object.prototype.toString.call(a) === '[object Object]',\r\n    fun: (a: unknown): a is Function  => typeof a === 'function',\r\n    str: (a: unknown): a is string    => typeof a === 'string',\r\n    num: (a: unknown): a is number    => typeof a === 'number',\r\n    und: (a: unknown): a is undefined => a === void 0,\r\n    nul: (a: unknown): a is null      => a === null,\r\n    set: (a: unknown): a is Set<any>  => a instanceof Set,\r\n    map: (a: unknown): a is Map<any, any> => a instanceof Map,\r\n    equ(a: any, b: any) {\r\n    if (typeof a !== typeof b) return false\r\n        if (is.str(a) || is.num(a)) return a === b\r\n        if (is.obj(a) &&\r\n            is.obj(b) &&\r\n            Object.keys(a).length + Object.keys(b).length === 0)\r\n            return true\r\n        let i\r\n        for (i in a) if (!(i in b))     return false\r\n        for (i in b) if (a[i] !== b[i]) return false\r\n        return is.und(i) ? a === b : true\r\n    },\r\n}\r\n\r\nexport function merge(target: any, lowercase: boolean = true) {\r\n  return (object: object) =>\r\n    (is.arr(object) ? object : Object.keys(object)).reduce(\r\n        (acc: any, element) => {\r\n            const key = lowercase\r\n              ? element[0].toLowerCase() + element.substring(1)\r\n              : element\r\n            acc[key] = target(key)\r\n            return acc\r\n        },\r\n        target\r\n    )\r\n}\r\n","import React, {ReactChild as RC, FC, CSSProperties as CSS, Children,useCallback,useEffect,useMemo,useState,useRef} from 'react'\r\nimport {useSprings, animated as a} from 'react-spring'\r\nimport {useGesture,} from 'react-use-gesture'\r\nimport {clamp, swap} from '../utils'\r\nimport {Props} from '../types'\r\nconst background = ({r=0,g=0,b=0,a=.1,debug=true}:any) => debug?{background:`rgba(${[r,g,b,a].join(',')})`}:{}\r\nconst styles:{[key:string]:CSS} = {\r\n    cont: {position:\"relative\",width:\"100%\",zIndex:0,margin:`auto`},\r\n    main: {position:\"relative\",width:\"100%\",zIndex:0,},\r\n    side: {position:\"absolute\",top:0,left:0,right:0,margin:\"auto\"},\r\n    btn : {position:\"absolute\",left:\"50%\",top:\"50%\",transform:\"translate(-50%,-50%)\" },\r\n}\r\nexport const NotesSide:FC<Props> = ({\r\n    children,size=1,height=0,x, debug=false,\r\n}) => x.interpolate((px:number)=>px**2<=0 ) ? null :\r\n    <a.div children={children} style={{...styles.side, height, ...background({b:255,debug}),\r\n        y:0,  x:x.to((px:number)=> -px+(px>0?-.5:.5)*(size*500)),\r\n        scale  :x.to((px:number)=>px**2/4>size**2?1:(px>0?px:-px)/(size)),\r\n        width  :x.to((px:number)=>px>0?px*2:-px*2),\r\n        display:x.to((px:number)=>px?\"inline\":\"none\") }}/>\r\nexport const NotesItem:FC<Props> = ({children,x}) => !children ? null :\r\n    <a.div style={{...styles.btn,display:x.to((px:number)=>px<0?\"inline\":\"none\")}}>\r\n        {children} </a.div>\r\nexport type Notes = FC<Props<{\r\n    grandren:any,right:RC,left:RC, depth:number, space:number|string,\r\n}>>\r\nexport const Notes:Notes = ({\r\n    order=null, grandren=null, debug=false,\r\n    right=null, left=null, depth=0, space=0,\r\n    size=1, style={}, ...props\r\n}) => {\r\n    const [length, setLength] = useState<number>((props?.children as any)?.length||1)\r\n    const [height, setHeight] = useState<number>(props.height || size*500*length)\r\n    const [isOpen, setIsOpen] = useState<boolean[]>(Array(length).fill(false))\r\n    const orderRef    = useRef<number[]>(order||[...Array(length)].map((_,i:number)=>i))\r\n    const heightRef   = useRef( Array(length).fill(size*500) )\r\n    const targetRef   = useRef<HTMLDivElement|null>(null)\r\n    const setPosition = useCallback(() => {\r\n        if (props.height) return setHeight(props.height)\r\n        const childs  = Array.from(targetRef?.current?.children||[])\r\n        heightRef.current = [...childs].map((c:any)=>c.clientHeight||0)\r\n        props.children && setHeight([...heightRef.current,0].reduce((a,b)=>a+b) || size*500*length)\r\n    }, [size, length, props.height, props.children])\r\n    useEffect(()=>{\r\n        const len = (props.children as any)?.length||1\r\n        setLength(len)\r\n        setIsOpen(Array(len).fill(false))\r\n        if (orderRef.current.length === len) return\r\n         orderRef.current = order||[...Array(len)].map((_,i:number)=>i)\r\n        heightRef.current = Array(len).fill(size*500)\r\n    }, [size, order, props.children])\r\n    //  *************************   React Springs  *************************  //\r\n    const getY = ({pre=0,arr=orderRef.current})=>pre<1?0:[...arr.slice(0,pre).map(i=>heightRef.current[i]),0].reduce((a,b)=>a+b)\r\n    const getF = ({i=-1,x=0,s=1.0})=>(j=0)=>({x:j===i?x:0,y:getY({pre:orderRef.current.indexOf(j)}),scale:j===i?s:1})\r\n    const getG = useCallback(({i=-1,arr=orderRef.current,pre=-1,mx=0,my=0,down=false}) =>\r\n        (j:number) => (down&&j===i)\r\n            ? {scale:0.9, x:mx, y:getY({pre})+my}\r\n            : {scale:1.0, x:0 , y:getY({pre:arr.indexOf(j),arr})}, [])\r\n    const [springs, set] = useSprings(length, getG({}))\r\n    const bind = useGesture({\r\n        onClick:()=>setTimeout(()=>{setPosition();set(getG({})) },1),\r\n        onDrag : ({ down,cancel,movement:[mx,my],startTime,\r\n                    last, args:[i], vxvy:[vx,vy],timeStamp, }) => {\r\n            if(!last && cancel && timeStamp-startTime<1) cancel()\r\n            const pre = orderRef.current.indexOf(i)\r\n            const row = clamp( Math.round(pre+my/size*500), 0, length-1 )\r\n            const arr = swap(orderRef.current, pre, row)\r\n            if(!down) orderRef.current = arr\r\n            if(!last) return set( getG({i,arr,pre,mx,my,down}) )\r\n            const x = (mx<0?-1:1) * size*50// * 2 // window.innerWidth/2 -\r\n            const op = (mx**2<.1||x**2<mx**2*2||vx**2+vy**2>1) ? !isOpen[i] : isOpen[i]\r\n            setIsOpen(p=>[...Object.assign([],{[i]:!p[i]})])\r\n            setTimeout(()=>{setPosition();set(getF({i,s:op?1:1}))},1)//TODO: s is .9?\r\n        }\r\n    })\r\n    //  *************************   Child Render  *************************  //\r\n    const children = useMemo(() => Children.map(props.children, (child) => {\r\n        const grand = Children.toArray((child as any)?.props?.children) || []//count(child.props.children) || 0\r\n        return (grand.length>1 && depth===0) // TODO for depth > 0\r\n            ? React.cloneElement(child as any, {children:grand[0], grandren:(\r\n                <Notes {...{...props, depth:depth+1,children:grand.slice(1)}}/> )})\r\n            : child\r\n    }), [depth, props])\r\n    useEffect(()=>{\r\n        const resize =()=> 1 && (setPosition(), set(getG({})))\r\n        window.addEventListener('resize', resize); resize();\r\n        return () => window.removeEventListener('resize', resize);\r\n    }, [setPosition, set, getG] )\r\n    return (\r\n        <div ref={targetRef} style={{...styles.cont,height,...style, ...background({r:255,debug})}}>\r\n            {springs.map( ({x,y,scale}, key) =>\r\n                <a.div {...{key}} {...bind(key)} style={{x,y,position:\"absolute\",width:\"100%\"}}>\r\n                    <a.div style={{...styles.main,scale,padding:space, ...background({g:255,debug})}}>\r\n                        {(children as any)[key]}\r\n                    </a.div>\r\n                    <NotesSide {...{x,size,debug,height:heightRef.current[key]}}>\r\n                        <NotesItem x={x}>{right}</NotesItem>\r\n                        <NotesItem x={x}>{left}</NotesItem>\r\n                    </NotesSide>\r\n                    { isOpen[key] ? (children as any)[key]?.props?.grandren||'':'' }\r\n                </a.div>\r\n            )}\r\n        </div>\r\n    )\r\n}\r\n","import React, {FC} from 'react'\r\nimport {useControl} from 'react-three-gui';\r\nimport {Notes, Card} from '../../../src'\r\nexport const HookNotes:FC = () => {\r\n    const dark  = useControl('dark' , {type: 'boolean', value: false})\r\n    const debug = useControl('debug', {type: 'boolean', value: false})\r\n    const size  = useControl('size' , {type: 'number' , value: 1, min: 0, max: 2})\r\n    const space = useControl('space', {type: 'number' , value:50, min: 0, max:100})\r\n    const depth = useControl('depth', {type: 'number' , value: 0, min: 0, max: 2})\r\n    const child = useControl('child', {type: 'number' , value: 3, min: 0, max: 10})\r\n    return (\r\n        <Notes {...{dark, debug, size, space, depth:~~depth}}>\r\n        {[...Array(~~child)].map((_,i) =>\r\n            <Card min={1} key={i} style={{\r\n                height:size*100,\r\n                background:`rgba(255,0,0,0.1)`}}>{i}</Card>\r\n        )}\r\n        </Notes>\r\n    )\r\n}\r\nexport const codeNotes =\r\n`import {Notes} from '@tsei/core'\r\nconst App =()=> (\r\n    <Notes\r\n        dark={true}\r\n        size={1}>\r\n        <div style={{height:size*100,background:\"rgba(255,0,0,0,1)\"}}>1</div>\r\n        <div style={{height:size*100,background:\"rgba(0,0,255,0,1)\"}}>2</div>\r\n        <div style={{height:size*100,background:\"rgba(0,0,255,0,1)\"}}>3</div>\r\n    </Notes>\r\n)`\r\n","import React, {CSSProperties as CSS,FC,Children,useMemo,useEffect,useRef} from 'react'\r\nimport {useSpring, useSprings, animated as a} from 'react-spring'\r\nimport {useGesture} from 'react-use-gesture'\r\nimport {Props} from '../types'\r\nimport {clamp,range,sign,getWRate,} from '../utils'\r\n\r\nconst styles:{[key:string]:CSS} = {\r\n    cont: {position:\"relative\",overflow:\"visible\",width:\"100%\",whiteSpace:\"nowrap\",},\r\n    item: {position:\"relative\",overflow:\"visible\",height:\"100%\",display:\"inline-block\",verticalAlign:\"top\"},\r\n}\r\nexport type Split = FC<Props<{\r\n    order :number[]|[], styleItem:CSS,\r\n    width :number, height:number, min:number\r\n}>>\r\nexport const Split:Split = ({\r\n    order=[], width=0, height=0, min=0,\r\n    dark=false,size=1, style={}, styleItem={}, ...props\r\n}) => {\r\n    const sRef = useRef<number>(0)\r\n    const lRef = useRef<number>((props as any)?.children?.length||1)\r\n    const hRef = useRef<number>(height||1)\r\n    const wRef = useRef<number[]>(getWRate(order, lRef.current, width,))\r\n    const [spring,  setH] = useSpring(() => ({h:hRef.current}))\r\n    const [springs, setW] = useSprings(wRef.current.length, i=>({w:wRef.current[i],z:0}))\r\n    const move = (mx=0, k=0, s=1, m=0, w=wRef.current, W=window.innerWidth) => (i=0) =>\r\n        [k,k+s].every(e => range(e, -1, lRef.current))\r\n        ? (i===k||i===k+s) && range(w[i]+mx*s*(i===k?1:-1)/W, m, w[k]+w[k+s]-m)? {w:w[i]+mx*s*(i===k?1:-1)/W}:null\r\n        : (i===k||i===k-s) && range(w[i]-mx*s*(i===k?1:-1)/W, m, w[k]+w[k-s]-m)? {w:w[i]-mx*s*(i===k?1:-1)/W}:null\r\n    const bind = useGesture({\r\n        onDrag:({first, last, args:[key], movement:[mx,my], direction:[dir]}) => {\r\n            if (sRef.current===0||first) sRef.current = sign(dir);\r\n            sign(dir) && sign(dir)===sRef.current &&\r\n            setW(move(mx,key,sign(dir),min))\r\n            setH({h:clamp(hRef.current+my/window.innerHeight, min, 1)})\r\n            if (!last) return\r\n            wRef.current = springs.map((s:any) => s.w.animation.to || 0)\r\n            hRef.current = spring.h.animation.to as number || 0\r\n        }\r\n    })//, {drag:{lockDirection: true}}) //error if here\r\n    const children = useMemo(() => Children.map(props.children, c=>c), [props.children])\r\n    useEffect(() => {\r\n        const len = (props as any)?.children?.length||0\r\n        if (len===lRef.current) return\r\n        lRef.current = len\r\n        wRef.current = [...wRef.current.map(v=>v-1/len/wRef.current.length), 1/len]\r\n        setW((i) => ({w:wRef.current[i]}))\r\n    },  [props, setW])\r\n    useEffect(() => {\r\n        wRef.current = getWRate(order,lRef.current,width)\r\n        setW(i=>({w:wRef.current[i]}))\r\n    }, [width, setW, order])\r\n    useEffect(() => {\r\n        hRef.current = height||1\r\n        setH({h:hRef.current})\r\n    }, [height, setH])\r\n    return (\r\n        <a.div style={{...styles.cont, height:spring.h.interpolate(v=>`${v*100}%`),\r\n                       ...style}} {...props}>\r\n            {springs.map(({w},key) =>\r\n                <a.div {...bind(key)} {...{key}} style={{\r\n                        ...styles.item, ...styleItem,\r\n                        width:w.interpolate(v => `${100*v}%`),\r\n                        //zIndex:z.interpolate(v => ~~(v*10))\r\n                    }}>\r\n                    {(children as any)[key]}\r\n                </a.div>\r\n            )}\r\n        </a.div>\r\n    )\r\n}\r\n","import React, {FC} from 'react'\r\nimport {useControl} from 'react-three-gui';\r\nimport {Split,} from '../../../src'\r\n\r\nexport const HookSplit:FC = () => {\r\n    const dark  = useControl('dark'  , {type: 'boolean', value: false})\r\n    const size  = useControl('size'  , {type: 'number' , value: 1, min: 0, max: 2})\r\n    const min   = useControl('min'   , {type: 'number' , value: 0, min: 0, max: 1})\r\n    const width = useControl('width' , {type: 'number' , value: 0, min: 0, max: 1})\r\n    const height= useControl('height', {type: 'number' , value: 0, min: 0, max: 1})\r\n    const number= useControl('number', {type: 'number' , value: 3, min: 0, max:10})\r\n    return (\r\n        <div style={{height:\"50vh\"}}>\r\n            <Split {...{dark,size,min,width,height}}>\r\n            {[...Array(~~number)].map((_, num) =>\r\n                <div key={num} style={{width:\"100%\",height:\"100%\",background:`rgba(${[\r\n                    `${num     % 3 * 255 / 3}`,\r\n                    `${(num+1) % 3 * 255 / 3}`,\r\n                    `${(num+2) % 3 * 255 / 3}`\r\n                ].join(`, `)},.1)`}}/>\r\n            )}\r\n            </Split>\r\n        </div>\r\n    )\r\n}\r\nexport const codeSplit =\r\n`import {Split} from '@tsei/core'\r\nexport const Split = (\r\n        <Target\r\n            dark  = {false}\r\n            size  = {1}\r\n            min   = {0}\r\n            width = {0}\r\n            height= {0}>\r\n            <div style={{width:\"100%\",height:\"100%\",background:\"rgba(255,0,0,.1)\"}}/>\r\n            <div style={{width:\"100%\",height:\"100%\",background:\"rgba(0,255,0,.1)\"}}/>\r\n            <div style={{width:\"100%\",height:\"100%\",background:\"rgba(0,0,255,.1)\"}}/>\r\n        </Target>\r\n)`\r\n","import React, {CSSProperties as CSS, FC, useMemo} from 'react'\r\nimport {Props} from '../types'\r\n\r\nexport type Head = FC<Props>\r\nexport const Head:Head = ({\r\n    children, color=\"\", dark=false,size=1, style={}, ...props\r\n}) => {\r\n    style = useMemo<CSS>(()=>({\r\n        fontSize:size*50,\r\n        color:color||dark?\"#818181\":\"#000\",\r\n        width:`max(70vw, 100vw - ${size*200}px)`,\r\n        height:\"auto\",\r\n        margin:\"auto\",\r\n        ...style\r\n    }), [color,dark,size,style])\r\n    return <div {...{children,style,...props}}/>\r\n}\r\n","import React, {FC} from 'react'\r\nimport {useControl} from 'react-three-gui';\r\nimport {Trees, Head} from '../../../src'\r\nconst items = ['0', '1', '2', '3']\r\nexport const HookTrees:FC = () => {\r\n    const dark     = useControl('dark'     , {type: 'boolean', value: false})\r\n    const open     = useControl('open'     , {type: 'boolean', value: true })\r\n    const immediate= useControl('immediate', {type: 'boolean', value: true })\r\n    const hide     = useControl('hide'     , {type: 'boolean', value: false})\r\n    const visible  = useControl('visible'  , {type: 'boolean', value: true })\r\n    const depth    = useControl('depth'    , {type: 'number' , value: 0, min: 0, max: 2})\r\n    const root     = useControl('root'     , {type: 'number' , value: 1, min: 0, max: 2})\r\n    const size     = useControl('size'     , {type: 'number' , value: 1, min: 0, max: 2})\r\n    const icon     = useControl('icon'     , {type: 'select' , value: 'Close' , items:['Minus','Plus','Close']})\r\n    const content  = useControl('content'  , {type: 'select' , value: items[0], items})\r\n    return (\r\n        <Head {...{dark,size}}>\r\n            <Trees {...{dark,open,visible,immediate,hide,depth,root,size,icon,content}}>\r\n                <>\r\n                    <>1</>\r\n                    <>1 - 1</>\r\n                    <>1 - 2</>\r\n                </>\r\n                <>\r\n                    <>2</>\r\n                    <>2 - 1</>\r\n                    <>2 - 2</>\r\n                </>\r\n            </Trees>\r\n        </Head>\r\n    )\r\n}\r\nexport const codeTrees =\r\n`import {Trees} from '@tsei/core'\r\nconst App = () => (\r\n    <Trees\r\n        dark = {false}\r\n        open = {true}\r\n        immediate = {true}\r\n        hide = {false}\r\n        visible = {true}\r\n        depth = {0}\r\n        root = {1}\r\n        size = {1}\r\n        icon = {\"Close\"}\r\n        content={\"0\"}>\r\n        <>\r\n            <>1</>\r\n            <>1 - 1</>\r\n            <>1 - 2</>\r\n        </>\r\n        <>\r\n            <>2</>\r\n            <>2 - 1</>\r\n            <>2 - 2</>\r\n        </>\r\n    </Trees>\r\n)\r\n`\r\n\r\n// const bind = (background=\"\") => ({\r\n//     style: {background},\r\n//     onClick: () => console.log('HI')\r\n// })\r\n// export const Trees:FC = () => {\r\n//     return (\r\n//         <Head {...{dark:0,size:1}}>\r\n//             <TREES content=\"Hook\">\r\n//                 <>\r\n//                     <span {...bind(\"rgba(255,0,0,.1)\")}>Components</span>\r\n//                     <span {...bind(\"rgba(0,255,0,.1)\")}>Card</span>\r\n//                     <span {...bind(\"rgba(0,0,255,.1)\")}>Modal</span>\r\n//                 </>\r\n//                 <span {...bind(\"rgba(0,0,0,.1)\")}>_</span>\r\n//             </TREES>\r\n//         </Head>\r\n//     )\r\n// }\r\n","import React, {Suspense} from 'react'\r\nimport {Flex, Box} from 'react-three-flex'\r\nimport {Canvas} from 'react-three-fiber'\r\n// import {useControl as use} from 'react-three-gui'\r\nimport {TransformControls} from 'drei'\r\n\r\nconst Helper = (props:any) => (\r\n    <TransformControls>\r\n        <mesh {...props}>\r\n            <gridHelper rotation={[Math.PI/2,0,0]} scale={[.5,.5,.5]}/>\r\n            <boxBufferGeometry args={[1, 1, 1]} />\r\n            <meshPhongMaterial color={'orange'} />\r\n        </mesh>\r\n    </TransformControls>\r\n)\r\nexport const HookGrid = () => {\r\n    // const space = use('space', {type:'number', value:1, min:0, max:10})\r\n    // const size = use('size', {type:'number', value:1, min:0, max:10})\r\n    // const dark = use('dark', {type:'boolean', value:false})\r\n    return (\r\n        <Canvas\r\n            style={{width:\"100%\",height:\"100vh\",margin:0,padding:0}}\r\n            shadowMap concurrent noEvents colorManagement pixelRatio={2}>\r\n            <ambientLight intensity={0.4} />\r\n            <pointLight position={[-10, -10, -10]} intensity={1} />\r\n            <Suspense fallback={null}>\r\n                <Flex dir=\"row\" width=\"100vw\" height=\"100%\">\r\n                    <Box width=\"50vw\"><Helper /></Box>\r\n                    <Box width=\"50vw\"><Helper /></Box>\r\n                </Flex>\r\n            </Suspense>\r\n        </Canvas>\r\n    )\r\n}\r\n","//import * as THREE from 'three'\r\nimport  React, {FC, //CSSProperties as CSS, FC, Children\r\n        useRef,//useEffect, useState, useCallback, useLayoutEffect, Suspense,\r\n} from 'react'\r\nimport {useSpring, animated as a} from 'react-spring/three'\r\nimport {useGesture} from 'react-use-gesture'\r\nimport {useFrame,useThree} from 'react-three-fiber'\r\nimport {Props} from '../types'\r\n\r\ntype Vec3<T=number> = [T, T, T]\r\nexport type Player = FC<Props<{\r\n    distance:Vec3,\r\n    position:Vec3,\r\n    rotation:Vec3,\r\n    onWalk:null|((p:Vec3)=>void), //TODO\r\n}>>\r\nexport const Player:Player = ({\r\n    children,\r\n    //distance=[0,1,0],\r\n    position=[0,0,0],\r\n    rotation=[0,0,0],\r\n}) => {\r\n    const gRef = useRef(null)\r\n    const pRef = useRef({position,rotation})\r\n    const [player,setP] = useSpring(()=>pRef.current)\r\n    const {gl:{domElement}} = useThree()\r\n    const set =(dx=0,dy=0,dz=0)=> {\r\n        pRef.current.position = [dx,dy,dz].map((v,i) => v/10+pRef.current.position[i]) as Vec3\r\n        setP({...pRef.current})\r\n    }\r\n    useGesture({\r\n        onDrag :({movement:[,y]}) => set(0, -10*y/window.innerHeight),\r\n        onWheel:({movement:[,y]}) => set(0, -10*y/window.innerHeight)\r\n    }, {domTarget:domElement, eventOptions:{passive:false}})\r\n    useFrame(({camera}) => {\r\n        const pos = player.position.get()\r\n        camera.position.x = pos[0]\r\n        camera.position.y = pos[1]\r\n        camera.position.z = pos[2]\r\n    })\r\n    return (\r\n        <a.group ref={gRef} {...player as any}>\r\n            {children}\r\n        </a.group>\r\n    )\r\n}\r\n","import React from 'react'\r\nimport {useControl as use} from 'react-three-gui';\r\nimport {Stage,Player} from '../../../src'\r\nimport * as THREE from 'three'\r\nimport {Canvas} from 'react-three-fiber'\r\n\r\nexport const HookPlayer = () => {\r\n    const dark   = use('dark'  , {type: 'boolean', value: false})\r\n    const size   = use('size'  , {type: 'number', min: 0, value: 1, max:2})\r\n    // const time   = use('time'  , {type: 'number', min: 0, value: 1, max:2})\r\n    // const pos    = use('amount', {type: \"xypad\" , value: {x:50,y:50} ,scrub:true})\r\n    return (\r\n            <Canvas gl={{antialias:false, logarithmicDepthBuffer: true}}\r\n                    style={{width:'100%',height:'calc(100vh - 2rem)'}}\r\n                    camera={{position:[0,5,0], far:2000}}\r\n                    pixelRatio={window.devicePixelRatio}\r\n                    onCreated ={({gl}:any) => {\r\n                        gl.outputEncoding = THREE.sRGBEncoding\r\n                        gl.toneMapping    = THREE.ACESFilmicToneMapping\r\n                    }}>\r\n                <ambientLight intensity={1.1} />\r\n                <pointLight position={[100, 100, 100]} intensity={2.2} />\r\n                <pointLight position={[-100, -100, -100]} intensity={5} color=\"red\" />\r\n                <Stage {...{dark,size}}/>\r\n                <Player position={[0,5,0]} rotation={[-Math.PI/2,0,0]}>\r\n                    <axesHelper />\r\n                </Player>\r\n            </Canvas>\r\n    )\r\n}\r\nexport const codePlayer =\r\n`import {Stage} from '@tsei/core'\r\nexport const App = () => (\r\n    <Canvas>\r\n        <Stage\r\n            dark={false}\r\n            size={1}/>\r\n    </Canvas>\r\n)\r\n`\r\n","import React from 'react'\r\nimport {useControl as use} from 'react-three-gui';\r\nimport {Stage} from '../../../src'\r\nimport * as THREE from 'three'\r\nimport {Canvas, } from 'react-three-fiber'\r\nimport {TransformControls} from 'drei'\r\n\r\nexport const HookStage = () => {\r\n    const dark   = use('dark'  , {type: 'boolean', value: false})\r\n    const size   = use('size'  , {type: 'number', min: 0, value: 1, max:2})\r\n    const amp    = use('amp'   , {type: 'number', min: 1, value: 1, max:5})\r\n    const dist   = use('dist'  , {type: 'number', min: 1, value: 5, max:10})\r\n    const time   = use('time'  , {type: 'number', min: 0, value: 1, max:2})\r\n    const amount = use('amount', {type: \"xypad\" , value: {x:50,y:50} ,scrub:true})\r\n    // const scale  = use('scale' , {type: 'number', min:  0, value:.1   , max:2})\r\n    // const posY   = use('posY'  , {type: 'number', min:-25, value: 0   , max:25})\r\n    // const posXZ  = use('posXY' , {type: 'xypad' , value: {x:0,y:0}   ,scrub:true})\r\n    return (\r\n            <Canvas gl={{antialias:false, logarithmicDepthBuffer: true}}\r\n                    style={{width:'100%',height:'calc(100vh - 2rem)'}}\r\n                    camera={{position:[0,5,0], far:2000}}\r\n                    pixelRatio={window.devicePixelRatio}\r\n                    onCreated ={({gl}:any) => {\r\n                        gl.outputEncoding = THREE.sRGBEncoding\r\n                        gl.toneMapping    = THREE.ACESFilmicToneMapping\r\n                    }}>\r\n                <ambientLight intensity={1.1} />\r\n                <pointLight position={[100, 100, 100]} intensity={2.2} />\r\n                <pointLight position={[-100, -100, -100]} intensity={5} color=\"red\" />\r\n                <TransformControls>\r\n                    <Stage {...{\r\n                        dark,size,amp,dist,time,amount}}/>\r\n                </TransformControls>\r\n            </Canvas>\r\n    )\r\n}\r\nexport const codeStage =\r\n`import {Stage} from '@tsei/core'\r\nexport const App = () => (\r\n    <Canvas>\r\n        <Stage\r\n            dark={false}\r\n            size={1}/>\r\n    </Canvas>\r\n)\r\n`\r\n","import React, {FC, Suspense} from 'react'\r\nimport {Flex, Box} from 'react-three-flex'\r\nimport {Canvas, useThree} from 'react-three-fiber'\r\nimport {useControl as use} from 'react-three-gui'\r\nimport {useAspect, TransformControls} from 'drei'\r\nimport {Title} from '../../../src'\r\n\r\nconst items = [\"TSEIJP\", \"TEST\\nTEST\\nTEST\"]\r\nconst ANCHORX = [\"center\", \"left\", \"right\"]\r\nconst ANCHORY = [\"middle\", \"top\", \"top-baseline\", \"bottom-baseline\", \"bottom\"]\r\nconst TEXTALIGN  = [\"center\", \"left\", \"right\", \"justify\"]\r\nconst Content:FC = (props) => {\r\n    const {size} = useThree();\r\n    const aspect = useAspect(\"cover\", size.width, size.height, 2);\r\n    return (\r\n        <Flex dir=\"column\" size={[...aspect, 0] as any}  width=\"100%\" height=\"100%\">\r\n            <Box width=\"100%\" height=\"100%\">\r\n                <Title {...props}/>\r\n            </Box>\r\n        </Flex>\r\n    )\r\n}\r\nexport const HookTitle:FC = () => {\r\n    const anchorX   = use('anchorX'   , {type:\"select\", value:  ANCHORX[0], items: ANCHORX})\r\n    const anchorY   = use('anchorY'   , {type:\"select\", value:  ANCHORY[0], items: ANCHORY})\r\n    const textAlign = use('textAllign', {type:\"select\", value:TEXTALIGN[0], items: TEXTALIGN})\r\n    const children  = use('children'  , {type:\"select\", value:items[0], items})\r\n    const maxWidth = use('maxWidth', {type:'number', value:-1, min:-2, max:2})\r\n    const space = use('space', {type:'number', value:1, min:0, max:10})\r\n    const size = use('size', {type:'number', value:1, min:0, max:10})\r\n    const dark = use('dark', {type:'boolean', value:false})\r\n    return (\r\n        <Canvas\r\n            style={{width:\"100%\",height:\"100vh\",margin:0,padding:0}}\r\n            shadowMap concurrent pixelRatio={2}\r\n            noEvents colorManagement\r\n            camera={{position:[0,0,2],far:1000}}\r\n            gl={{powerPreference:'high-performance', alpha:true, antialias:false, stencil:false, depth:false}}\r\n            onCreated={({gl}) => gl.setClearColor('#f5f5f5')}>\r\n            <pointLight position={[-10, -10, -10]} intensity={1} />\r\n            <ambientLight intensity={0.4} />\r\n            <spotLight  castShadow angle={0.3} penumbra ={1} shadow-mapSize-width ={1024}\r\n                        position={[0, 10, 20]} intensity={5} shadow-mapSize-height={1024} />\r\n            <gridHelper position={[0,-.1,1]} scale={[.2,.2,.2]}/>\r\n            <Suspense fallback={null}>\r\n                <TransformControls>\r\n                    <Content {...{\r\n                        children,\r\n                        anchorX,\r\n                        anchorY,\r\n                        textAlign,\r\n                        dark,\r\n                        size,\r\n                        space,\r\n                        maxWidth}}/>\r\n                </TransformControls>\r\n            </Suspense>\r\n        </Canvas>\r\n    )\r\n}\r\nexport const codeTitle =\r\n`import {Title} from '@tsei/core'\r\nconst App = () =>\r\n    <Title\r\n        anchorX=\"center\"\r\n        anchorY=\"center\"\r\n        textAlign=\"center\"\r\n        maxWidth={-1}\r\n        space={[1,1]}\r\n        size={1}\r\n        dark={false}>\r\n        TSEIJP\r\n    </Title>`\r\n","import React, { useMemo, useRef} from 'react'\r\nimport {useFrame} from 'react-three-fiber'\r\nimport {useSpring, a} from 'react-spring/three'\r\nimport * as THREE from 'three'\r\n\r\nconst cropValue=(dir:any)=>Object.assign({},...Object.keys(dir).map(key=>(\r\n    {[key]:{value:dir[key]}}\r\n)))\r\n\r\nconst vertexShader = `\r\nvarying vec2 vUv;\r\nuniform sampler2D map;\r\nuniform float width, height, space, pointSize, zOffset, nearClipping, farClipping;\r\nconst float XtoZ = 1.11146; // tan( 1.0144686 / space ) * space;\r\nconst float YtoZ = 0.83359; // tan( 0.7898090 / space ) * space;\r\n\r\nvoid main() {\r\n    vUv = vec2( position.x / width, position.y / height );\r\n    vec4 color = texture2D( map, vUv );\r\n    float depth = ( color.r + color.g + color.b ) / 3.0;\r\n    float z = ( 1.0 - depth ) * (farClipping - nearClipping) + nearClipping;\r\n    vec4 pos = vec4(\r\n        ( position.x / width - 0.5 ) * z * XtoZ,\r\n        ( position.y / height - 0.5 ) * z * YtoZ,\r\n        - z + zOffset,\r\n        1.0\r\n    );\r\n\r\n    gl_PointSize = pointSize;\r\n    gl_Position = projectionMatrix * modelViewMatrix * pos;\r\n}\r\n`\r\nconst fragmentShader = `\r\nuniform sampler2D map;\r\nvarying vec2 vUv;\r\nvoid main() {\r\n    vec4 color = texture2D( map, vUv );\r\n    gl_FragColor = vec4( color.r, color.g, color.b, .5);\r\n}\r\n`\r\n\r\nexport const Kinect = ({ url,\r\n    position=[0,0,0],\r\n    width=640, nearClipping=1000, depthWrite=false, pointSize=5, space=2,\r\n    height=850, farClipping=4000, depthTest=false, zOffset=1000, ...props\r\n}:any) => {\r\n    // ******************** Mount ******************** //\r\n    const map = useMemo<any>(()=>{\r\n        const video = document.createElement('video');\r\n        if (!video) return\r\n        video.src   = url;\r\n        video.loop  = true; video.load();\r\n        video.muted = true; video.play();\r\n        return new THREE.VideoTexture(video)\r\n    }, [url])\r\n    const points   = useRef<any>()\r\n    const geometry = useRef<any>()\r\n    const material = useRef<any>()\r\n    const uniforms = useSpring(() => cropValue({\r\n        width, nearClipping, map, space,\r\n        height, farClipping, pointSize, zOffset\r\n    }))\r\n    // ******************** Render ******************** //\r\n    useFrame(()=>{\r\n        const pos = new Float32Array( width*height*3 )\r\n        for ( var i=0, j=0, l=pos.length; i<l; i+=3, j++ ) {\r\n            pos[ i ] = j % width;\r\n            pos[i+1] = Math.floor( j/width );\r\n        }\r\n        geometry.current.setAttribute('position', new THREE.BufferAttribute(pos,3));\r\n        points.current.position.x = position[0]\r\n        points.current.position.y = position[1]\r\n        points.current.position.z = position[2]\r\n        material.current.depthTest  = depthTest\r\n        material.current.depthWrite = depthWrite\r\n        material.current.uniforms = cropValue({\r\n            width, nearClipping, map, space,\r\n            height, farClipping, pointSize, zOffset\r\n        })\r\n    })\r\n    return (\r\n        <a.points {...props}  ref={points} position={position} >\r\n            <a.bufferGeometry ref={geometry} attach=\"geometry\"/>\r\n            <a.shaderMaterial ref={material} attach=\"material\"\r\n                transparent blending={THREE.AdditiveBlending}\r\n                {...{...uniforms,\r\n                    depthTest, fragmentShader,\r\n                    depthWrite, vertexShader,\r\n                }}/>\r\n        </a.points>\r\n    )\r\n}\r\n","import React, {FC} from 'react'\r\nimport * as THREE from 'three'\r\nimport {Canvas, } from 'react-three-fiber'\r\nimport {useControl as use} from 'react-three-gui';\r\nimport {TransformControls} from 'drei'\r\nimport {Kinect} from '../../../src'\r\n\r\nexport const HookKinect :FC = () => {\r\n    const depthTest = use('depthTest', {type:'boolean', value:false, })\r\n    const depthWrite = use('depthWrite', {type:'boolean', value:false})\r\n    const nearClipping = use('nearClipping', {type:'number', value:1000, min:0, max:2000})\r\n    const farClipping = use('farClipping', {type:'number', value:4000, min:0, max:8000})\r\n    const pointSize = use('pointSize', {type:'number', value:5, min:0, max:10, spring: true})\r\n    const zOffset = use('zOffset', {type:'number', value:1000, min:0, max:2000})\r\n    const space = use('space', {type:'number', value:5, min:0, max:10})\r\n    const url = use('url', {type: \"select\", items: [\"/static/core/kinect.mp4\", \"\"]})\r\n    const props = {\r\n        nearClipping,\r\n        farClipping,\r\n        depthTest,\r\n        depthWrite,\r\n        pointSize,\r\n        zOffset,\r\n        space,\r\n        url,\r\n    }\r\n    return (\r\n        <Canvas gl={{antialias:false, logarithmicDepthBuffer: true}}\r\n                style={{width:'100%',height:'calc(100vh - 2rem)'}}\r\n                camera={{position:[0,0,500], far:2000}}\r\n                pixelRatio={window.devicePixelRatio}\r\n                onCreated ={({gl}:any) => {\r\n                    gl.outputEncoding = THREE.sRGBEncoding\r\n                    gl.toneMapping    = THREE.ACESFilmicToneMapping\r\n                }}>\r\n            <ambientLight intensity={1.1} />\r\n            <pointLight position={[100, 100, 100]} intensity={2.2} />\r\n            <pointLight position={[-100, -100, -100]} intensity={5} color=\"red\" />\r\n            <gridHelper position={[0,-1000,0]} args={[2000,50]}/>\r\n            <TransformControls>\r\n                <Kinect {...props}/>\r\n            </TransformControls>\r\n        </Canvas>\r\n    )\r\n}\r\nexport const codeKinect =\r\n`\r\nimport {Kienct} from '@tsei/core'\r\nimport {Canvas} from 'react-three-fiber'\r\nconst MyCanvas = () =>\r\n    <Canvas>\r\n        <Kinect />\r\n    </Canvas\r\n`\r\n","// Auto-generated by https://github.com/react-spring/gltfjsx\r\n\r\nimport * as THREE from \"three\"\r\nimport React, { useEffect, useRef, useState } from \"react\"\r\nimport { useLoader, useFrame } from \"react-three-fiber\"\r\nimport { GLTFLoader } from \"three/examples/jsm/loaders/GLTFLoader\"\r\n//import { draco } from 'drei'\r\n\r\nconst defaultURL = \"https://tseijp-static.s3.ap-northeast-1.amazonaws.com/Xbot.glb\"\r\n\r\nexport const Model = ({\r\n    url=defaultURL,dark=true, size=50, position=[0,-11,0],scale=[7,7,7]}:any) => {\r\n    const {animations, nodes}:any = useLoader(GLTFLoader, url, )\r\n    const group = useRef<any>(null)\r\n    const actions = useRef<any>(null)\r\n    const [mixer] = useState<any>(() => new THREE.AnimationMixer(null as any))\r\n    const modelPos  = {x:position[0],y:position[2]}\r\n    useFrame(({camera}:any, delta)=>{\r\n        mixer.update(delta)\r\n        if(! group?.current?.position) return\r\n        group.current.position.x = modelPos.x\r\n        group.current.position.z = modelPos.y\r\n        camera.updateProjectionMatrix(void (\r\n            camera.lookAt(new THREE.Vector3(modelPos.x/2,0,modelPos.y/2))))\r\n    })\r\n    useEffect(() => {\r\n        const actionNum = size > 50 ? 3 : 1\r\n        actions.current = { idle: mixer.clipAction(animations[actionNum], group.current) }\r\n        actions.current.idle.play()\r\n        actions.current.idle.weight = 1\r\n        actions.current.idle.timeScale = 1\r\n        console.log(actions.current.idle)\r\n        return () => animations.forEach((clip:any) => mixer.uncacheClip(clip))\r\n    }, [animations,mixer,size])\r\n    if (!nodes)\r\n        return null\r\n    return (\r\n        <group ref={group} {...{position, scale}} dispose={null}>\r\n          <group rotation={[Math.PI/2,0,0]} scale={[0.01,0.01,0.01]}>\r\n            <primitive object={nodes[\"mixamorigHips\"]} />\r\n            <skinnedMesh geometry={nodes[\"Beta_Joints\"].geometry}\r\n                skeleton={nodes[\"Beta_Joints\"].skeleton}\r\n                rotation={[-Math.PI/2,0,0]} scale={[100, 100, 100]}>\r\n                <meshPhongMaterial\r\n                    attach=\"material\" color={dark?0x212121:0x000000}\r\n                    depthWrite={false} skinning />\r\n            </skinnedMesh>\r\n            <skinnedMesh geometry={nodes[\"Beta_Surface\"].geometry}\r\n                skeleton={nodes[\"Beta_Surface\"].skeleton}\r\n                rotation={[-Math.PI/2,0,0]} scale={[100, 100, 100]}>\r\n                <meshPhongMaterial\r\n                    attach=\"material\" color={dark?0x000000:0xffffff}\r\n                    depthWrite={false} skinning />\r\n            </skinnedMesh>\r\n          </group>\r\n        </group>\r\n    )\r\n}\r\n","import React, {useCallback, useMemo, useRef} from 'react'\r\nimport { useFrame } from 'react-three-fiber'\r\nimport * as THREE from 'three'\r\n\r\nexport const Swarm = ({ dark=false, size=50, count=25}:any) => {\r\n    const mesh = useRef<any>(null)\r\n    const dummy = useMemo(() => new THREE.Object3D(), [])\r\n    const random = useCallback((mul=1,add=0)=>add+Math.random()*mul, [])\r\n    const particles = useMemo(() => [...Array(count)].map(()=>({\r\n        t     :random(100),       xFactor:random(40,-20), mx:0,\r\n        factor:random(100,2),     yFactor:random(40,-20), my:0,\r\n        speed :random(1/200,0.01),zFactor:random(40,-20),})), [random,count])\r\n    useFrame(() => {\r\n        particles.forEach((particle, i) => {\r\n            let { t, factor, speed, xFactor, yFactor, zFactor } = particle\r\n            t = particle.t += speed / 2\r\n            const a = Math.cos(t) + Math.sin(t * 1) / 10\r\n            const b = Math.sin(t) + Math.cos(t * 2) / 10\r\n            const s = Math.max(1.5, Math.cos(t) * size / 10)\r\n            dummy.position.set(\r\n                (particle.mx/10)*a + xFactor + Math.cos((t/10)*factor) + (Math.sin(t*1)*factor)/10,\r\n                (particle.my/10)*b + yFactor + Math.sin((t/10)*factor) + (Math.cos(t*2)*factor)/10,\r\n                (particle.my/10)*b + zFactor + Math.cos((t/10)*factor) + (Math.sin(t*3)*factor)/10,\r\n            )\r\n            dummy.scale.set(s, s, s)\r\n            dummy.updateMatrix()\r\n            mesh.current.setMatrixAt(i, dummy.matrix)\r\n        })\r\n        mesh.current.instanceMatrix.needsUpdate = true\r\n    })\r\n    return (\r\n        <>\r\n            <instancedMesh ref={mesh} args={[null,null,count] as [any,any,number]}>\r\n                <sphereBufferGeometry attach=\"geometry\" args={[1, 32, 32]} />\r\n                <meshPhongMaterial attach=\"material\" color={dark?0x000000:0xffffff} />\r\n            </instancedMesh>\r\n        </>\r\n    )\r\n}\r\n","import React, {FC, Suspense, } from 'react'\r\nimport * as THREE from 'three'\r\nimport {Canvas} from \"react-three-fiber\"\r\nimport {useControl} from 'react-three-gui'\r\nimport {Model, Swarm} from \"../../../src\"\r\nexport const HookModel :FC = () => {\r\n    const dark  = useControl('dark' , {type: 'boolean', value: false})\r\n    const size  = useControl('size' , {type: 'number' , value: 1, min: 0, max:  2})\r\n    const scl   = useControl('scale', {type: 'number' , value: 7, min: 0, max: 15})\r\n    const pos   = useControl('position', {type:'xypad', value: {x:0,y:0}, scrub:true, distance:10})\r\n    return (\r\n        <Canvas gl={{antialias:false, logarithmicDepthBuffer:true}}\r\n                style={{width:\"100%\", height:\"calc(100vh - 2rem)\"}}\r\n                camera={{position:[0,-2,3]}}\r\n                pixelRatio={window.devicePixelRatio}\r\n                onCreated={({gl})=>{gl.outputEncoding=THREE.sRGBEncoding}}>\r\n            <fog attach=\"fog\" args={[0xdfdfdf, 35, 65]} />\r\n            <hemisphereLight intensity={0.68} position={[0, 50, 0]} />\r\n            <directionalLight position={[-8, 12, 8]} castShadow />\r\n            <Suspense fallback={null}>\r\n                <Model {...{dark,size,position:[pos.x,-11,pos.y],scale:[scl,scl,scl]}}/>\r\n                <Swarm  {...{dark,size}}/>\r\n            </Suspense>\r\n        </Canvas>\r\n    )\r\n}\r\n","// Auto-generated by https://github.com/react-spring/gltfjsx\r\n// https://codesandbox.io/s/r3f-character-interaction-voef7?file=/src/Character.jsx:1209-1219\r\nimport * as THREE from \"three\"\r\nimport React, {useRef, useState} from \"react\"\r\nimport {useLoader,useFrame} from \"react-three-fiber\"\r\nimport {GLTFLoader} from \"three/examples/jsm/loaders/GLTFLoader\"\r\nconst defaultURL =\r\n   [\"/static/core/FallGuyDefalti.glb\",\r\n    \"/static/core/FallGuyDefalti.png\"]\r\nexport const Motion = ({\r\n    gltfURL=\"/static/core/FallGuyHiphopDancing.glb\",//defaultURL[0],\r\n    textureURL=defaultURL[1],\r\n    action=0, dark=true, size=50, ...props\r\n}) => {\r\n    const group   = useRef<any>(null)\r\n    const gltf    = useLoader<any>(GLTFLoader, gltfURL)\r\n    const texture = useLoader(THREE.TextureLoader, textureURL);\r\n    const actions = useRef<any>(null)\r\n    const [mixer] = useState<any>(() => new THREE.AnimationMixer(null as any))\r\n    React.useEffect(() => {\r\n        const num = -1<action && action<gltf.animations.length ? action: 0\r\n        const idle = mixer.clipAction(gltf.animations[num], group.current)\r\n        actions.current = { idle }\r\n        actions.current.idle.play()\r\n        return () => gltf.animations.forEach((clip:any) => mixer.uncacheClip(clip))\r\n    }, [action, gltf.animations, mixer])\r\n    useFrame((_, delta) => {mixer.update(delta)})\r\n    return (\r\n        <group ref={group} {...props} dispose={null}>\r\n            <group scale={[.01,.01,.01]} rotation={[1.3,0,0]} position={[0,-1,2]}>\r\n                <primitive object={gltf.nodes['mixamorigHips']} />\r\n                <skinnedMesh\r\n                    geometry={gltf.nodes[\"Body\"].children[0].geometry}\r\n                    skeleton={gltf.nodes[\"Body\"].children[0].skeleton}>\r\n                    <meshPhongMaterial attach=\"material\" map={texture} skinning/>\r\n                </skinnedMesh>\r\n                <skinnedMesh\r\n                    geometry={gltf.nodes[\"Body\"].children[1].geometry}\r\n                    skeleton={gltf.nodes[\"Body\"].children[1].skeleton}\r\n                    material={gltf.nodes[\"Body\"].children[1].material}>\r\n                </skinnedMesh>\r\n                <skinnedMesh\r\n                    geometry={gltf.nodes[\"Body\"].children[2].geometry}\r\n                    skeleton={gltf.nodes[\"Body\"].children[2].skeleton}\r\n                    material={gltf.nodes[\"Body\"].children[2].material}>\r\n                </skinnedMesh>\r\n            </group>\r\n        </group>\r\n    )\r\n}\r\n//<primitive object={gltf.nodes[\"Scene\"]} />\r\n","import React, {FC, Suspense, } from 'react'\r\nimport * as THREE from 'three'\r\nimport {Canvas} from \"react-three-fiber\"\r\nimport {useControl as use} from 'react-three-gui'\r\nimport {Motion} from \"../../../src\"\r\nexport const HookMotion :FC = () => {\r\n    const dark = use('dark' , {type: 'boolean', value: false})\r\n    const size = use('size' , {type: 'number' , distance:2, value: 1})\r\n    const scl  = use('scale', {type: 'number' , distance:2, value: 1})\r\n    const xz   = use('xz'   , {type: 'xypad'  , distance:2, value: {x:0,y:0}, scrub:true})\r\n    const y    = use('y'    , {type: 'number' , distance:2, value: 0, min:-1})\r\n    const rxz  = use('rxz'  , {type: 'xypad'  , distance:2, value: {x:0,y:0}, scrub:true})\r\n    const ry   = use('ry'   , {type: 'number' , distance:2, value: 0, min:-1})\r\n    const action= use('action'   , {type: 'number' , distance:10, value: 0})\r\n    return (\r\n        <Canvas gl={{antialias:false, logarithmicDepthBuffer:true}}\r\n                style={{width:\"100%\", height:\"calc(100vh - 2rem)\"}}\r\n                pixelRatio={window.devicePixelRatio}\r\n                onCreated={({gl})=>{\r\n                    gl.outputEncoding=THREE.sRGBEncoding\r\n                }}>\r\n            {/*<fog attach=\"fog\" args={[0xdfdfdf, 35, 65]} />*/}\r\n            <hemisphereLight intensity={0.68} position={[0, 50, 0]} />\r\n            <directionalLight position={[-8, 12, 8]} castShadow />\r\n            <Suspense fallback={null}>\r\n                <Motion {...{\r\n                    dark,size,action:~~action,\r\n                    position:[ xz.x,  y,  xz.y],\r\n                    rotation:[rxz.y, rxz.x,-ry],\r\n                    scale   :[scl,scl,scl]}}/>\r\n            </Suspense>\r\n        </Canvas>\r\n    )\r\n}\r\nexport const codeMotion =\r\n`import {Motion} from '@tsei/core'\r\nconst App = () => (\r\n    <Canvas {...{config}}>\r\n        <Motion\r\n            dark={false}\r\n            size={1}\r\n            position={[0,-1,0]}\r\n            rotation={[0,.5,0]}\r\n            scale   ={[1,1,1]}\r\n            />\r\n    </Canvas>\r\n)\r\n`\r\n","import axios  from 'axios'\r\nimport * as CODES from './codes'\r\nimport {Credit, URL, Page, topUp} from '../src'\r\n// ************************* FOR NOTE ************************* //\r\nexport const scrollTop=()=>document.getElementById('root')?.scroll({top:0,left:0,behavior:'smooth',});\r\nexport const pageConfig = { onChange:() => scrollTop() }\r\nexport type CustomPage =\r\n   {portname:string[], isHome:boolean,\r\n    pathname:string[], status:string, }\r\nexport const customPage : Partial<Page<CustomPage>> = {\r\n    isSign:false,status:\"\", portname: ({isLocal}) => isLocal?[\"3000\",\"8000\",\"8000\"]:[],\r\n    isHome:({id}) => !id  , pathname: ({id,status}) =>\r\n        [   `/note/${ id?id+'/':'' }`,\r\n        `/api/note/${ id?id+'/':'' }`,\r\n        status!==\"UP\"? `/auth/`: `/api/user/`]\r\n}\r\nexport const fetcher = async (url:URL,headers={'Content-Type':'application/json'}) =>\r\n   axios.get(url.href, {headers})\r\n        .then(res => {\r\n            if(!res || res.status!==200)\r\n                throw new Error('Bad Request')\r\n            return res.data\r\n        })\r\nexport const signin = async (url:URL, cred:Credit, headers={'Content-Type':'application/json'}) =>\r\n   axios.post(url.href, cred, {headers})\r\n        .then((res) => {\r\n            if (res.status>201 || !res.data.token)\r\n                throw new Error('Bad Request')\r\n            return {username:cred.username, authtoken:res.data.token}\r\n        })\r\n\r\n// ************************* FOR HOOK ************************* //\r\nexport const hookTree = [\r\n    [\"Components\",\"Card\",\"Code\",\"Grow\",],//\"Head\",\"Icon\"],\r\n    [\"Containers\",\"Notes\",\"Split\",\"Trees\"],\r\n    [\"Mesh\",\"Kinect\",\"Model\",\"Motion\"],\r\n    [\"Home\",\"Player\", \"Stage\", \"Title\"]\r\n]\r\nexport type  HookPage = {pathname:string, Hook:any, code:any, codes:any}\r\nconst getval = (obj={},key='') => key in obj ? (obj as any)[key] : \"\"\r\nexport const hookPage = {\r\n    pathname: ({id=\"\"}) => `/hook/${id}`,\r\n    Hook : ({id=\"\",codes={}}) => getval(codes, 'Hook' + topUp(id)), //'page' +\r\n    code : ({id=\"\",codes={}}) => getval(codes, 'code' + topUp(id)),\r\n    codes: Object.assign({}, ...Object.entries(CODES).map(([k,v])=>({[k]:v})))\r\n}\r\n","/** ************************* USE PAGE *************************\r\n * This is a hook to record the URL of the Restfl API\r\n *   - `const [page, set] = usePage({id:null,home:({id})=>!id}, config)`\r\n *   - `const onClick=()=>set({id:90}, config)`\r\n *   - ```\r\n *     {Page, id:null}  <=data=> (DB1 : URL1 by id), (DB2 : URL2 by id)\r\n *          | change id\r\n *          |  => change URLs by id (e.g. /api to /api/90)\r\n *          v  => change user state (e.g. home:true to home:false)\r\n *     {New Page, id:90}\r\n *     ```\r\n * # ***** usePage API Configs *****\r\n * ## Props Values\r\n *   - `const _ = usePage(@initPage, @config)`\r\n *   - @initPage = {\r\n *         @isHome  :boolean\r\n *         @isLocal :boolean\r\n *         @id      :string e.g. 2\r\n *         @protocol:string e.g. \"https:\"\r\n *         @hostname:string e.g. \"localhost\"\r\n *         @portname:string e.g. \"3000\"   or [\"3000\"(npm), \"8000\"(django)]\r\n *         @pathname:string e.g. \"/note/\" or [\"/note/\", \"/api/note/\"]\r\n *         @search  :string e.g. \"/note/\" or [\"/note/\", \"/api/note/\"]\r\n *         @hash    :string e.g. \"#note\"  or [\"#note\"]\r\n *   - @config = {TODO}\r\n *   - type MultiPage<T=any> = T|T[]|((p:Page)=>T|T[])\r\n * ## Return Values\r\n *   - @page : {...@initPage(as T|T[]),\r\n *         @url ?: from initPage parameters    e.g. \"http...\" or [\"http...\", ...more]\r\n *         @XXX ?: any value you set when init e.g. @home:true\r\n *   - @set   : (args) => void ( setState )\r\n ** ************************* ********* *************************/\r\n\r\nimport {useEffect, useState, useCallback, useRef} from 'react'\r\nimport {pageConfig as defaultConf, defaultPage, normPage} from '../utils'\r\nimport {Page , PageConfig as Conf, BasicProps, BasicState, BasicAction} from '../types'\r\nexport const usePage = <T extends {}={}>(\r\n    props :BasicProps<Partial<Page<T>>>,//BasicProps<Page<T>>,\r\n    config:BasicProps<Partial<Conf<T>>>={},\r\n) : [Page<T>, BasicAction<Partial<Page<T>>>] => {\r\n    if (typeof props===\"function\") props  = props()\r\n    if (typeof config===\"function\")config = config()\r\n    const pageRef = useRef<Page<T>>({...defaultPage, ...props } as Page<T>)\r\n    const confRef = useRef<Conf<T>>({...defaultConf, ...config} as Conf<T>)\r\n    const [page,set] = useState<Page<T>>( normPage(pageRef.current) )\r\n    const setPage = useCallback((state:BasicState<Partial<Page<T>>>) => {\r\n        if (typeof state===\"function\")\r\n            state = state(pageRef.current as Partial<Page<T>>)\r\n        pageRef.current = {...pageRef.current, ...state}\r\n        set(pre => {\r\n            const newPage = normPage(pageRef.current)\r\n            if (pre.pathname===newPage.pathname)\r\n                return newPage\r\n            window.history.pushState('','',\r\n                newPage.pathname instanceof Array\r\n                  ? newPage.pathname[0]||''\r\n                  : newPage.pathname   ||'')\r\n            return  newPage\r\n        })\r\n    }, [set])\r\n    useEffect(() => {\r\n        const {onChange} = confRef.current\r\n        typeof onChange===\"function\" && onChange()\r\n    }, [page.id])\r\n    return [page, setPage]\r\n}\r\n","import React, {CSSProperties as CSS, FC} from 'react';\r\nimport {useGrid}  from 'use-grid';\r\nimport {Controls} from 'react-three-gui';\r\nimport {Helmet}   from 'react-helmet-async';\r\nimport {hookTree,hookPage,HookPage,pageConfig} from './utils';\r\n\r\nimport {is,topUp,usePage,Card,Code,Notes,Sides,Split,Trees,Trans} from '../src'\r\nconst styles:{[key:string]:CSS} = {\r\n    top : {position:\"relative\",transition:\"1s\",overflowX:\"hidden\",minHeight:\"100%\",},\r\n    item: {position:\"relative\",height:\"100vh\",},\r\n    card: {position:\"relative\",overflow:\"hidden\",width:\"100%\",height:\"100%\",},\r\n    ctrl: {position:\"relative\",width:\"100%\",top:0,left:0,margin:0,padding:0},\r\n}\r\nconst CardHook:FC = (props) => <Card min={-1} style={styles.card} rate={.1} {...props}/>\r\nexport const Hook:FC = () => {\r\n    const [dark, setDark] = useGrid<number>({init:0, md:1, lg:0  })\r\n    const [size, setSize] = useGrid<number>({init:0, md:1, lg:1.5})\r\n    const [page, setPage] = usePage<HookPage>(hookPage, pageConfig)\r\n    const [side, setSide] = useGrid({xs:0,lg:89/233})\r\n    return (\r\n    <div style={{...styles.top,background:dark?\"#000\":\"#fff\"}}>\r\n        {   (page.hash===\"#app\"&&page.Hook&&<page.Hook/>)\r\n        ||  (page.hash===\"#raw\"&&page.code&&<>{page.code}</>)\r\n        ||  (\r\n        <Split order={page.Hook?[side,-1]:[1,0]} min={.1} styleItem={styles.item}>\r\n            <Notes {...{dark,size,space:\"1rem\"}}>\r\n                <CardHook {...{dark,size}}>{page.Hook &&\r\n                    <Controls\r\n                        title={topUp(page.id)} anchor='top_left'\r\n                        style={{background:dark?\"#212121\":\"#fff\",...styles.ctrl,\r\n                                color:dark?\"#818181\":\"#000\",fontSize:size*25,x:0,y:0}}\r\n                        collapsed={true}/>}\r\n                </CardHook>\r\n                <CardHook {...{dark,size}}>\r\n                    <Trees  {...{dark,size:size/2,root:page.id?0:1}}\r\n                            {...(page.id?{fontSize:\"14px\"}:{})}\r\n                            topStyle={{padding:page.Hook?25*size:100*size}}\r\n                            content ={\r\n                            <span onClick={() => setPage({id:\"\"})}>Hook</span>}>\r\n                        { hookTree.map((ids,i) => ids instanceof Array\r\n                        ?   <span key={i}>{ ids.map((id, j) =>\r\n                            <span key={id} onClick={() => j&&setPage({id})}>{id}</span>) }</span>\r\n                        :   <span key={i}  onClick={() =>    setPage({id:ids})}>{ids}</span>) }\r\n                    </Trees>\r\n                </CardHook>\r\n            </Notes>\r\n            <Notes {...{dark,size,space:\"1rem\"}}>\r\n                <CardHook {...{dark,size}}>\r\n                    {page.Hook && <page.Hook />}\r\n                </CardHook>\r\n                { page.code && is.str(page.code) &&\r\n                <CardHook {...{dark,size}}>\r\n                    <Code {...{dark,size,code:page.code}}/>\r\n                </CardHook> }\r\n            </Notes>\r\n        </Split>)}\r\n        <Sides {...{size}}>\r\n            <a style={{color:\"#818181\"}} href=\"/\"    >Home</a>\r\n            <a style={{color:\"#818181\"}} href=\"/hook\">Hook</a>\r\n            <a style={{color:\"#818181\"}} href=\"/note\">Note</a>\r\n        </Sides>\r\n        <Trans {...{size}}>\r\n            <div onClick={()=>setDark((p:any)=>({md:p.lg,lg:p.md}))}>{dark?'':''}</div>\r\n            <div onClick={()=>setSize((p:any)=>({md:p.lg,lg:p.md}))}>{size<75?'':''}</div>\r\n            <div onClick={()=>setSide((p:any)=>p.lg?{xs:0,sm:0,lg:0}:{xs:0,sm:250,lg:1/3})}>{side?'':''}</div>\r\n            <div onClick={()=>setPage(p=>({hash:p.hash!==\"#app\"?\"#app\":\"\"}))}>{page.hash===\"#app\"?'':''}</div>\r\n            <div onClick={()=>setPage(p=>({hash:p.hash!==\"#raw\"?\"#raw\":\"\"}))}>{page.hash===\"#raw\"?'':''}</div>\r\n        </Trans>\r\n        <Helmet>\r\n            <title>TSEI.jp {topUp(page.id)}</title>\r\n            <link rel=\"canonical\" href=\"https://tsei.jp/\" />\r\n        </Helmet>\r\n    </div>\r\n    )\r\n}\r\n","import React, {CSSProperties as CSS, FC, Suspense, useState} from 'react'\r\n//import { Card, Foot, Head } from '../src/components'\r\nimport { /*Modal, Pills, */Sides, Trans } from '../src/containers'\r\nimport { useGrid } from 'use-grid'\r\nimport { Canvas } from 'react-three-fiber'\r\nimport { Helmet } from 'react-helmet-async';\r\nimport { Kinect } from '../src'\r\nimport { TransformControls } from 'drei'\r\n// import {C, H, Render} from 'react-mol'\r\n// import * as THREE from 'three'\r\n// import {Provider} from 'jotai'\r\n// import { EffectComposer } from 'three/examples/jsm/postprocessing/EffectComposer'\r\n// import { ShaderPass } from 'three/examples/jsm/postprocessing/ShaderPass'\r\n// import { RenderPass } from 'three/examples/jsm/postprocessing/RenderPass'\r\nconst styles:{[key:string]:CSS} = {\r\n    top: {position:\"fixed\",top:0,left:0,width:'100%',height:'100%'},\r\n}\r\nexport const None :FC = () => {\r\n    const [lang, setLang] = useState<string>(window?.navigator?.language||'ja')\r\n    const [dark, setDark] = useGrid<boolean>({md:true, lg:false})\r\n    const [size, setSize] = useGrid<number> ({md:1    , lg:1.5 })\r\n    return (\r\n        <>\r\n            <div style={{...styles.top, background:dark?\"#000\":\"#fff\"}}>\r\n                <Canvas gl={{ alpha: false, antialias: false, logarithmicDepthBuffer: true }}\r\n                        camera={{ position:[0,0,500], far:2000 }}\r\n                        pixelRatio={window.devicePixelRatio}>\r\n                    <ambientLight intensity={1.1} />\r\n                    <pointLight position={[100, 100, 100]} intensity={2.2} />\r\n                    <pointLight position={[-100, -100, -100]} intensity={5} color=\"red\" />\r\n                    <gridHelper position={[0,-1000,0]} args={[2000,50]}/>\r\n                    <Suspense fallback={null}>\r\n                        <TransformControls>\r\n                            <Kinect url=\"/static/core/kinect.mp4\"/>\r\n                        </TransformControls>\r\n                    </Suspense>\r\n                </Canvas>\r\n            </div>\r\n            <Helmet>\r\n                <title>404 NOT FOUND</title>\r\n                <link rel=\"canonical\" href=\"https://tsei.jp/\" />\r\n            </Helmet>\r\n            <Sides {...{size}}>\r\n                <a style={{color:\"#818181\"}} href=\"/\"    >Home</a>\r\n                <a style={{color:\"#818181\"}} href=\"/hook\">Hook</a>\r\n                <a style={{color:\"#818181\"}} href=\"/note\">Note</a>\r\n            </Sides>\r\n            <Trans {...{size}}>\r\n                <div onClick={()=>setLang(p=>p!=='ja'?'en':'ja')}>{lang.toUpperCase()}</div>\r\n                <div onClick={()=>setDark((p:any)=>({md:p.lg,lg:p.md}))}>{dark?'':''}</div>\r\n                <div onClick={()=>setSize((p:any)=>({md:p.lg,lg:p.md}))}>{size<75?'':''}</div>\r\n            </Trans>\r\n        </>\r\n    )\r\n}\r\n","import React, {CSSProperties as CSS,FC,useEffect,useCallback,useMemo} from 'react';\r\nimport {useSpring, animated as a} from 'react-spring';\r\nimport {useGesture} from 'react-use-gesture';\r\nimport {createPortal} from 'react-dom';\r\nimport {Props} from '../types';\r\nexport type Modal = FC<Props<{open:boolean}>>\r\nexport const Modal:Modal = ({\r\n        open=false, onClose=null, dark=false, size=1, //onOpen=null,\r\n        children, color=\"\", ...props\r\n    }) => {\r\n    const width = useMemo(()=>500 * size,[size])\r\n    const [spring, set] = useSpring(()=>({x:0,y:-width,scale:0}))\r\n    useEffect(()=>{open&&set({x:0,y:0,scale:1})}, [open, set])\r\n    const close=useCallback( (vx=0,vy=0) => {\r\n        set({x:vx*width, y:(vy-1)*width, scale:0})\r\n        onClose && setTimeout(()=>onClose(), vx**2+vy**2)\r\n    }, [onClose, width, set] )\r\n    const bind = useGesture({\r\n        onHover : ({hovering}) => set({scale:hovering?0.9:1}),\r\n        onDrag : ({last,down,vxvy:[vx,vy],movement:[mx,my],cancel}) => {\r\n            if ((my<-width*.5||width*.5<my) && cancel) cancel()\r\n            if (!last) return set({x:down?mx:0,y:down?my:0})\r\n            return (mx**2>width**2/4||vx**2+vy**2>10)\r\n                ? close(vx,vy)\r\n                : set({x:0,y:0,scale:1})\r\n        },\r\n    })\r\n    const root = useMemo<HTMLElement|null>(()=>document.getElementById('root'),[])\r\n    const style = useMemo<CSS>(()=>({\r\n        left:0, width:\"100%\",  display:\"flex\",justifyContent:\"center\",\r\n        top:0, height:\"100%\", position:\"fixed\",   alignItems:\"center\",\r\n        transition:\"1s\", color:color||dark?\"#212121\":\"#000\",\r\n        zIndex:200,background:`rgba(${dark?\"80,80,80\":\"0,0,0\"},.5)`, ...props.style\r\n    }), [dark, color, props.style])\r\n    return open ? createPortal(\r\n        <div style={style} onClick={()=>onClose&&onClose()}>\r\n            <a.div style={{position:\"relative\",...spring}} {...bind()}\r\n                onClick={e=>e.stopPropagation()}>\r\n                {children}\r\n            </a.div>\r\n        </div>\r\n    , root as HTMLElement) : null\r\n}\r\n","import React, {FC,Children,CSSProperties as CSS,\r\n    useCallback,useMemo,useState,useRef} from 'react'\r\nimport {useSprings, animated} from 'react-spring'\r\nimport {Props} from '../types'\r\nconst styles:{[key:string]:CSS} = {\r\n    pill: {position:\"absolute\",padding:\"0px\",zIndex:1,transform:`translate(-50%,-50%)`,}\r\n}\r\nexport type Pills = FC<Props<{\r\n    position: {x:number, y:number, r:number},\r\n    depth:number, rate:number, size:number,\r\n    isOpen:boolean\r\n}>>\r\nexport const Pills:Pills = ({\r\n    position={x:0,y:0,r:Math.PI/4}, depth=0, rate=1.414,\r\n    size=1, isOpen=true, ...props\r\n}) => {\r\n    const length = useMemo( () => (props?.children as any)?.length||1, [props] )\r\n    const childPos = useRef( Array(length).fill(position) )\r\n    const fn = useCallback(() => (i=0) => {\r\n        const r = position.r/2 + (Math.PI/2) * ((length-i-1)*10+1)/((length-1)*10+2)-Math.PI/8\r\n        const x = isOpen ?  50*rate*size*Math.cos(r) : 0\r\n        const y = isOpen ? -50*rate*size*Math.sin(r) : 0\r\n        childPos.current[i] = {x,y:-y,r}\r\n        return {x, y, scale:isOpen?1:0 }\r\n    }, [isOpen, length, position.r, rate, size])\r\n    const [springs, set] = useSprings( length, fn() )\r\n    const [childHub, setChildHub] = useState( Array(length).fill(false) )\r\n    const setHub = useCallback((e, key)=>{\r\n        setChildHub(p => Object.assign([], p, {[key]:!p[key]}))\r\n        e.stopPropagation()\r\n    },[])\r\n    const children = useMemo(() => Children.map( props.children, (child,key) => {\r\n        set(fn())\r\n        return child && (child as any)?.props?.children\r\n          ? React.cloneElement(child as any, {children:\r\n                <Pills {...{key, isOpen:isOpen&&childHub[key],\r\n                    depth:depth+1, position:childPos.current[key],\r\n                    rate:rate*(1+(depth+1)*0.2),\r\n                    fontSize:50*size/(1+(depth+1)*0.2),\r\n                    ...((child as any).props||{})}}/>\r\n            })\r\n          : child\r\n    }), [childHub, depth, fn, isOpen, props.children, rate, set, size])\r\n    return (\r\n        <div style={{position:\"fixed\",left:position.x,bottom:position.y}}>\r\n            {springs.map((spring, key) =>\r\n                <animated.div key={`${depth}-${key}`} style={{...spring, ...styles.pill}}\r\n                    onClick={e=>setHub(e, key)}>\r\n                    {(children as any)[key]}\r\n                </animated.div>\r\n            )}\r\n        </div>\r\n    )\r\n}\r\n","import React, {FC, CSSProperties as CSS,useState, useMemo} from 'react'\r\nimport { Helmet } from 'react-helmet-async';\r\nimport { MDBInput, MDBBtn } from 'mdbreact'\r\nimport { Mdmd } from '@tsei/mdmd'\r\nimport { useGrid } from 'use-grid'\r\nimport { Card, Grow, Head, Icon } from '../src/components'\r\nimport { useNote, usePage, useUser } from '../src/hooks'\r\nimport { Modal, Notes, Pills, Split, Sides, Trans, Trees } from '../src/containers'\r\nimport { customPage, CustomPage, pageConfig, fetcher, signin, scrollTop } from './utils'\r\n\r\nconst styles:{[key:string]:CSS} = {\r\n    top: {minHeight:\"100%\",overflow:\"hidden\"},\r\n}\r\nexport const Note :FC = () => {\r\n    // ******************** FOR FETCH ******************** //\r\n    const [page, setPage] = usePage<CustomPage>(customPage, pageConfig)\r\n    const [note, setNote] = useNote(page.urls[1], fetcher)\r\n    const [user, setUser] = useUser(page.urls[2], signin, {onSign:()=>setPage({status:\"\"})})\r\n    // ******************** FOR DESIGN ******************** //\r\n    const [lang, setLang] = useState<string>(page.language)\r\n    const [size, setSize] = useGrid <number>({md:1, lg:1.5})\r\n    const [dark, setDark] = useGrid <number>({md:1, lg:0  })\r\n    const [side,        ] = useGrid({xs:0,xl:89/233}) // todo ref and hidden:0 (edit useGrid)\r\n    // ******************** FOR RENDER ******************** //\r\n    const onView       = useMemo(()=>()=>setNote(p=>p?.next),[setNote])\r\n    const onClick      = useMemo(()=>()=>setPage({id:\"\"})   ,[setPage])\r\n    const onSignin     = useMemo(()=>()=>setPage(p=>({status:p.status===  \"\"?\"IN\":\"\"  })),[setPage])\r\n    const onMouseEnter = useMemo(()=>()=>setPage(p=>({status:p.status===\"UP\"?\"IN\":\"UP\"})),[setPage])\r\n    const [left,right] = useMemo(()=>{\r\n        const style = {transform:\"translate(-50%)\",left:\"50%\",marginTop:size*50}\r\n        return [\"cooment\",\"arrow-left\"].map(fa => (<Icon {...{fa,size,style,onClick}}/>))\r\n    }, [size,onClick])\r\n    return (\r\n        <div style={{...styles.top, background:dark?\"#000\":\"#f1f1f1\", paddingTop:size*100,}}>\r\n            <Head {...{dark,size,onClick,}}>Note</Head>\r\n            <Split order={note?[side,-1]:[0,1]}>\r\n                <Card {...{dark,size,space:size*25, min:1}}>\r\n                    <Trees  {...{dark,size:size/2,root:page.id?0:1}}\r\n                            {...(page.id?{fontSize:\"14px\"}:{})}\r\n                        style={{fontSize:\"1.2rem\"}}\r\n                        topStyle={{padding:\"1.2rem\"}}>\r\n                        {side > 0 && note && note.results instanceof Array && note.results\r\n                            .map(n => [lang==='ja'? n?.ja_text : n?.en_text, n.id+\"\"])\r\n                            .filter(([text]) => typeof text===\"string\" && text.trim()[0]===\"#\" )\r\n                            .map(([text,id]) => [text?.trim()?.split('\\n')[0]?.replace(/#+ /g, ''), id])\r\n                            .map(([text,id]) => <span key={id}>{text}</span>)}\r\n                    </Trees>\r\n                </Card>\r\n                <>\r\n                    { note && note.results instanceof Array &&\r\n                    <Notes {...(page.isHome?{}:{size,left,right})}>\r\n                        {note.results.map(({\r\n                        ja_text=\"\",//note_id=\"\",author_name=null, //,posted_time=null,\r\n                        en_text=\"\",     id=\"\" }) =>\r\n                        <div key={id}>\r\n                            <Card {...{...page.isHome?{max:500,onClick:()=>setPage({id:id+\"\"})}:{size},dark,space:size*25}}>\r\n                                <Mdmd color={dark?\"dark\":\"elegant\"} style={{fontSize:\"1.2rem\"}}\r\n                                     source={lang===\"ja\"?ja_text:en_text}/>\r\n                            </Card>\r\n                        </div> )}\r\n                    </Notes> } { (!note || note.next) &&\r\n                    <Grow {...{size,onClick:()=>onView(),onView}} /> }\r\n                </>\r\n            </Split>\r\n            {/******************** Modals ********************/}\r\n            <Modal {...{dark,size,open:!!page.status,onClose:()=>setPage({status:\"\"})}}>\r\n                <Card {...{dark,size,style:{max:\"100vh\"},space:size*25}}>\r\n                    <Head {...{dark,size,onMouseEnter}}>SIGN {user.isAuth?\"OUT\":page.status}</Head>\r\n                    {!user.isAuth && user.input.map((v,k)=>v.name===\"email\"&&page.status!==\"UP\"?null:\r\n                    <MDBInput {...v} key={k}/> )}\r\n                    <MDBBtn color=\"elegant\"\r\n                        style={{width:\"100%\",borderRadus:size*50}}\r\n                        onClick={()=>setUser(page.urls[2])}\r\n                        children={user.isAuth?\"Signout\":\"Get!\"}/>\r\n                </Card>\r\n            </Modal>\r\n            {/******************** FANTASTIC UI ********************/}\r\n            <Sides {...{size}}>\r\n                <a style={{color:\"#818181\"}} href=\"/\"    >Home</a>\r\n                <a style={{color:\"#818181\"}} href=\"/hook\">Hook</a>\r\n                <a style={{color:\"#818181\"}} href=\"/note\">Note</a>\r\n            </Sides>\r\n            <Trans {...{size}}>\r\n                <div onClick={()=>setLang(p=>p!=='ja'?'ja':'en')}>{lang.toUpperCase()}</div>\r\n                <div onClick={()=>setDark((p:any)=>({md:p.lg,lg:p.md}))}>{dark?'':''}</div>\r\n                <div onClick={()=>setSize((p:any)=>({md:p.lg,lg:p.md}))}>{size>1?'':''}</div>\r\n            </Trans>\r\n            <Pills {...{size}}>\r\n                <Icon fa=\"ellipsis-h\"        {...{dark,size}} onClick={()=>null}>\r\n                    <Icon fa=\"arrow-left\"    {...{dark,size}} onClick={onClick}/>\r\n                    <Icon fa=\"location-arrow\"{...{dark,size}} onClick={scrollTop}/>\r\n                    <Icon fa=\"sign-in-alt\"   {...{dark,size}} onClick={onSignin}/>\r\n                </Icon>\r\n            </Pills>\r\n            <Helmet>\r\n                <title>{note?\"note\":\"Loading...\"}</title>\r\n                <meta charSet=\"utf-8\" />\r\n                <meta name=\"Hatena::Bookmark\" content=\"nocomment\" />\r\n                <link rel=\"canonical\" href=\"https://tsei.jp/\" />\r\n            </Helmet>\r\n        </div>\r\n    )\r\n}\r\n\r\n// TODO : make in last of note\r\n// !isHome && (note.children||[]).map((child:any,i:number) =>\r\n//     <Card {...{key:i,dark,size,style:{fontSize:\"1.2rem\"}}}>\r\n//         <Mdmd source={child[`${lang}_text`]}/>\r\n//     </Card>)\r\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport {unregister} from './serviceWorker';\nimport {HelmetProvider} from 'react-helmet-async';\nimport {ControlsProvider} from 'react-three-gui';\nimport {BrowserRouter, Redirect, Route, Switch} from 'react-router-dom'\n\nimport {Home} from './Home';\nimport {Hook} from './Hook';\nimport {None} from './None';\nimport {Note} from './Note';\n\nimport './styles.css'\nimport '@fortawesome/fontawesome-free/css/all.min.css';\nimport \"bootstrap-css-only/css/bootstrap.min.css\";\nimport \"mdbreact/dist/css/mdb.css\";\n\nconst App = (\n    <HelmetProvider>\n        <ControlsProvider>\n            <BrowserRouter>\n                <Switch>\n                    <Route    path=\"/\"     component={Home} exact/>\n                    <Route    path=\"/home\" component={Home}  exact/>\n                    <Route    path='/hook' component={Hook}/>\n                    <Route    path=\"/note\" component={Note}/>\n                    <Route    path='/none' component={None}/>\n                    <Redirect              to='/none' />\n                </Switch>\n            </BrowserRouter>\n        </ControlsProvider>\n    </HelmetProvider>\n)\n\nReactDOM.render( App , document.getElementById('root'));\nunregister();\n","import { useEffect, useCallback, useState, useRef } from 'react'\r\nimport { None, NoteNode as NN, NoteGetter, NotePoster, NoteConfig, URL as U, BasicProps } from '../types'\r\nimport { is, equalPathname } from '../utils'\r\n//import useSWR from 'swr'\r\nexport const useNote = (\r\n    initGetURL: BasicProps<U|string>,\r\n    initGetter: NoteGetter|null=null,\r\n    initPoster: NotePoster|null=null,\r\n    initNoteConfig: Partial<NoteConfig>={}\r\n) : [ NN, (\r\n        updateGetURL: ((pre:NN)=>None<U|string>)|None<U|string>,\r\n        updateGetter?: NoteGetter|null,\r\n        updateConfig?: Partial<NoteConfig>\r\n    ) => void, (\r\n        updatePoster?: NotePoster|null,\r\n        updateConfig?: Partial<NoteConfig>\r\n    ) => void\r\n] => {\r\n    if (is.fun(initGetURL)) initGetURL = initGetURL()\r\n    if (is.str(initGetURL)) initGetURL = new URL(initGetURL)\r\n    const getURLRef  = useRef<U>()\r\n    const getterRef  = useRef(initGetter)\r\n    const posterRef  = useRef(initPoster)\r\n    const configRef  = useRef(initNoteConfig)\r\n    const isFetching = useRef<boolean>(false)\r\n    const [note,set] = useState<NN>(null)\r\n    //  *************************  useEffect  *************************  //\r\n    useEffect(() => {\r\n        if (equalPathname(getURLRef.current, initGetURL as U)) return\r\n        getURLRef.current = initGetURL as U\r\n        if  (isFetching.current) return\r\n        else isFetching.current = true;\r\n        if (getterRef.current)\r\n            getterRef.current(getURLRef.current).then((res:any) => {\r\n                setTimeout(() => void (isFetching.current = false), 1000)\r\n                set(pre => res || pre)\r\n            })\r\n    }, [initGetURL])\r\n    //  *************************  getNote  *************************  //\r\n    //  * getNote(\"/api/note\", fetcher) => refresh note data from url\r\n    //  * getNote(p=>p.next  , fetcher) => add note data from url\r\n    //  ************************* ************** *************************  //\r\n    const getNote = useCallback((updateURL,updateGetter=null,updateConfig={}) => {\r\n        if  (isFetching.current) return\r\n        else isFetching.current = true;\r\n        if (is.fun(updateURL   )) updateURL = updateURL(note);\r\n        if (is.str(updateURL   )) updateURL = new URL(updateURL);\r\n        if (is.nul(updateGetter)) updateGetter = getterRef.current;\r\n        const previousURL = getURLRef.current\r\n        getURLRef.current = updateURL\r\n        getterRef.current = updateGetter\r\n        configRef.current = {...configRef.current, ...updateConfig}\r\n        if (getterRef.current)\r\n            getterRef.current(updateURL).then((res:any) => {\r\n                setTimeout(() => (isFetching.current = false), 1000)\r\n                set(pre => {\r\n                    console.log(\"update\");\r\n                    if (!equalPathname(previousURL, getURLRef.current)) return res\r\n                    const {onChange=null} = configRef.current\r\n                    typeof onChange===\"function\" && onChange()\r\n                    const diff = pre\r\n                      ? (pre.results||[]).filter((p:any) =>\r\n                      ! (res.results||[]).find((r:any) => r.id===p.id)\r\n                    ) : []\r\n                    return {...res, results:[...diff, ...res.results]}\r\n                })\r\n            })\r\n    }, [note])\r\n    //  *************************  postNote  *************************  //\r\n    //  ************************* ************** *************************  //\r\n    const postNote = useCallback((updatePoster=null,updateConfig={}) => {\r\n        if  (isFetching.current) return\r\n        else isFetching.current = true;\r\n        if (is.nul(updatePoster)) updatePoster = posterRef.current;\r\n        posterRef.current = updatePoster\r\n        configRef.current = {...configRef.current, ...updateConfig}\r\n        return\r\n    }, [])\r\n    return [note, getNote, postNote]\r\n}\r\n","/** *************************  USE USER  *************************\r\n *  This is a hook to manage user info and API\r\n *    - const [user, set] = useUser(url, fetcher)\r\n *    - ```\r\n *      ```\r\n *  # ***** useUser API Configs *****\r\n *  ## Props Values\r\n *    - `const _ = usePage(@initURL, @initFetcher, @initConifg)`\r\n *    - @initURL:string\r\n *    - @initFetcher:function\r\n *    - @initConfig : {\r\n *        @\r\n *      }\r\n *  ## Return Values\r\n *    - `const [user, setUser] = useUser(...)`\r\n *    - @user : {\r\n *        @username : user name from fetched API e.g. tseijp\r\n *        @authtoken: user token from cookie\r\n *        @input    : for input Components\r\n *       ~@credit   : the value to send at fetching~\r\n *        @status   : the acton at fetch e.g. IN, UP, OUT or \"\"\r\n *        @userlang : user language from window.navigator.language e.g. ja, en\r\n *      }\r\n *    - @setUser\r\n *      `setUser()`       : Toggle fetching\r\n *      ~`setUser(null)`   : switch status IN->UP or UP->IN~\r\n *      ~`setUser(boolean)`: switch status '' or IN|UP|OUT~\r\n *  # TODO : from usePages : add following keys\r\n ** ************************* ************** *************************/\r\nimport {useCallback, useState, useMemo, useRef} from 'react'\r\nimport {useCookies} from 'react-cookie'\r\nimport {URL,User,UserConfig,UserSignin} from '../types'\r\nimport {defaultUserConfig} from '../utils'\r\nexport const useUser = (\r\n    initURL :URL,\r\n    initSign:UserSignin,\r\n    initConfig:Partial<UserConfig>=defaultUserConfig // TODO to config.keys.map\r\n) : [ User, {(\r\n    updateURL ?:URL|null,\r\n    updateSignin?:UserSignin|null,\r\n    updateConfig?:Partial<UserConfig>,\r\n) : void } ] => {\r\n    const urlRef    = useRef<URL>(initURL)\r\n    const signinRef = useRef<UserSignin>(initSign)\r\n    const configRef = useRef<UserConfig>({...defaultUserConfig,...initConfig})\r\n    const [cookies, set, del] = useCookies(configRef.current.keys)\r\n    const [credit, setCredit] = useState({username:cookies.username||'',password:'',email:''})\r\n    // *************************  For setUser  ************************* //\r\n    const setUser = useCallback((\r\n        updateURL    = null,\r\n        updateSignin = null,\r\n        updateConfig = {}\r\n    ) => {\r\n        const {onSign=null,onSignin=null,onSignout=null,onError=null} = initConfig\r\n        if (updateURL)       urlRef.current = updateURL\r\n        if (updateSignin) signinRef.current = updateSignin\r\n        if (updateConfig) configRef.current = updateConfig\r\n        return (cookies.authtoken)\r\n          ? (del('authtoken',{path:'/'}), onSign&&onSign(), onSignout&&onSignout())\r\n          : signinRef\r\n            .current(urlRef.current, credit)\r\n            .then( (user:{[K in 'username'|'authtoken']:string}) => {\r\n                if (!user.username || !user.authtoken)\r\n                    throw new Error()\r\n                onSign   && onSign()  ; set(\"username\" ,user.username ,{path:'/'});\r\n                onSignin && onSignin(); set(\"authtoken\",user.authtoken,{path:'/'});\r\n            })\r\n            .catch((_:any)=>onError&&onError())\r\n    }, [cookies,set,del,credit,initConfig] )\r\n    // *************************  For Render  ************************* //\r\n    const onChange = useCallback(({target}:any) => {\r\n        setCredit(p => ({...p, [target.name]:target.value}) )\r\n    }, [])\r\n    const user = useMemo<User>(() => ({\r\n        username :cookies.username ||'', isAuth:!!cookies.authtoken,\r\n        authtoken:cookies.authtoken||'', input: Object\r\n            .entries({username:'user',password:'lock',email:'envelope'})\r\n            .map(([name,icon]) => ({\r\n                label: `Type your ${name}`, value: (credit as any)[name], name, icon,\r\n                group: true, validate:true, type: name===\"username\"?\"text\":name, onChange,\r\n                ...(name===\"password\"?{autoComplete:\"on\"}:{error:\"wrong\",success:\"right\"})\r\n            }))\r\n    }), [cookies, credit, onChange])\r\n    return [user, setUser]\r\n}\r\n    /*const input = useMemo<User[\"input\"]>(() => Object\r\n        .entries({username:'user',password:'lock',email:'envelope'})\r\n        .map(([name,icon]) => ({\r\n            label: `Type your ${name}`, value: (credit as any)[name], name, icon,\r\n            group: true, validate:true, type: name===\"username\"?\"text\":name, onChange,\r\n            ...(name===\"password\"?{autoComplete:\"on\"}:{error:\"wrong\",success:\"right\"}),\r\n    })), [credit, onChange])\r\n    return [useMemo(() => ({\r\n        username :cookies.username ||'',\r\n        authtoken:cookies.authtoken||'', input,\r\n        //status : sign?\"\":cookies.authtoken?\"OUT\":inup\r\n    }), [cookies, input]), setUser]\r\n}*/\r\n"],"sourceRoot":""}